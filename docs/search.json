[
  {
    "objectID": "cars-analysis.html",
    "href": "cars-analysis.html",
    "title": "Cars analysis",
    "section": "",
    "text": "Here are the first few lines of the cars dataset:\n\nsummary(cars)\n\n     speed           dist       \n Min.   : 4.0   Min.   :  2.00  \n 1st Qu.:12.0   1st Qu.: 26.00  \n Median :15.0   Median : 36.00  \n Mean   :15.4   Mean   : 42.98  \n 3rd Qu.:19.0   3rd Qu.: 56.00  \n Max.   :25.0   Max.   :120.00  \n\n\nThere are 50 rows in total. You can also embed plots, for example:"
  },
  {
    "objectID": "cars-analysis.html#introduction",
    "href": "cars-analysis.html#introduction",
    "title": "Cars analysis",
    "section": "",
    "text": "Here are the first few lines of the cars dataset:\n\nsummary(cars)\n\n     speed           dist       \n Min.   : 4.0   Min.   :  2.00  \n 1st Qu.:12.0   1st Qu.: 26.00  \n Median :15.0   Median : 36.00  \n Mean   :15.4   Mean   : 42.98  \n 3rd Qu.:19.0   3rd Qu.: 56.00  \n Max.   :25.0   Max.   :120.00  \n\n\nThere are 50 rows in total. You can also embed plots, for example:"
  },
  {
    "objectID": "lectures/lecture-data-cleaning.html#data-cleaning-with-dplyr",
    "href": "lectures/lecture-data-cleaning.html#data-cleaning-with-dplyr",
    "title": "Data Viz with R",
    "section": "Data cleaning with dplyr",
    "text": "Data cleaning with dplyr"
  },
  {
    "objectID": "lectures/lecture-data-cleaning.html#r-projects",
    "href": "lectures/lecture-data-cleaning.html#r-projects",
    "title": "Data Viz with R",
    "section": "R Projects",
    "text": "R Projects\n\nWe use R projects to keep all our code and files organised in a single space\n\n\nArtwork by @allison_horst"
  },
  {
    "objectID": "lectures/lecture-data-cleaning.html#absolute-paths",
    "href": "lectures/lecture-data-cleaning.html#absolute-paths",
    "title": "Data Viz with R",
    "section": "Absolute paths",
    "text": "Absolute paths\n\nsetwd(\"/Users/z3509778/Library/CloudStorage/OneDrive-UNSW/Data Vis Workshop/CourseSite\")\n\n\n\n\nIf the first line of your R script is\nsetwd(\"C:\\Users\\jenny\\path\\that\\only\\I\\have\")\nI will come into your office and SET YOUR COMPUTER ON FIRE üî•.\n\n\n‚ÄîJenny Bryan in Project-oriented workflow"
  },
  {
    "objectID": "lectures/lecture-data-cleaning.html#relative-paths-with-herehere",
    "href": "lectures/lecture-data-cleaning.html#relative-paths-with-herehere",
    "title": "Data Viz with R",
    "section": "Relative paths with here::here()",
    "text": "Relative paths with here::here()\n\nArtwork by @allison_horst"
  },
  {
    "objectID": "lectures/lecture-data-cleaning.html#mini-exercise",
    "href": "lectures/lecture-data-cleaning.html#mini-exercise",
    "title": "Data Viz with R",
    "section": "Mini-Exercise",
    "text": "Mini-Exercise\n\n 3 minutes\n\nAre you here yet?\n\n\n\n\n\n\nEnter here::here() at the console to see your current working directory. This should be where you saved your project!\nEnter here::here(\"exercises\") at the console. What happens?\nEnter list.files(here::here(\"exercises\")) at the console. Note that you don‚Äôt need the full path!"
  },
  {
    "objectID": "lectures/lecture-data-cleaning.html#section",
    "href": "lectures/lecture-data-cleaning.html#section",
    "title": "Data Viz with R",
    "section": "",
    "text": "Illustrations from the Openscapes blog Tidy Data for reproducibility, efficiency, and collaboration by Julia Lowndes and Allison Horst‚Äù"
  },
  {
    "objectID": "lectures/lecture-data-cleaning.html#section-1",
    "href": "lectures/lecture-data-cleaning.html#section-1",
    "title": "Data Viz with R",
    "section": "",
    "text": "Illustrations from the Openscapes blog Tidy Data for reproducibility, efficiency, and collaboration by Julia Lowndes and Allison Horst‚Äù"
  },
  {
    "objectID": "lectures/lecture-data-cleaning.html#an-example-untidy-data",
    "href": "lectures/lecture-data-cleaning.html#an-example-untidy-data",
    "title": "Data Viz with R",
    "section": "An example: untidy data",
    "text": "An example: untidy data\nPenguin species and island of habitation\n\n\n# A tibble: 3 √ó 4\n# Groups:   species [3]\n  species   Biscoe Dream Torgersen\n  &lt;fct&gt;      &lt;int&gt; &lt;int&gt;     &lt;int&gt;\n1 Adelie        44    56        52\n2 Chinstrap     NA    68        NA\n3 Gentoo       124    NA        NA"
  },
  {
    "objectID": "lectures/lecture-data-cleaning.html#an-example-tidy-data",
    "href": "lectures/lecture-data-cleaning.html#an-example-tidy-data",
    "title": "Data Viz with R",
    "section": "An example: tidy data",
    "text": "An example: tidy data\nPenguin species and island of habitation\n\n\n# A tibble: 5 √ó 3\n# Groups:   species [3]\n  species   island        n\n  &lt;fct&gt;     &lt;fct&gt;     &lt;int&gt;\n1 Adelie    Biscoe       44\n2 Adelie    Dream        56\n3 Adelie    Torgersen    52\n4 Chinstrap Dream        68\n5 Gentoo    Biscoe      124"
  },
  {
    "objectID": "lectures/lecture-data-cleaning.html#section-3",
    "href": "lectures/lecture-data-cleaning.html#section-3",
    "title": "Data Viz with R",
    "section": "",
    "text": "By Daniel V√§is√§nen"
  },
  {
    "objectID": "lectures/lecture-data-cleaning.html#section-4",
    "href": "lectures/lecture-data-cleaning.html#section-4",
    "title": "Data Viz with R",
    "section": "",
    "text": "dplyr is a grammar of data manipulation, providing a consistent set of verbs that help you solve the most common data manipulation challenges\n\n\ndplyr.tidyverse.org/"
  },
  {
    "objectID": "lectures/lecture-data-cleaning.html#dplyr-verbs",
    "href": "lectures/lecture-data-cleaning.html#dplyr-verbs",
    "title": "Data Viz with R",
    "section": "dplyr verbs",
    "text": "dplyr verbs\n\n\n\nfilter()\nselect()\nrename()\nmutate()\narrange()\nslice()\ncase_when()\npivot_longer()\n\n\n\nRename a variable?\nSort by a given variable?\nKeep rows that match a condition?\nKeep or drop columns?"
  },
  {
    "objectID": "lectures/lecture-data-cleaning.html#keep-rows-that-match-a-condition-with-filter",
    "href": "lectures/lecture-data-cleaning.html#keep-rows-that-match-a-condition-with-filter",
    "title": "Data Viz with R",
    "section": "Keep rows that match a condition with filter()",
    "text": "Keep rows that match a condition with filter()\n\n\n# Load dplyr library\nlibrary(dplyr)\n\n# Load cars dataset\ndata(cars)\n\n# Filter rows\ncars |&gt; \n  filter(speed == 10)\n\n\n  speed dist\n1    10   18\n2    10   26\n3    10   34\n\n\n\n\n\n\n\n# Filter rows\ncars |&gt; \n  filter(speed &gt;= 10 & dist &lt;= 20)\n\n\n  speed dist\n1    10   18\n2    11   17\n3    12   14\n4    12   20\n5    15   20"
  },
  {
    "objectID": "lectures/lecture-data-cleaning.html#keep-rows-by-position-with-slice",
    "href": "lectures/lecture-data-cleaning.html#keep-rows-by-position-with-slice",
    "title": "Data Viz with R",
    "section": "Keep rows by position with slice()",
    "text": "Keep rows by position with slice()\n\n\n# Slice rows 1 to 3\ncars |&gt; \n  slice(1:3)\n\n\n  speed dist\n1     4    2\n2     4   10\n3     7    4\n\n\n\n\n\n\n\n# Slice last 3 rows\ncars |&gt; \n  slice_tail(n=3)\n\n\n  speed dist\n1    24   93\n2    24  120\n3    25   85\n\n\n\n\n\n\n\n\n# Slice speediest 3 rows\ncars |&gt; \n  slice_max(speed, n=3)\n\n\n  speed dist\n1    25   85\n2    24   70\n3    24   92\n4    24   93\n5    24  120"
  },
  {
    "objectID": "lectures/lecture-data-cleaning.html#keep-or-drop-columns-with-select",
    "href": "lectures/lecture-data-cleaning.html#keep-or-drop-columns-with-select",
    "title": "Data Viz with R",
    "section": "Keep or drop columns with select()",
    "text": "Keep or drop columns with select()\n\n\n# Filter rows\ncars |&gt; \n  select(speed)\n\n\n   speed\n1      4\n2      4\n3      7\n4      7\n5      8\n6      9\n7     10\n8     10\n9     10\n10    11\n11    11\n12    12\n13    12\n14    12\n15    12\n16    13\n17    13\n18    13\n19    13\n20    14\n21    14\n22    14\n23    14\n24    15\n25    15\n26    15\n27    16\n28    16\n29    17\n30    17\n31    17\n32    18\n33    18\n34    18\n35    18\n36    19\n37    19\n38    19\n39    20\n40    20\n41    20\n42    20\n43    20\n44    22\n45    23\n46    24\n47    24\n48    24\n49    24\n50    25"
  },
  {
    "objectID": "lectures/lecture-data-cleaning.html#select-columns-with-select",
    "href": "lectures/lecture-data-cleaning.html#select-columns-with-select",
    "title": "Data Viz with R",
    "section": "Select columns with select()",
    "text": "Select columns with select()\n\n\n# Filter rows\ncars |&gt; \n  select(starts_with(\"d\"))\n\n\n   dist\n1     2\n2    10\n3     4\n4    22\n5    16\n6    10\n7    18\n8    26\n9    34\n10   17\n11   28\n12   14\n13   20\n14   24\n15   28\n16   26\n17   34\n18   34\n19   46\n20   26\n21   36\n22   60\n23   80\n24   20\n25   26\n26   54\n27   32\n28   40\n29   32\n30   40\n31   50\n32   42\n33   56\n34   76\n35   84\n36   36\n37   46\n38   68\n39   32\n40   48\n41   52\n42   56\n43   64\n44   66\n45   54\n46   70\n47   92\n48   93\n49  120\n50   85"
  },
  {
    "objectID": "lectures/lecture-data-cleaning.html#rename-a-variable-with-rename",
    "href": "lectures/lecture-data-cleaning.html#rename-a-variable-with-rename",
    "title": "Data Viz with R",
    "section": "Rename a variable with rename()",
    "text": "Rename a variable with rename()\n\n\n# rename variable\ncars |&gt; \n  rename(distance = dist)\n\n\n   speed distance\n1      4        2\n2      4       10\n3      7        4\n4      7       22\n5      8       16\n6      9       10\n7     10       18\n8     10       26\n9     10       34\n10    11       17\n11    11       28\n12    12       14\n13    12       20\n14    12       24\n15    12       28\n16    13       26\n17    13       34\n18    13       34\n19    13       46\n20    14       26\n21    14       36\n22    14       60\n23    14       80\n24    15       20\n25    15       26\n26    15       54\n27    16       32\n28    16       40\n29    17       32\n30    17       40\n31    17       50\n32    18       42\n33    18       56\n34    18       76\n35    18       84\n36    19       36\n37    19       46\n38    19       68\n39    20       32\n40    20       48\n41    20       52\n42    20       56\n43    20       64\n44    22       66\n45    23       54\n46    24       70\n47    24       92\n48    24       93\n49    24      120\n50    25       85"
  },
  {
    "objectID": "lectures/lecture-data-cleaning.html#create-new-variables-with-mutate",
    "href": "lectures/lecture-data-cleaning.html#create-new-variables-with-mutate",
    "title": "Data Viz with R",
    "section": "Create new variables with mutate()",
    "text": "Create new variables with mutate()\n\n\n# Filter rows\ncars |&gt; \n  mutate(\n    time = dist / speed\n  )\n\n\n   speed dist      time\n1      4    2 0.5000000\n2      4   10 2.5000000\n3      7    4 0.5714286\n4      7   22 3.1428571\n5      8   16 2.0000000\n6      9   10 1.1111111\n7     10   18 1.8000000\n8     10   26 2.6000000\n9     10   34 3.4000000\n10    11   17 1.5454545\n11    11   28 2.5454545\n12    12   14 1.1666667\n13    12   20 1.6666667\n14    12   24 2.0000000\n15    12   28 2.3333333\n16    13   26 2.0000000\n17    13   34 2.6153846\n18    13   34 2.6153846\n19    13   46 3.5384615\n20    14   26 1.8571429\n21    14   36 2.5714286\n22    14   60 4.2857143\n23    14   80 5.7142857\n24    15   20 1.3333333\n25    15   26 1.7333333\n26    15   54 3.6000000\n27    16   32 2.0000000\n28    16   40 2.5000000\n29    17   32 1.8823529\n30    17   40 2.3529412\n31    17   50 2.9411765\n32    18   42 2.3333333\n33    18   56 3.1111111\n34    18   76 4.2222222\n35    18   84 4.6666667\n36    19   36 1.8947368\n37    19   46 2.4210526\n38    19   68 3.5789474\n39    20   32 1.6000000\n40    20   48 2.4000000\n41    20   52 2.6000000\n42    20   56 2.8000000\n43    20   64 3.2000000\n44    22   66 3.0000000\n45    23   54 2.3478261\n46    24   70 2.9166667\n47    24   92 3.8333333\n48    24   93 3.8750000\n49    24  120 5.0000000\n50    25   85 3.4000000"
  },
  {
    "objectID": "lectures/lecture-data-cleaning.html#create-new-variables-with-mutate-1",
    "href": "lectures/lecture-data-cleaning.html#create-new-variables-with-mutate-1",
    "title": "Data Viz with R",
    "section": "Create new variables with mutate()",
    "text": "Create new variables with mutate()\n\n\n# Filter rows\ncars |&gt; \n  mutate(\n    class = ifelse(speed &gt;= 10, \n                   \"fast\",\n                   \"slow\")\n  )\n\n\n   speed dist class\n1      4    2  slow\n2      4   10  slow\n3      7    4  slow\n4      7   22  slow\n5      8   16  slow\n6      9   10  slow\n7     10   18  fast\n8     10   26  fast\n9     10   34  fast\n10    11   17  fast\n11    11   28  fast\n12    12   14  fast\n13    12   20  fast\n14    12   24  fast\n15    12   28  fast\n16    13   26  fast\n17    13   34  fast\n18    13   34  fast\n19    13   46  fast\n20    14   26  fast\n21    14   36  fast\n22    14   60  fast\n23    14   80  fast\n24    15   20  fast\n25    15   26  fast\n26    15   54  fast\n27    16   32  fast\n28    16   40  fast\n29    17   32  fast\n30    17   40  fast\n31    17   50  fast\n32    18   42  fast\n33    18   56  fast\n34    18   76  fast\n35    18   84  fast\n36    19   36  fast\n37    19   46  fast\n38    19   68  fast\n39    20   32  fast\n40    20   48  fast\n41    20   52  fast\n42    20   56  fast\n43    20   64  fast\n44    22   66  fast\n45    23   54  fast\n46    24   70  fast\n47    24   92  fast\n48    24   93  fast\n49    24  120  fast\n50    25   85  fast"
  },
  {
    "objectID": "lectures/lecture-data-cleaning.html#create-new-variables-with-mutate-2",
    "href": "lectures/lecture-data-cleaning.html#create-new-variables-with-mutate-2",
    "title": "Data Viz with R",
    "section": "Create new variables with mutate()",
    "text": "Create new variables with mutate()\n\n\n# Filter rows\ncars |&gt; \n  mutate(\n    time = dist / speed,\n    class = ifelse(speed &gt;= 10, \n                   \"fast\",\n                   \"slow\")\n  )\n\n\n   speed dist      time class\n1      4    2 0.5000000  slow\n2      4   10 2.5000000  slow\n3      7    4 0.5714286  slow\n4      7   22 3.1428571  slow\n5      8   16 2.0000000  slow\n6      9   10 1.1111111  slow\n7     10   18 1.8000000  fast\n8     10   26 2.6000000  fast\n9     10   34 3.4000000  fast\n10    11   17 1.5454545  fast\n11    11   28 2.5454545  fast\n12    12   14 1.1666667  fast\n13    12   20 1.6666667  fast\n14    12   24 2.0000000  fast\n15    12   28 2.3333333  fast\n16    13   26 2.0000000  fast\n17    13   34 2.6153846  fast\n18    13   34 2.6153846  fast\n19    13   46 3.5384615  fast\n20    14   26 1.8571429  fast\n21    14   36 2.5714286  fast\n22    14   60 4.2857143  fast\n23    14   80 5.7142857  fast\n24    15   20 1.3333333  fast\n25    15   26 1.7333333  fast\n26    15   54 3.6000000  fast\n27    16   32 2.0000000  fast\n28    16   40 2.5000000  fast\n29    17   32 1.8823529  fast\n30    17   40 2.3529412  fast\n31    17   50 2.9411765  fast\n32    18   42 2.3333333  fast\n33    18   56 3.1111111  fast\n34    18   76 4.2222222  fast\n35    18   84 4.6666667  fast\n36    19   36 1.8947368  fast\n37    19   46 2.4210526  fast\n38    19   68 3.5789474  fast\n39    20   32 1.6000000  fast\n40    20   48 2.4000000  fast\n41    20   52 2.6000000  fast\n42    20   56 2.8000000  fast\n43    20   64 3.2000000  fast\n44    22   66 3.0000000  fast\n45    23   54 2.3478261  fast\n46    24   70 2.9166667  fast\n47    24   92 3.8333333  fast\n48    24   93 3.8750000  fast\n49    24  120 5.0000000  fast\n50    25   85 3.4000000  fast"
  },
  {
    "objectID": "lectures/lecture-data-cleaning.html#create-more-complex-variables-with-case_when",
    "href": "lectures/lecture-data-cleaning.html#create-more-complex-variables-with-case_when",
    "title": "Data Viz with R",
    "section": "Create more complex variables with case_when()",
    "text": "Create more complex variables with case_when()\n\n\n# Create a new variable\ncars |&gt; \n  mutate(\n    class = case_when(\n      speed &lt;= 4 ~ \"slow\", \n      speed &lt;= 10 ~ \"average\", \n      .default = \"fast\"\n    )\n  )\n\n\n   speed dist   class\n1      4    2    slow\n2      4   10    slow\n3      7    4 average\n4      7   22 average\n5      8   16 average\n6      9   10 average\n7     10   18 average\n8     10   26 average\n9     10   34 average\n10    11   17    fast\n11    11   28    fast\n12    12   14    fast\n13    12   20    fast\n14    12   24    fast\n15    12   28    fast\n16    13   26    fast\n17    13   34    fast\n18    13   34    fast\n19    13   46    fast\n20    14   26    fast\n21    14   36    fast\n22    14   60    fast\n23    14   80    fast\n24    15   20    fast\n25    15   26    fast\n26    15   54    fast\n27    16   32    fast\n28    16   40    fast\n29    17   32    fast\n30    17   40    fast\n31    17   50    fast\n32    18   42    fast\n33    18   56    fast\n34    18   76    fast\n35    18   84    fast\n36    19   36    fast\n37    19   46    fast\n38    19   68    fast\n39    20   32    fast\n40    20   48    fast\n41    20   52    fast\n42    20   56    fast\n43    20   64    fast\n44    22   66    fast\n45    23   54    fast\n46    24   70    fast\n47    24   92    fast\n48    24   93    fast\n49    24  120    fast\n50    25   85    fast"
  },
  {
    "objectID": "lectures/lecture-data-cleaning.html#sort-variables-with-arrange",
    "href": "lectures/lecture-data-cleaning.html#sort-variables-with-arrange",
    "title": "Data Viz with R",
    "section": "Sort variables with arrange()",
    "text": "Sort variables with arrange()\n\n\n# Sort by speed\ncars |&gt; \n  arrange(speed)\n\n\n   speed dist\n1      4    2\n2      4   10\n3      7    4\n4      7   22\n5      8   16\n6      9   10\n7     10   18\n8     10   26\n9     10   34\n10    11   17\n11    11   28\n12    12   14\n13    12   20\n14    12   24\n15    12   28\n16    13   26\n17    13   34\n18    13   34\n19    13   46\n20    14   26\n21    14   36\n22    14   60\n23    14   80\n24    15   20\n25    15   26\n26    15   54\n27    16   32\n28    16   40\n29    17   32\n30    17   40\n31    17   50\n32    18   42\n33    18   56\n34    18   76\n35    18   84\n36    19   36\n37    19   46\n38    19   68\n39    20   32\n40    20   48\n41    20   52\n42    20   56\n43    20   64\n44    22   66\n45    23   54\n46    24   70\n47    24   92\n48    24   93\n49    24  120\n50    25   85"
  },
  {
    "objectID": "lectures/lecture-data-cleaning.html#sort-variables-with-arrange-1",
    "href": "lectures/lecture-data-cleaning.html#sort-variables-with-arrange-1",
    "title": "Data Viz with R",
    "section": "Sort variables with arrange()",
    "text": "Sort variables with arrange()\n\n\n# Sort by speed\ncars |&gt; \n  arrange(-speed, dist)\n\n\n   speed dist\n1     25   85\n2     24   70\n3     24   92\n4     24   93\n5     24  120\n6     23   54\n7     22   66\n8     20   32\n9     20   48\n10    20   52\n11    20   56\n12    20   64\n13    19   36\n14    19   46\n15    19   68\n16    18   42\n17    18   56\n18    18   76\n19    18   84\n20    17   32\n21    17   40\n22    17   50\n23    16   32\n24    16   40\n25    15   20\n26    15   26\n27    15   54\n28    14   26\n29    14   36\n30    14   60\n31    14   80\n32    13   26\n33    13   34\n34    13   34\n35    13   46\n36    12   14\n37    12   20\n38    12   24\n39    12   28\n40    11   17\n41    11   28\n42    10   18\n43    10   26\n44    10   34\n45     9   10\n46     8   16\n47     7    4\n48     7   22\n49     4    2\n50     4   10"
  },
  {
    "objectID": "lectures/lecture-data-cleaning.html#the-pipe-operator",
    "href": "lectures/lecture-data-cleaning.html#the-pipe-operator",
    "title": "Data Viz with R",
    "section": "The pipe operator |>",
    "text": "The pipe operator |&gt;\n\n# Sort by speed\ncars |&gt; arrange(speed)\n\n\n\n\n|&gt; is called the pipe operator\nIt takes the object on the left and passes it to the first argument of the function on the right\n\n\n\n\n\n# Equivalent to above code snippet\narrange(cars, speed)\n\n\n\n\nWe can use |&gt; to chain multiple dplyr verbs\nkeyboard shortcut is Ctrl/Cmd + Shift + M"
  },
  {
    "objectID": "lectures/lecture-data-cleaning.html#the-pipe-operator-1",
    "href": "lectures/lecture-data-cleaning.html#the-pipe-operator-1",
    "title": "Data Viz with R",
    "section": "The pipe operator |>",
    "text": "The pipe operator |&gt;\n\n\n# Data prep\ncars |&gt; \n  mutate(time = dist / speed) |&gt; \n  arrange(-time) |&gt; \n  slice(1)\n\n\n  speed dist     time\n1    14   80 5.714286\n\n\n\n\n\nOften we will save the output of such a chain using the assignment operator &lt;-\n\n\n# Data prep\nlongestTime &lt;- cars |&gt;\n  mutate(time = dist / speed) |&gt; \n  arrange(-time) |&gt; \n  slice(1)\n\nlongestTime\n\n\n  speed dist     time\n1    14   80 5.714286"
  },
  {
    "objectID": "lectures/lecture-data-cleaning.html#section-5",
    "href": "lectures/lecture-data-cleaning.html#section-5",
    "title": "Data Viz with R",
    "section": "",
    "text": "Created by Arthur Welle"
  },
  {
    "objectID": "lectures/lecture-data-cleaning.html#the-old-pipe-operator",
    "href": "lectures/lecture-data-cleaning.html#the-old-pipe-operator",
    "title": "Data Viz with R",
    "section": "The old pipe operator %>%",
    "text": "The old pipe operator %&gt;%\nIf you‚Äôve been using R for a while you may be familiar with the %&gt;% pipe operator shipped with the magrittr package.\n\n\n\n\n\n# Exactly the same thing!\ncars |&gt; \n  mutate(time = dist / speed)  |&gt; \n  arrange(-time)  |&gt;  \n  slice(1)\n\n\n\n# Exactly the same thing!\ncars %&gt;% \n  mutate(time = dist / speed) %&gt;%\n  arrange(-time) %&gt;% \n  slice(1)\n\n\n\n\n\n\nFor simple cases, |&gt; and %&gt;% behave the same\n|&gt; is simpler\n|&gt; is implemented in base R"
  },
  {
    "objectID": "lectures/lecture-data-cleaning.html#a-note-on-style",
    "href": "lectures/lecture-data-cleaning.html#a-note-on-style",
    "title": "Data Viz with R",
    "section": "A note on style",
    "text": "A note on style\n\n\n\n# Data prep\ncars |&gt; \n  mutate(time = dist / speed) |&gt; \n  arrange(-time) |&gt; \n  slice(1)\n\n\n\nNeat and easy to read!\nEach verb on a new line\n|&gt; at end of line\nIndentation\nUse of spacing\n\n\n\n\nAvoid this!\n\n# Data prep\ncars|&gt;mutate(time=dist-speed)|&gt;arrange(-time)|&gt;slice(1)"
  },
  {
    "objectID": "lectures/lecture-data-cleaning.html#mini-exercise-1",
    "href": "lectures/lecture-data-cleaning.html#mini-exercise-1",
    "title": "Data Viz with R",
    "section": "Mini-Exercise",
    "text": "Mini-Exercise\n\n 10 minutes\n\nPractice with dplyr!\n\n\n\n\n\n\nIn the RStudio menu navigate to Tools &gt; Global Options &gt; Code and tick the box to use the native pipe operator\nWe will use the penguins dataset shipped in the palmerpenguins library. Determine the longest bill length among the five lightest female penguins from the Gentoo species.\n\n\n# Code to get you started\nlibrary(palmerpenguins) \n\npenguins |&gt; \n  filter(species == )"
  },
  {
    "objectID": "lectures/lecture-data-cleaning.html#factors-in-r",
    "href": "lectures/lecture-data-cleaning.html#factors-in-r",
    "title": "Data Viz with R",
    "section": "Factors in R",
    "text": "Factors in R\nEarlier we used case_when() to create a categorical variable with three categories: fast, average, and slow.\n\n\n# Create a new variable\ncars |&gt; \n  mutate(\n    class = case_when(\n      speed &lt;= 4 ~ \"slow\", \n      speed &lt;= 10 ~ \"average\", \n      .default = \"fast\"\n    )) \n\n\n   speed dist   class\n1      4    2    slow\n2      4   10    slow\n3      7    4 average\n4      7   22 average\n5      8   16 average\n6      9   10 average\n7     10   18 average\n8     10   26 average\n9     10   34 average\n10    11   17    fast\n11    11   28    fast\n12    12   14    fast\n13    12   20    fast\n14    12   24    fast\n15    12   28    fast\n16    13   26    fast\n17    13   34    fast\n18    13   34    fast\n19    13   46    fast\n20    14   26    fast\n21    14   36    fast\n22    14   60    fast\n23    14   80    fast\n24    15   20    fast\n25    15   26    fast\n26    15   54    fast\n27    16   32    fast\n28    16   40    fast\n29    17   32    fast\n30    17   40    fast\n31    17   50    fast\n32    18   42    fast\n33    18   56    fast\n34    18   76    fast\n35    18   84    fast\n36    19   36    fast\n37    19   46    fast\n38    19   68    fast\n39    20   32    fast\n40    20   48    fast\n41    20   52    fast\n42    20   56    fast\n43    20   64    fast\n44    22   66    fast\n45    23   54    fast\n46    24   70    fast\n47    24   92    fast\n48    24   93    fast\n49    24  120    fast\n50    25   85    fast"
  },
  {
    "objectID": "lectures/lecture-data-cleaning.html#factors-in-r-1",
    "href": "lectures/lecture-data-cleaning.html#factors-in-r-1",
    "title": "Data Viz with R",
    "section": "Factors in R",
    "text": "Factors in R\nWe can group_by() this new variable, then use summarise() to calculate the average speed for each group.\n\n\n# Create a new variable\ncars |&gt; \n  mutate(\n    class = case_when(\n      speed &lt;= 4 ~ \"slow\", \n      speed &lt;= 10 ~ \"average\", \n      .default = \"fast\"\n    )) |&gt; \n  group_by(class) |&gt;  \n  summarise(\n    mean = mean(speed)\n  ) \n\n\n# A tibble: 3 √ó 2\n  class    mean\n  &lt;chr&gt;   &lt;dbl&gt;\n1 average  8.71\n2 fast    17.1 \n3 slow     4   \n\n\n\n\nNotice the ordering of the output! This is because the new class variable is a character vector."
  },
  {
    "objectID": "lectures/lecture-data-cleaning.html#factors-in-r-2",
    "href": "lectures/lecture-data-cleaning.html#factors-in-r-2",
    "title": "Data Viz with R",
    "section": "Factors in R",
    "text": "Factors in R\nFactors are useful for handling categorical variables.\n\n\nCategory names\nOrdering categories\nMapping colors to categories (later!)\n\n\n\nTo create a factor you must start by creating a list of the valid levels:\n\n\n# Vector of valid levels\nclassLevels &lt;- c('slow', \n                 'average', \n                 'fast')\n\n# Create factor variable\nfactor(c('fast', 'slow'), \n       levels = classLevels) \n\n\n[1] fast slow\nLevels: slow average fast"
  },
  {
    "objectID": "lectures/lecture-data-cleaning.html#factors-in-r-3",
    "href": "lectures/lecture-data-cleaning.html#factors-in-r-3",
    "title": "Data Viz with R",
    "section": "Factors in R",
    "text": "Factors in R\nLet‚Äôs put it all together!\n\n\n# Create a new variable\ncars |&gt; \n  mutate(\n    class = \n      factor(\n        case_when(\n          speed &lt;= 4 ~ \"slow\", \n          speed &lt;= 10 ~ \"average\", \n          .default = \"fast\"),\n        levels = classLevels)) |&gt; \n  group_by(class) |&gt;  \n  summarise(\n    mean = mean(speed)\n  ) \n\n\n# A tibble: 3 √ó 2\n  class    mean\n  &lt;fct&gt;   &lt;dbl&gt;\n1 slow     4   \n2 average  8.71\n3 fast    17.1 \n\n\n\n\n\nNow the ordering is by speed class, not alphabetically!"
  },
  {
    "objectID": "lectures/lecture-data-cleaning.html#moving-from-wide-to-long-data",
    "href": "lectures/lecture-data-cleaning.html#moving-from-wide-to-long-data",
    "title": "Data Viz with R",
    "section": "Moving from wide to long data",
    "text": "Moving from wide to long data\nConsider the untidy dataset we encountered earlier:\n\n\n# A tibble: 3 √ó 4\n# Groups:   species [3]\n  species   Biscoe Dream Torgersen\n  &lt;fct&gt;      &lt;int&gt; &lt;int&gt;     &lt;int&gt;\n1 Adelie        44    56        52\n2 Chinstrap     NA    68        NA\n3 Gentoo       124    NA        NA"
  },
  {
    "objectID": "lectures/lecture-data-cleaning.html#moving-from-wide-to-long-data-1",
    "href": "lectures/lecture-data-cleaning.html#moving-from-wide-to-long-data-1",
    "title": "Data Viz with R",
    "section": "Moving from wide to long data",
    "text": "Moving from wide to long data\nWe can move from wide format to long long format using pivot_longer() from the tidyr package.\n\n\nlibrary(tidyr)\n\npenguins_wide |&gt; \n  pivot_longer(c(Biscoe, \n                 Dream, \n                 Torgersen))\n\n\n# A tibble: 9 √ó 3\n# Groups:   species [3]\n  species   name      value\n  &lt;fct&gt;     &lt;chr&gt;     &lt;int&gt;\n1 Adelie    Biscoe       44\n2 Adelie    Dream        56\n3 Adelie    Torgersen    52\n4 Chinstrap Biscoe       NA\n5 Chinstrap Dream        68\n6 Chinstrap Torgersen    NA\n7 Gentoo    Biscoe      124\n8 Gentoo    Dream        NA\n9 Gentoo    Torgersen    NA"
  },
  {
    "objectID": "lectures/lecture-data-cleaning.html#moving-from-wide-to-long-data-2",
    "href": "lectures/lecture-data-cleaning.html#moving-from-wide-to-long-data-2",
    "title": "Data Viz with R",
    "section": "Moving from wide to long data",
    "text": "Moving from wide to long data\nWe can move from wide format to long long format using pivot_longer() from the tidyr package.\n\n\nlibrary(tidyr)\n\npenguins_wide |&gt; \n  pivot_longer(c(Biscoe, \n                 Dream, \n                 Torgersen),\n  names_to = \"island\",\n  values_to = \"count\")\n\n\n# A tibble: 9 √ó 3\n# Groups:   species [3]\n  species   island    count\n  &lt;fct&gt;     &lt;chr&gt;     &lt;int&gt;\n1 Adelie    Biscoe       44\n2 Adelie    Dream        56\n3 Adelie    Torgersen    52\n4 Chinstrap Biscoe       NA\n5 Chinstrap Dream        68\n6 Chinstrap Torgersen    NA\n7 Gentoo    Biscoe      124\n8 Gentoo    Dream        NA\n9 Gentoo    Torgersen    NA"
  },
  {
    "objectID": "lectures/lecture-data-cleaning.html#mini-exercise-2",
    "href": "lectures/lecture-data-cleaning.html#mini-exercise-2",
    "title": "Data Viz with R",
    "section": "Mini-Exercise",
    "text": "Mini-Exercise\n\n 10 minutes\n\nPractice pivot wider\n\n\n\n\n\n\nTaskStarter code\n\n\n\nUse the Starter Code to read in the file exercises/2-raw-data/pivot_longer_exercise.xlsx as an R dataframe\nPivot the data to long format, creating new variables sex and count\nMake the variable sex a factor variable with levels ‚Äòfemale‚Äô and ‚Äòmale‚Äô\n\n\n\n\n# Load library\nlibrary(readxl)\n\n# Set the location of the data\ndataLocation &lt;- here::here('exercises/2-raw-data/pivot_longer_exercise.xlsx')\n\n# Read in the data\ndf &lt;- read_excel(\n        path = dataLocation,\n        sheet = 'Sheet1')"
  },
  {
    "objectID": "lectures/lecture-literate-programming.html#literate-programming-with-rmarkdown",
    "href": "lectures/lecture-literate-programming.html#literate-programming-with-rmarkdown",
    "title": "Data Viz with R",
    "section": "Literate programming with Rmarkdown",
    "text": "Literate programming with Rmarkdown"
  },
  {
    "objectID": "lectures/lecture-literate-programming.html#section",
    "href": "lectures/lecture-literate-programming.html#section",
    "title": "Data Viz with R",
    "section": "",
    "text": "Artwork by @allison_horst"
  },
  {
    "objectID": "lectures/lecture-literate-programming.html#examples",
    "href": "lectures/lecture-literate-programming.html#examples",
    "title": "Data Viz with R",
    "section": "Examples",
    "text": "Examples\nSee rmarkdown.rstudio.com/gallery"
  },
  {
    "objectID": "lectures/lecture-literate-programming.html#rmarkdown-.rmd-file",
    "href": "lectures/lecture-literate-programming.html#rmarkdown-.rmd-file",
    "title": "Data Viz with R",
    "section": "Rmarkdown .Rmd file",
    "text": "Rmarkdown .Rmd file\n\n\n\n    ---\n    title: \"Cars analysis\"\n    output: html_document\n    date: \"2024-11-10\"\n    ---\n      \n    ## Introduction\n    Here are the first few lines of the `cars` dataset:\n\n    ```{r cars}\n    summary(cars)\n    ```\n\n    There are `r nrow(cars)` in total. You can also embed plots, for example:\n\n\n    ```{r scatterplot, echo=FALSE}\n    plot(cars)\n    ```\n\n\n\nContents\n\nYAML header\nR code chunks\nFormatted text"
  },
  {
    "objectID": "lectures/lecture-literate-programming.html#output",
    "href": "lectures/lecture-literate-programming.html#output",
    "title": "Data Viz with R",
    "section": "Output",
    "text": "Output\n\ncars-analysis.html"
  },
  {
    "objectID": "lectures/lecture-literate-programming.html#mini-exercise",
    "href": "lectures/lecture-literate-programming.html#mini-exercise",
    "title": "Data Viz with R",
    "section": "Mini-Exercise",
    "text": "Mini-Exercise\n\n 3 minutes\n\nCreate and run a new Rmarkdown file\n\n\n\n\n\n\nIn RStudio, open a new file by clicking \nSelect  R Markdown‚Ä¶\nEnter a Title and Author then click OK\nClick  to knit the file (you will be prompted to save the file‚Äîsave it in your Exercises folder)\nExamine the rendered output"
  },
  {
    "objectID": "lectures/lecture-literate-programming.html#under-the-hood",
    "href": "lectures/lecture-literate-programming.html#under-the-hood",
    "title": "Data Viz with R",
    "section": "Under the hood",
    "text": "Under the hood\n\nRmarkdown Cookbook"
  },
  {
    "objectID": "lectures/lecture-literate-programming.html#output-1",
    "href": "lectures/lecture-literate-programming.html#output-1",
    "title": "Data Viz with R",
    "section": "Output",
    "text": "Output\n\ncars-analysis.docx"
  },
  {
    "objectID": "lectures/lecture-literate-programming.html#output-2",
    "href": "lectures/lecture-literate-programming.html#output-2",
    "title": "Data Viz with R",
    "section": "Output",
    "text": "Output\n\ncars-analysis.pdf"
  },
  {
    "objectID": "lectures/lecture-literate-programming.html#text-formatting",
    "href": "lectures/lecture-literate-programming.html#text-formatting",
    "title": "Data Viz with R",
    "section": "Text formatting",
    "text": "Text formatting\n\n\nRmarkdown syntax\n\nOutput\n\n\n\n\n\n*italic* or _italic_\n\nitalic\n\n\n\n\n\n\n**bold** or __bold__\n\nbold\n\n\n\n\n\n\nsuperscript^2^\n\nsuperscript2\n\n\n\n\n\n\nsubscript~2~\n\nsubscript2\n\n\n\n\n\n\n# Level 1 header\n\nLevel 1 header\n\n\n\n\n\n\n## Level 2 header\n\nLevel 2 header\n\n\n\n\n\n\n### Level 3 header\n\nLevel 3 header\n\n\n\n\n\n\n&gt;Stand out quote\n\n\nStand out quote"
  },
  {
    "objectID": "lectures/lecture-literate-programming.html#lists",
    "href": "lectures/lecture-literate-programming.html#lists",
    "title": "Data Viz with R",
    "section": "Lists",
    "text": "Lists\n\n\nRmarkdown syntax\n\nOutput\n\n\n\n\n\n* Bullet\n* Point\n* list\n\n\nBullet\nPoint\nlist\n\n\n\n\n\n\n\n\n1. Numbered\n1. List\n1. Items\n\n\nNumbered\nList\nItems"
  },
  {
    "objectID": "lectures/lecture-literate-programming.html#links-and-images",
    "href": "lectures/lecture-literate-programming.html#links-and-images",
    "title": "Data Viz with R",
    "section": "Links and images",
    "text": "Links and images\n\n\nRmarkdown syntax\n\nOutput\n\n\n\n\n\n[click here](http://google.com)\n\nclick here\n\n\n\n\n\n\n\n![cars-analysis.html](../images/cars-analysis-html.png)\n\n\n\n\ncars-analysis.html"
  },
  {
    "objectID": "lectures/lecture-literate-programming.html#mini-exercise-1",
    "href": "lectures/lecture-literate-programming.html#mini-exercise-1",
    "title": "Data Viz with R",
    "section": "Mini-Exercise",
    "text": "Mini-Exercise\n\n 5 minutes\n\nPractice text formatting\nEdit the file exercises/5-rmarkdown/poem-exercise.Rmd to generate the output on the right"
  },
  {
    "objectID": "lectures/lecture-literate-programming.html#yaml-header",
    "href": "lectures/lecture-literate-programming.html#yaml-header",
    "title": "Data Viz with R",
    "section": "YAML Header",
    "text": "YAML Header\nYet Another Markdown Language\n\n    ---\n    title: \"Cars analysis\"\n    output: html_document\n    date: \"2024-11-10\"\n    ---\n\n\n\n\nControls whole-document settings\nkey-value pairs\noutput: html_document\noutput: word_document\noutput: pdf_document"
  },
  {
    "objectID": "lectures/lecture-literate-programming.html#yaml-nested-keys",
    "href": "lectures/lecture-literate-programming.html#yaml-nested-keys",
    "title": "Data Viz with R",
    "section": "YAML Nested Keys",
    "text": "YAML Nested Keys\n\n\n\n    output: \n      html_document:\n        toc: true\n        toc_float: true\n        code_folding: hide\n        theme: united"
  },
  {
    "objectID": "lectures/lecture-literate-programming.html#inline-r-code",
    "href": "lectures/lecture-literate-programming.html#inline-r-code",
    "title": "Data Viz with R",
    "section": "Inline R code",
    "text": "Inline R code\n\nInsert values of R objects inline in text\nUseful for quick calculations\n\n\n    Average speed was `r mean(cars$speed)`mph.\n\nAverage speed was 15.4mph."
  },
  {
    "objectID": "lectures/lecture-literate-programming.html#code-chunks",
    "href": "lectures/lecture-literate-programming.html#code-chunks",
    "title": "Data Viz with R",
    "section": "Code chunks",
    "text": "Code chunks\n\n    ```{r scatterplot, echo=FALSE}\n    \n    plot(cars)\n    \n    ```\n\n\n\n\nClick  to add\nStarts and ends with triple backticks ```\n{r} indicates the language is R\n{r scatterplot} indicates the chuck name is scatterplot (not essential by useful for readability and troubleshooting)\necho=FALSE a chunk option meaning don‚Äôt print the code to the output"
  },
  {
    "objectID": "lectures/lecture-literate-programming.html#chunk-options",
    "href": "lectures/lecture-literate-programming.html#chunk-options",
    "title": "Data Viz with R",
    "section": "Chunk options",
    "text": "Chunk options\n\n\nOption\n\nMeaning\n\n\n\n\n\necho=FALSE\n\nShow code in output document (TRUE/FALSE)\n\n\n\n\n\n\neval=FALSE\n\nRun code in the chunk (TRUE/FALSE)\n\n\n\n\n\n\ninclude=FALSE\n\nInclude code in the chunk (TRUE/FALSE)\n\n\n\n\n\n\nmessage=FALSE\n\nDisplay code messages in document (TRUE/FALSE)\n\n\n\n\n\n\nwarning=FALSE\n\nDisplay code warnings in document (TRUE/FALSE)\n\n\n\n\n\n\nfig.width=7\n\nFigure width in inches\n\n\n\n\n\n\nfig.height=7\n\nFigure height in inches"
  },
  {
    "objectID": "lectures/lecture-literate-programming.html#global-options",
    "href": "lectures/lecture-literate-programming.html#global-options",
    "title": "Data Viz with R",
    "section": "Global options",
    "text": "Global options\nUse knitr::opts_chunk$set() to set global options\n\n    ```{r, setup, include=FALSE}\n    knitr::opts_chunk$set(\n      echo = FALSE, fig.width = 5, fig.height = 7\n    )\n    ```\n\n\n\n\n\nHas to go inside an R code chunk\nIndividual code chunks can have different settings"
  },
  {
    "objectID": "lectures/lecture-literate-programming.html#parameters",
    "href": "lectures/lecture-literate-programming.html#parameters",
    "title": "Data Viz with R",
    "section": "Parameters",
    "text": "Parameters\n\nParameterised reports allow you to reuse a report template across multiple similar scenarios\n\n\n\nGenerate reports for a specific time period\nGenerate the same report for different Local Health Districts\nRepeat your whole analysis using a different definition of your exposure variable"
  },
  {
    "objectID": "lectures/lecture-literate-programming.html#parameters-example",
    "href": "lectures/lecture-literate-programming.html#parameters-example",
    "title": "Data Viz with R",
    "section": "Parameters example",
    "text": "Parameters example\n\n\n\n    ---\n    title: \"Parameters Example\"\n    output: html_document\n    params: \n      date: \"November 22nd 2024\"\n      dataset: !r cars\n    ---\n\n    The date is `r params$date`\n\n    ```{r}\n    head(params$dataset)\n    ```\n\n\n\n\n\n\n\nNote dataset: !r cars defines the parameter ‚Äòdataset‚Äô to be an R object, rather than the string ‚Äúcars‚Äù"
  },
  {
    "objectID": "lectures/lecture-literate-programming.html#workflow-and-tips",
    "href": "lectures/lecture-literate-programming.html#workflow-and-tips",
    "title": "Data Viz with R",
    "section": "Workflow and tips",
    "text": "Workflow and tips\n\n\nWrite in your .Rmd file but regularly click  knit and preview your file\nUse global code chunk options to suppress code and warnings that you don‚Äôt want the reader to see (echo=FALSE, warning=FALSE etc)\nSeparate code to generate figures into separate .R files then read into .Rmd using ![](my-chart.png) syntax"
  },
  {
    "objectID": "lectures/lecture-literate-programming.html#mini-exercise-2",
    "href": "lectures/lecture-literate-programming.html#mini-exercise-2",
    "title": "Data Viz with R",
    "section": "Mini-Exercise",
    "text": "Mini-Exercise\n\n 15 minutes\n\nUpdate a parameterised R Markdown Powerpoint slide deck\n\n\n\n\n\n\nOpen the file my-presentation.Rmd in the folder Exercises/5-rmarkdown\nEdit the YAML header to generate a powerpoint output instead of HTML (see here for a list of output format names)\nAdd an additional slide showing the figure on self assessed health\nUpdate the date parameter to print the latest set of figures."
  },
  {
    "objectID": "lectures/overview.html",
    "href": "lectures/overview.html",
    "title": "Lectures",
    "section": "",
    "text": "Artwork by @allison_horst\n\n\nVersion control with Git and GitHub\n\nView slides in full screen\n\n\nData cleaning with dplyr\n\nView slides in full screen\n\n\nData visualisation with ggplot2\n\nView slides in full screen\n\n\nStorytelling with data\n\nView slides in full screen\n\n\nLiterate programming with rmarkdown\n\nView slides in full screen\n\n\n\n\n Back to top",
    "crumbs": [
      "Home",
      "Lectures"
    ]
  },
  {
    "objectID": "exercises/exercise4-1.html",
    "href": "exercises/exercise4-1.html",
    "title": "Getting started",
    "section": "",
    "text": "Aims\n\n\n\n\n\n\n\nFrom this tidy dataframe‚Ä¶\n\n\nTo this nice chart!\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nHow to complete this exercise\n\n\n\n\n Back to top",
    "crumbs": [
      "Home",
      "Exercises",
      "Day 2. Visualisation",
      "Exercise 4 (Advanced)",
      "Getting started"
    ]
  },
  {
    "objectID": "exercises/exercise2-1.html",
    "href": "exercises/exercise2-1.html",
    "title": "Getting started",
    "section": "",
    "text": "The End Goal\nLet‚Äôs start with the goal in mind! Here it is‚Äîa multiple line chart showing the estimated proportion of the population experiencing a range of chronic conditions between 2001 and 2020.\n The simple chart format is enhanced using techniques covered in this workshop.\n\nColour There are 12 chronic conditions presented on the chart presents‚Äîif each line was a separate colour it would be visually overwhelming and difficult to distinguish. Instead, most lines are grey, with two conditions hihglighted: Mental Health in Red and Allergies in Green.\nText hierarchy The main chart title is an informative title highlighting the key message. A descriptive subtitle explains in more detail what is plotted in the chart while the data source is provided in the footnote.\nAnnotation Text annotations at the end of each line are used to help distinguish the chronic conditions.\nStory telling Highlighting just two series helps to tell a story about the conditions that are growing more prevalent. Echoing the line colors in the informative title for Mental health and Allergies help to reinforce this narrative.\n\n\n\nThe data\nThe data for this plot come from the National Health Survey (NHS) 2022, a face-to-face interview survey conducted by the Australian Bureau of Statistics (ABS) and designed to collect information on health behaviours, conditions prevalence, and risk factors in Australia. You can read more about the survey on the ABS website here.\nThese data are openly available for download in .xlsx format from the ABS website and a copy is also included in the workshop repo in the file national-health-survey-2022-table-1.xlsx.\n\n\nAims\nIn this exercise you will use dplyr and other tools to read-in and clean the self-assessed health data from the National Health Survey. The raw data is the .xlsx file downloaded from the ABS data. The final output will be a tidy data file in .csv and .Rda format. Essentially, we will use code to go‚Ä¶\n\n\n\n\n\n\n\nFrom this messy excel sheet‚Ä¶\n\n\nTo this tidy dataframe!\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nTidy data\n\n\n\nRemember, in a tidy dataset:\n\nEach variable is a column; each column is a variable.\nEach observation is a row; each row is an observation.\nEach value is a cell; each cell is a single value.\n\nIf you examine the output above you will see this is true for the clean data: there are three columns, and each column is a variable: status, state, and percent. Each row is an observation, telling us the per cent for every state and status combination. Finally, each cell is a single value‚Äîthere are no merged cells.\nNone of these rules of tidy datasets hold for the original .xlsx file!\nR for Data Science (2nd Edition)\n\n\n\n\nHow to complete this exercise\nWhile the first data building exercises was fully guided, here you are challenged to start coding by yourself. Many of the steps are similar to the previous exercise so refer back to the step-by-step guide from Exercise 1 to help you on your way.\nSome hints are provided if you do get stuck. They are hover-able links that look like this: ‚ò† Hint¬†1 (try hovering your cursor to get a hint!).\n\n\n\n\n\nThere once was a coder who‚Äôd try, To solve R code with a watchful eye. But hints were their game, (‚ÄúOh, learning‚Äôs so lame!‚Äù) ‚ÄúWhy think when the answers comply?‚Äù\n\n\n\n‚ò† Hint¬†1\n\n\n\n\n\n\n\n\n Back to top",
    "crumbs": [
      "Home",
      "Exercises",
      "Day 1. Data cleaning",
      "Exercise 2 (Advanced)",
      "Getting started"
    ]
  },
  {
    "objectID": "exercises/exercise3-4.html",
    "href": "exercises/exercise3-4.html",
    "title": "Part 3. Adding highlight colours in the title",
    "section": "",
    "text": "1 Overview\nIn this section we will use techniques of data storytelling to help communicate the main message from the chart. First, we will highlight the key words Excellent and Good in the title, using a bold font to help them stand out and corresponding colours to help match the key words to the chart. We will also use text hierarchy to adjust the font size and weight of the subtitle relative to the title, more clearly distinguishing the different types of information for the viewer.\n\n\n2 Bold font for key words in the title\nNormally, we would use theme elements like element_text() to format titles, axis labels, and captions. However, these functions target the whole text string that comprises the title, axis label etc. In order to target specific words within the title we will use the theme element element_markdown() from the ggtext package.\nTo make this work we work we need to specify plot.title = element_text() in our call to theme(). Having done this, we can now use simple Markdown and HTML in our title; for example to make a word bold we can use the Markdown convention of wrapping it in two asterisks like **this**.\n\n\nCode\n# Add this to your loaded libraries\nlibrary(ggtext)\n\n# Bold font in title\nggplot(\n  data=df1Plot,\n  aes(x = percent, \n      y = fct_reorder(state, totalHealthy), \n      fill = status,\n      color = status,\n      label = paste0(format(percent, nsmall=1), '%'))) + \n  geom_col(position = position_stack(reverse = TRUE),\n           color = \"white\") +\n  geom_text(\n    position = position_stack(reverse = TRUE),\n    size = 8/.pt, \n    hjust = 1.1) +\n  scale_fill_manual(name = NULL, values = barCols) +\n  scale_colour_manual(name = NULL, values = label_text_colors) +\n  scale_y_discrete(NULL) +\n  scale_x_continuous(NULL) +\n  labs(\n    title = 'Victorians most likely to rate their health as **Excellent** or **Very Good**',\n    subtitle = 'Self-assessed health status by states and territories',\n    caption = 'Source: National Health Survey, 2022') +\n  theme(\n    plot.title.position = 'plot',\n    plot.title = element_markdown(),\n    panel.background = element_blank(),\n    axis.ticks.y = element_blank(),\n    legend.position = \"none\"\n  )\n\n\n\n\n\n\n\n\n\n\n\n3 Colour in key words in the title\nTo colour in the words we have to use some basic HTML and CSS. In particular we will will wrap the key words in the &lt;span&gt;&lt;/span&gt; HTML tag and use the style attribute to change the colour.\n\n\nDon‚Äôt worry if this is new to you, you can copy the code provided for now, and apply the same patterns elsewhere. HTML and CSS are core web technologies so it is worth learning the basics of these if you are going to be doing doing a lot of visualisation in R, especially if you are working with tools like shiny or quarto. A little knowledge in this area will really help elevate your outputs! Here is a nice summary from the wonderful Albert Rapp.\nThe colours are set to #1A9641 and #A6D96A‚Äô which are the last two colors from our colour palette barCols. To confirm this you try entering barCols in the console.\n\nbarCols\n\n[1] \"#D7191C\" \"#FDAE61\" \"#FFFFBF\" \"#A6D96A\" \"#1A9641\"\n\n\n\n\nCode\n# Add this to your loaded libraries\nlibrary(ggtext)\n\n# Bold font in title\nggplot(\n  data=df1Plot,\n  aes(x = percent, \n      y = fct_reorder(state, totalHealthy), \n      fill = status,\n      color = status,\n      label = paste0(format(percent, nsmall=1), '%'))) + \n  geom_col(position = position_stack(reverse = TRUE),\n           color = \"white\") +\n  geom_text(\n    position = position_stack(reverse = TRUE),\n    size = 8/.pt, \n    hjust = 1.1) +\n  scale_fill_manual(name = NULL, values = barCols) +\n  scale_colour_manual(name = NULL, values = label_text_colors) +\n  scale_y_discrete(NULL) +\n  scale_x_continuous(NULL) +\n  labs(\n    title = 'Victorians most likely to rate their health as &lt;span style=\"color: #1A9641;\"&gt;**Excellent**&lt;/span&gt; or &lt;span style=\"color: #A6D96A;\"&gt;**Very Good**&lt;/span&gt;',\n    subtitle = 'Self-assessed health status by states and territories',\n    caption = 'Source: National Health Survey, 2022') +\n  theme(\n    plot.title.position = 'plot',\n    plot.title = element_markdown(),\n    panel.background = element_blank(),\n    axis.ticks.y = element_blank(),\n    legend.position = \"none\"\n  )\n\n\n\n\n\n\n\n\n\n\n\n4 Adjust text hierarchy\nTo help distinguish the title, subtitle and caption we will make the following changes:\n\nPut the subtitle in a bold font but with a medium grey colour.\nPut the caption in a smaller font and light grey colour.\n\nThis can be done by setting the size, color, and face arguments in element_text().\n\n\nNote that the when we set element_text(size=14) the size argument is defined in points, so we don‚Äôt have to divide by .pts lie we previously did when setting the size of the text labels in geom_text()\n\n\nCode\n# Adjust text hierarchy\nggplot(\n  data=df1Plot,\n  aes(x = percent, \n      y = fct_reorder(state, totalHealthy), \n      fill = status,\n      color = status,\n      label = paste0(format(percent, nsmall=1), '%'))) + \n  geom_col(position = position_stack(reverse = TRUE),\n           color = \"white\") +\n  geom_text(\n    position = position_stack(reverse = TRUE),\n    size = 8/.pt, \n    hjust = 1.1) +\n  scale_fill_manual(name = NULL, values = barCols) +\n  scale_colour_manual(name = NULL, values = label_text_colors) +\n  scale_y_discrete(NULL) +\n  scale_x_continuous(NULL) +\n  labs(\n    title = 'Victorians most likely to rate their health as &lt;span style=\"color: #1A9641;\"&gt;**Excellent**&lt;/span&gt; or &lt;span style=\"color: #A6D96A;\"&gt;**Very Good**&lt;/span&gt;',\n    subtitle = 'Self-assessed health status by states and territories',\n    caption = 'Source: National Health Survey, 2022') +\n  theme(\n    plot.title.position = 'plot',\n    plot.title = element_markdown(size=14),\n    plot.subtitle = element_text(size=10, color = 'grey30', face = 'bold'),\n    plot.caption = element_text(size=8, color = 'grey60'),\n    panel.background = element_blank(),\n    axis.ticks.y = element_blank(),\n    legend.position = \"none\"\n  )\n\n\n\n\n\n\n\n\n\n\n\n\n\n Back to top",
    "crumbs": [
      "Home",
      "Exercises",
      "Day 2. Visualisation",
      "Exercise 3 (Beginner)",
      "Step-by-step guide",
      "Part 3. Adding highlight colours in the title"
    ]
  },
  {
    "objectID": "exercises/exercise3-1.html",
    "href": "exercises/exercise3-1.html",
    "title": "Getting started",
    "section": "",
    "text": "Aims\nIn this exercise you will use ggplot2 and other tools to transform your tidy data frame to an attractive chart. You will geoms as the basic building blocks, Essentially, we will use code to go‚Ä¶\n\n\n\n\n\n\n\nFrom this tidy dataframe‚Ä¶\n\n\nTo this nice chart!\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nHow to complete this exercise\nThis first data visualisation exercise is fully guided‚Äîjust follow the steps and copy-paste the code snippets into your own code file to build up the visualisation code.\nNote that many of the steps are incremental, and involve editing the previous code. For example, in one step you will use this code to plot a simple chart.\n\n\nCode\nggplot(\n  data=df1Clean,\n  aes(x = percent, \n      y = state, \n      fill=status)) + \n  geom_col()\n\n\nIn the next step, you need to add a new library and update the y mapping in aes(). The lines that change are highlighted, as below.\n\n\nCode\nlibrary(forcats)\n\nggplot(\n  data=df1Plot,\n  aes(x = percent, \n      y = fct_reorder(state, totalHealthy), \n      fill=status)) + \n  geom_col()\n\n\nYou should add these new lines in your code to see how the chart is incrementally improved. You could also copy over the whole chunk replacing the previous one in your code, but this is less conducive to learning.\nNotice the  Code button allows you to expand and collapse the code snippets. These are usually not expanded by default, especially for large code sections, so you need to click the button to see the code.\n\n\n\n\n Back to top",
    "crumbs": [
      "Home",
      "Exercises",
      "Day 2. Visualisation",
      "Exercise 3 (Beginner)",
      "Getting started"
    ]
  },
  {
    "objectID": "exercises/github.html",
    "href": "exercises/github.html",
    "title": "Getting started with git and GitHub",
    "section": "",
    "text": "In this exercise you will:",
    "crumbs": [
      "Home",
      "Exercises",
      "Day 1. GitHub"
    ]
  },
  {
    "objectID": "exercises/github.html#fork-the-repo",
    "href": "exercises/github.html#fork-the-repo",
    "title": "Getting started with git and GitHub",
    "section": "1.1 Fork the repo",
    "text": "1.1 Fork the repo\n\nClick here and follow the instructions to create a personal fork of the workshop materials repo on Github.\nYou should see a message like the one below, except your repo will be tagged with your GitHub username https://github.com/data-viz-workshop/materials-&lt;username&gt;\n\n\n\nThis message indicates you‚Äôve successfully forked the Materials repo\n\n\nOpen this link on a browser and you will be taken to the repo on GitHub. There are a lot of files and folders here, the main files you will use are in the exercises and solutions folders.",
    "crumbs": [
      "Home",
      "Exercises",
      "Day 1. GitHub"
    ]
  },
  {
    "objectID": "exercises/github.html#copy-the-repo-url",
    "href": "exercises/github.html#copy-the-repo-url",
    "title": "Getting started with git and GitHub",
    "section": "1.2 Copy the repo url",
    "text": "1.2 Copy the repo url\n\nClick on the  Code button and copy-paste the HTTPS url to your clipboard.",
    "crumbs": [
      "Home",
      "Exercises",
      "Day 1. GitHub"
    ]
  },
  {
    "objectID": "exercises/github.html#use-the-repo-url-to-create-a-new-project-in-rstudio",
    "href": "exercises/github.html#use-the-repo-url-to-create-a-new-project-in-rstudio",
    "title": "Getting started with git and GitHub",
    "section": "1.3 Use the repo url to create a new project in RStudio",
    "text": "1.3 Use the repo url to create a new project in RStudio\n\nIn RStudio, create a new project by clicking in the top-right hand corner and selecting New Project‚Ä¶\n\nSelect Version Control then Git.\n\n\n\n\n\n\n\n\n\n\nChoose Version Control\n\n\n\n\n\n\n\nThen choose Git\n\n\n\n\n\n\nPaste your repo url in the Repository URL field.\n\nThe Project directory name will be the name of the folder on your laptop so choose something sensible, e.g.¬†Materials.\nFinally, select the field Create project as subdirectory of. This is where the Materials folder will be stored on your laptop. If you move the folder later it will break the link with GitHub, that can be fixed but it is easier to just choose somewhere sensible now.\n\n\n\n\n\n\n\n\n\nCheckpoint\n\n\n\nIf you have successfully completed this step you should see the name of your project in RStudio",
    "crumbs": [
      "Home",
      "Exercises",
      "Day 1. GitHub"
    ]
  },
  {
    "objectID": "exercises/github.html#open-the-practice-file",
    "href": "exercises/github.html#open-the-practice-file",
    "title": "Getting started with git and GitHub",
    "section": "2.1 Open the practice file",
    "text": "2.1 Open the practice file\nUsing the RStudio Files Pane, navigate to the folder exercises/1-code and open the file 0-practice-git-workflow.txt\n\n\n\nNavigate to exercises/1-code/0-practice-git-workflow.txt and open the file\n\n\nThe file should look like this. We are going to use this template to practice the git workflow.\n\n\n\n0-practice-git-workflow.txt\n\n# My favourite snack\n\n\n# Ingredients\n\n\n# Instructions",
    "crumbs": [
      "Home",
      "Exercises",
      "Day 1. GitHub"
    ]
  },
  {
    "objectID": "exercises/github.html#edit-the-file",
    "href": "exercises/github.html#edit-the-file",
    "title": "Getting started with git and GitHub",
    "section": "2.2 Edit the file",
    "text": "2.2 Edit the file\n\nWrite in the name of your snack in the appropriate section.\nThe example is showing Gambas Pil Pil but you should choose your favourite!\nDon‚Äôt worry about Ingredients or Instructions for now\nMake sure to save the file when you are done.\n\n\n\n\n‚ÄòPil pil‚Äô is a word used in Spanish and Basque cuisines that describes a sauce made with garlic and chilli infused in hot olive oil. Some say ‚Äòpil pil‚Äô is the sound of popping garlic as it cooks in the hot oil.\nflawlessfood.co.uk/gambas-pil-pil/\n\n\n\n0-practice-git-workflow.txt\n\n# My favourite snack\nGambas Pil Pil (Garlic and Chilli Prawns)\n\n# Ingredients\n\n\n# Instructions",
    "crumbs": [
      "Home",
      "Exercises",
      "Day 1. GitHub"
    ]
  },
  {
    "objectID": "exercises/github.html#git-add-the-file",
    "href": "exercises/github.html#git-add-the-file",
    "title": "Getting started with git and GitHub",
    "section": "2.3 git add the file",
    "text": "2.3 git add the file\nIn the RStudio Git Pane, tick the box next to the 0-practice-git-workflow.txt. This adds your edited file to the staging area.\n\n\n\nClick the box next to file to add the file to the staging area",
    "crumbs": [
      "Home",
      "Exercises",
      "Day 1. GitHub"
    ]
  },
  {
    "objectID": "exercises/github.html#git-commit-the-file",
    "href": "exercises/github.html#git-commit-the-file",
    "title": "Getting started with git and GitHub",
    "section": "2.4 git commit the file",
    "text": "2.4 git commit the file\n\nClick on the Commit button to commit the file\nThis will launch a dialogue box\nAdd a commit message\nClick commit\n\n\n\n\nAdd a commit messge then click commit",
    "crumbs": [
      "Home",
      "Exercises",
      "Day 1. GitHub"
    ]
  },
  {
    "objectID": "exercises/github.html#git-push-the-file",
    "href": "exercises/github.html#git-push-the-file",
    "title": "Getting started with git and GitHub",
    "section": "2.5 git push the file",
    "text": "2.5 git push the file\n\nClick on the Push button to push the file\nIf it runs successfully you should get a dialogue box that looks something like this (which you can then close).\n\n\n\n\nA successful push to the remote repo\n\n\n\nPay attention to the messages that pop up here: if something goes wrong you may see an error\nIf you see the message ‚ÄúEverything up-to-date‚Äù make sure you fully completed the commit step by clicking Commit after adding your commit message in the previous box\n\n\n\n\n\n\n\n\n\nCheckpoint\n\n\n\nIf this has all worked smoothly you should see your recent commit message when you view your repo on GitHub\n\n\n\nYour changes will be in the exercises folder",
    "crumbs": [
      "Home",
      "Exercises",
      "Day 1. GitHub"
    ]
  },
  {
    "objectID": "exercises/github.html#add-your-ingredients",
    "href": "exercises/github.html#add-your-ingredients",
    "title": "Getting started with git and GitHub",
    "section": "2.6 Add your ingredients",
    "text": "2.6 Add your ingredients\n\n\n\n0-practice-git-workflow.txt\n\n# My favourite snack\nGambas Pil Pil (Garlic and Chilli Prawns)\n\n# Ingredients\n- Prawns \n- Garlic\n- Chilli\n- Oil\n- Bread\n\n# Instructions\n\n\n\nEdit the file to include the ingredients for your snack\nSave the file\nRepeat the steps above to git add, commit and push the file to GitHub\nConfirm you can see your changes on GitHub\n\n\n\n\nConfirm you can see your changes on GitHub",
    "crumbs": [
      "Home",
      "Exercises",
      "Day 1. GitHub"
    ]
  },
  {
    "objectID": "exercises/github.html#add-your-instructions",
    "href": "exercises/github.html#add-your-instructions",
    "title": "Getting started with git and GitHub",
    "section": "2.7 Add your instructions",
    "text": "2.7 Add your instructions\n\n\n\n0-practice-git-workflow.txt\n\n# My favourite snack\nGambas Pil Pil (Garlic and Chilli Prawns)\n\n# Ingredients\n- Prawns \n- Garlic\n- Chilli\n- Oil\n- Parsley\n- Bread\n\n# Instructions\n\n- Heat the oil with the garlic and chilli\n- Add the prawns\n- Garnish with parsley\n- Serve with bread\n\n\n\nEdit the file to include the instructions to prepare your snack\nSave the file\nRepeat the steps above to git add, commit and push the file to GitHub\nConfirm you can see your changes on GitHub\n\n\n\n\nConfirm you can see your changes on GitHub\n\n\n\n\nMade it this far? Nailed it!\n\n\n\nvia GIPHY",
    "crumbs": [
      "Home",
      "Exercises",
      "Day 1. GitHub"
    ]
  },
  {
    "objectID": "exercises/exercise1-1.html",
    "href": "exercises/exercise1-1.html",
    "title": "Getting started",
    "section": "",
    "text": "The End Goal\nLet‚Äôs start with the goal in mind! Here it is‚Äîa 100% stacked bar chart showing the breakdown of self-rated health status for 8 states and territories.\n\nThe simple chart format is enhanced using techniques covered in this workshop.\n\nOrdering The states and territories on the y-axis are ordered from top to bottom by the proportion of respondents describing their health status as Very good or Excellent.\nColour The chart uses a familiar traffic-light colour scheme, to distinguish between Poor and Excellent self-assessed health.\nText hierarchy The main chart title is an informative title highlighting the key message. A descriptive subtitle explains in more detail what is plotted in the chart while the data source is provided in the footnote.\nAnnotation Text annotations indicate the percentage response for each category. Note that the colour for these labels has been carefully chosen to contrast against the background colour and the labels have been suppressed for the ‚ÄòPoor‚Äô category, to avoid overflow.\nStory telling As well as having an informative chart title, the keywords Excellent and Very Good are emphasised with bold font and appropriate colours to help connect the title to the data and reinforce the message.\n\n\n\nThe data\nThe data for this plot come from the National Health Survey (NHS) 2022, a face-to-face interview survey conducted by the Australian Bureau of Statistics (ABS) and designed to collect information on health behaviours, conditions prevalence, and risk factors in Australia. You can read more about the survey on the ABS website here.\nThese data are openly available for download in .xlsx format from the ABS website and a copy is also included in the workshop repo in the file national-health-survey-2022-table-2.xlsx.\n\n\nAims\nIn this exercise you will use dplyr and other tools to read-in and clean the self-assessed health data from the National Health Survey. The raw data is the .xlsx file downloaded from the ABS data. The final output will be a tidy data file in .csv and .Rda format. Essentially, we will use code to go‚Ä¶\n\n\n\n\n\n\n\nFrom this messy excel sheet\n\n\nTo this tidy dataframe!\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nTidy data\n\n\n\nRemember, in a tidy dataset:\n\nEach variable is a column; each column is a variable.\nEach observation is a row; each row is an observation.\nEach value is a cell; each cell is a single value.\n\nIf you examine the output above you will see this is true for the clean data: there are three columns, and each column is a variable: status, state, and percent. Each row is an observation, telling us the per cent for every state and status combination. Finally, each cell is a single value‚Äîthere are no merged cells.\nNone of these rules of tidy datasets hold for the original .xlsx file!\nR for Data Science (2nd Edition)\n\n\n\n\nHow to complete this exercise\nThis first exercise is fully guided‚Äîjust follow the data cleaning steps and copy-paste the code snippets into your own code file to build up a working data cleaning pipeline.\nNote that some steps are incremental, for example Step 6 provides code to filter data.\n\n# Filter to these rows\ndf1Clean &lt;- df1Raw |&gt;\n  filter(X %in% healthStatus)\n\nIn the next step, Step 7, you are given code to select certain variables.\n\n# Append this line to the previous code using |&gt;\nselect(c(X, ends_with(\".1\"), -'Australia.1'))\n\nBut note the comment:\n\nAppend this line to the previous code using |&gt;\n\nThis means that you should append the code in Step 7 to the previous code in Step 6 using the |&gt; operator to connect the two. So after you complete Step 7 the code in your file will look like this:\n\n# Filter to these rows\ndf1Clean &lt;- df1Raw |&gt;\n  filter(X %in% healthStatus) |&gt; \n  select(c(X, ends_with(\".1\"), -'Australia.1'))\n\n\n\n\n\n Back to top",
    "crumbs": [
      "Home",
      "Exercises",
      "Day 1. Data cleaning",
      "Exercise 1 (Beginner)",
      "Getting started"
    ]
  },
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "Schedule",
    "section": "",
    "text": "Time\nActivity\n\n\n\n\n\nDay 1\n\n\n9:00 - 9:40\nWelcome, housekeeping and orientation to RStudio\n\n\n\n9:40 - 10:20\nReproducible research with git and GitHub\nüîó\n\n\n10:20 - 10:40\nMorning tea\n\n\n\n10:40 - 11:00\nMini-exercise: Working with git\nüîó\n\n\n11:00 - 12:00\nData preparation with dplyr\nüîó\n\n\n12:00 - 12:20\nMini-exercise: Working with dplyr\n\n\n\n12:20 - 13:00\nLunch\n\n\n\n13:00 - 15:00\nHands-on workshop exercises\nüîó\n\n\nDay 2\n\n\n9:00 - 9:40\nData visualisation with ggplot2\nüîó\n\n\n9:40 - 10:20\nStorytelling with data\nüîó\n\n\n10:20 - 10:40\nMorning tea\n\n\n\n10:40 - 11:00\nMini-exercise: Working with ggplot2\n\n\n\n11:00 - 12:00\nLiterate programming with rmarkdown\nüîó\n\n\n12:00 - 12:20\nMini-exercise: Working with rmarkdown\n\n\n\n12:20 - 13:00\nLunch\n\n\n\n13:00 - 15:00\nHands-on workshop exercises\nüîó\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nDay 1 Data Cleaning\n\n\nIllustrations from the Openscapes blog Tidy Data for reproducibility, efficiency, and collaboration by Julia Lowndes and Allison Horst.\n\n\nDay 2 Data Visualisation\n\n\nArtwork by @allison_horst\n\n Back to top",
    "crumbs": [
      "Home",
      "Housekeeping",
      "Schedule"
    ]
  },
  {
    "objectID": "home/poll.html",
    "href": "home/poll.html",
    "title": "Introduce yourself",
    "section": "",
    "text": "Back to top",
    "crumbs": [
      "Home",
      "Housekeeping",
      "Introductions"
    ]
  },
  {
    "objectID": "home/prerequisites.html",
    "href": "home/prerequisites.html",
    "title": "Data Viz with R",
    "section": "",
    "text": "Artwork by @allison_horst\n\nThank you for enrolling in the    Reproducible Data Visualisation with R workshop   \nTo get the most out of the workshop, please run through the checklist below and make sure you have all the necessary software installed in advance. If you are already working with git in RStudio you may be ready to go already. If you are just getting started, keep in mind that these configuration steps can be half the battle. Don‚Äôt worry if you get stuck, we are here to help.\n\n\n\n\n\n\n\n\nA note on the key reference\n\n\n\nConfiguring Git, GitHub and RStudio to work together is half the battle when it comes to using Git in RStudio.\nLuckily there is an excellent online reference for this: Happy Git and GitHub for the useR by Jennifer Bryan. The chapters linked below refer to key sections in this book.\nWe won‚Äôt have time to configure everybody‚Äôs laptop at the workshop so please try to work through these steps in advance! The best strategy is to carefully read the recommended sections in order and follow the directions diligently. But there is a lot of detail to work through so don‚Äôt worry if you get stuck‚Äîreach out for help!\n\n\n\n\nChecklist:\nCan you tick every item below?\n\nA laptop (and a charger!) \nAt least a basic working knowledge of R and RStudio. If you are a beginner or want a refresh, check out the one-hour webinar A gengle introduction to tidy statistics in R) \nA free GitHub user account. See Ch 4. Register a GitHub account \nA recent version of R (at least v4.3.0) and RStudio (at least a 2024 version) installed on your laptop. See Ch 5. Install or upgrade R and RStudio \nGit installed on your laptop. See Ch 6. Install Git \nSet up a Personal Access Token (PAT) to allow RStudio to communicate with GitHub. See Ch 9. Personal access token for HTTPS and in particular Section 9.1 TL;DR \n\n\n\n\n\n\n\n\n\nSetting up a Personal Access Token\n\n\n\nFollow Section 9.1 TL;DR from Happy Git and GitHub for the useR to set up your Personal Access Token. The easiest way to do this is to run the suggested commands from R. To run these commands you may need to install the usethis and gitcreds packages if they are not installed already. If you get an error message indicating that you don‚Äôt have the packages installed you can install them by entering the commands below at the console.\n\ninstall.packages(\"usethis\")\n\n\ninstall.packages(\"gitcreds\")\n\nAs per Section 9.1 TL;DR, the following R commands can be used to set up a Personal Access Token from RStudio.\n\nusethis::create_github_token()\n\n\nEntering a note to describe the tokens use case is useful for identifying and managing tokens. Choose a note that describes your use case, e.g.¬†RStudio projects.\nSet the expiration to 30 days. You can always extend this.\nThe GitHub PAT scope is like a set of permissions that define what actions the token can perform on your behalf on GitHub. You can use the default scopes of workflow, gist, and user.\n\n\ngitcreds::gitcreds_set()\n\n\n\n\n\n\n\n Back to top",
    "crumbs": [
      "Home",
      "Housekeeping",
      "Prerequisites"
    ]
  },
  {
    "objectID": "home/opening-remarks.html#section-2",
    "href": "home/opening-remarks.html#section-2",
    "title": "Data Viz with R",
    "section": "",
    "text": "Artwork by @allison_horst"
  },
  {
    "objectID": "home/opening-remarks.html#the-pareto-principle",
    "href": "home/opening-remarks.html#the-pareto-principle",
    "title": "Data Viz with R",
    "section": "The Pareto Principle",
    "text": "The Pareto Principle\nAKA The 80/20 rule\n\n\n80% of Italy‚Äôs land was owned by 20% of the population  ‚ÄîVilfredo Pareto 1848‚Äì1923"
  },
  {
    "objectID": "home/opening-remarks.html#the-pareto-principle-1",
    "href": "home/opening-remarks.html#the-pareto-principle-1",
    "title": "Data Viz with R",
    "section": "The Pareto Principle",
    "text": "The Pareto Principle\nAKA The 80/20 rule\n\n20% of your clothes are worn 80% of the time, while the other 80% just hang there judging you"
  },
  {
    "objectID": "home/opening-remarks.html#the-pareto-principle-2",
    "href": "home/opening-remarks.html#the-pareto-principle-2",
    "title": "Data Viz with R",
    "section": "The Pareto Principle",
    "text": "The Pareto Principle\nAKA The 80/20 rule\n\n80% of parenting is just repeating 20% of the phrases: Don‚Äôt touch that, Put that down, and Because I said so"
  },
  {
    "objectID": "home/opening-remarks.html#the-pareto-principle-3",
    "href": "home/opening-remarks.html#the-pareto-principle-3",
    "title": "Data Viz with R",
    "section": "The Pareto Principle",
    "text": "The Pareto Principle\nThe 80/20 rule in Data Visualisation\n\n80% of the work is getting the data in the right shape"
  },
  {
    "objectID": "home/opening-remarks.html#day-1-the-rstudio-environment",
    "href": "home/opening-remarks.html#day-1-the-rstudio-environment",
    "title": "Data Viz with R",
    "section": "Day 1: The RStudio environment",
    "text": "Day 1: The RStudio environment\n\n\nArtwork by @allison_horst"
  },
  {
    "objectID": "home/opening-remarks.html#day-1-reproducible-research-with-git-and-github",
    "href": "home/opening-remarks.html#day-1-reproducible-research-with-git-and-github",
    "title": "Data Viz with R",
    "section": "Day 1: Reproducible research with Git and GitHub",
    "text": "Day 1: Reproducible research with Git and GitHub\n\n\nArtwork by @allison_horst"
  },
  {
    "objectID": "home/opening-remarks.html#day-1-data-preparation-with-dplyr",
    "href": "home/opening-remarks.html#day-1-data-preparation-with-dplyr",
    "title": "Data Viz with R",
    "section": "Day 1: Data preparation with dplyr",
    "text": "Day 1: Data preparation with dplyr\n\n\nIllustrations from the Openscapes blog Tidy Data for reproducibility, efficiency, and collaboration by Julia Lowndes and Allison Horst."
  },
  {
    "objectID": "home/opening-remarks.html#day-2-data-visualisation-with-ggplot2",
    "href": "home/opening-remarks.html#day-2-data-visualisation-with-ggplot2",
    "title": "Data Viz with R",
    "section": "Day 2: Data visualisation with ggplot2",
    "text": "Day 2: Data visualisation with ggplot2\n\n\nArtwork by @allison_horst"
  },
  {
    "objectID": "home/opening-remarks.html#day-2-story-telling-with-data",
    "href": "home/opening-remarks.html#day-2-story-telling-with-data",
    "title": "Data Viz with R",
    "section": "Day 2: Story telling with data",
    "text": "Day 2: Story telling with data"
  },
  {
    "objectID": "home/opening-remarks.html#day-2-literate-programming-with-rmarkdown",
    "href": "home/opening-remarks.html#day-2-literate-programming-with-rmarkdown",
    "title": "Data Viz with R",
    "section": "Day 2: Literate programming with rmarkdown",
    "text": "Day 2: Literate programming with rmarkdown\n\n\nArtwork by @allison_horst"
  },
  {
    "objectID": "home/opening-remarks.html#end-goal",
    "href": "home/opening-remarks.html#end-goal",
    "title": "Data Viz with R",
    "section": "End goal",
    "text": "End goal\n\nFigure 1"
  },
  {
    "objectID": "home/opening-remarks.html#end-goal-1",
    "href": "home/opening-remarks.html#end-goal-1",
    "title": "Data Viz with R",
    "section": "End goal",
    "text": "End goal\n\nFigure 2"
  },
  {
    "objectID": "home/opening-remarks.html#how-do-we-get-there",
    "href": "home/opening-remarks.html#how-do-we-get-there",
    "title": "Data Viz with R",
    "section": "How do we get there?",
    "text": "How do we get there?\n\n\n\n\n\n\n\nThis took 4 lines of code\n\n\n\n\n\n\n\nHow many lines of code did this take?"
  },
  {
    "objectID": "home/introduction.html",
    "href": "home/introduction.html",
    "title": "Data Viz with R",
    "section": "",
    "text": "Back to top",
    "crumbs": [
      "Home",
      "Housekeeping",
      "Overview"
    ]
  },
  {
    "objectID": "home/orientation.html",
    "href": "home/orientation.html",
    "title": "Orientation to RStudio",
    "section": "",
    "text": "We‚Äôre going to spend two days working on R code so let‚Äôs take a moment to open up RStudio to orientate ourselves.\n\n\n\n\nHere is a snapshot of the RStudio environment.\n\n\n\n\nThere‚Äôs a lot going on!\n\n\n\n\nLet‚Äôs break it down.\n\n\n\n\nThis is an R script file (.R extension). Here you can write R code to clean, analyse, and visualise data\n\n\n\n\nNotice that this file is saved with a proper file name analysis.R so we can open and close the file and come back to the code as needed.\n\n\n\n\nThis area has several tabs. The Environment tab plays a key role in managing and visualizing the objects that exist in the current R session.\n\n\n\n\nVarious types of objects can exist in your environment, for example vectors, dataframes and lists.\n\n\n\n\nCurrently we can see the cars dataset and the meanSpeed value stored in the environment.\n\n\n\n\nNotice the Git tab is also in this area. We‚Äôll use that later.\n\n\n\n\nThere are several important tabs in the bottom right-hand corner\n\n\n\n\nThe Files tab shows us all the file in our project. Spot analsis.R!\n\n\n\n\nFrom here we can open files or navigate to different folders.\n\n\n\n\nOther important tabs in this area includes the Plots tab, where are plots will appear, and the Packages tab that has a list of all the installed packages.\n\n\n\n\nHere we have the console.\n\n\n\n\nThe console allows you to run R commands interactively. You can type a command directly into the console and press Enter to execute it and view the results straight away.\n\n\n\n\nThe console keeps track of previously executed commands. You can use the  up and  down arrow keys to scroll through past commands, making it easy to re-run commands or modify and execute them again.\n\n\n\n\nWorking in the console is convenient for quick, interactive commands, but it doesn‚Äôt save a persistent record of your entered commands so important code should always be saved in a script.\n\n\n\n\nFinally, note this icon in the top right-hand corner. This tells us we are working in an R Project named cars-study.",
    "crumbs": [
      "Home",
      "Housekeeping",
      "Orientation"
    ]
  },
  {
    "objectID": "exercises/exercise3-2.html",
    "href": "exercises/exercise3-2.html",
    "title": "Part 1. The base plot",
    "section": "",
    "text": "Figure¬†1: The goal for Exercise 3\n\n\n\n\n1 Set up your code file meta data\nAs before, start by setting up your code file meta information.\n\nIn RStudio, open the file exercsies/1-code/3-plot-self-assessed-health.R\nUpdate the details in the title box.\n\n\n\n\n2 Load libraries\nRemember to load all your libraries in one place at the top of the script all the libraries you need in a script in one place at the top of the file.\nStart with the libraries below. We‚Äôll need to load more libraries as we go so remember to add them to this section of code.\n\n## Load libraries\nlibrary(dplyr) \nlibrary(ggplot2)\n\n\n\n3 Load your data\nThe data might already be loaded into your R environment, but we should make this step an explicit part of the code.\n\n# Load cleaned data\nload('exercises/3-clean-data/vis1.Rda')\n\n\n\n\n4 Start plotting\nLooking back at Figure¬†1, we can quickly surmise the main aesthetic mappings in the chart:\n\nx is mapped to percent\ny is mapped to state\nfill is mapped to status\n\nThis is all we need to get a passable plot!\n\n\nCode\nggplot(\n  data=df1Clean,\n  aes(x = percent, y = state, fill=status)) + \n  geom_col()\n\n\n\n\n\n\n\n\n\nThis is a good start for just a few lines of code, but there are a lot of things to fix!\n\n\n\n5 Order the states from most healthy to least healthy\nThe final plot orders the states on the y-axis from most healthy to least healthy. In order to sort the states in this way, we need to create a new variable equal to the sum of the proportions in the categories Excellent and Very good. We can do this using some dplyr code.\n\n# Create variable indicating % very good or excellent health\ndf1Plot &lt;- df1Clean |&gt;\n  group_by(state) |&gt;\n  slice(4:5) |&gt;\n  summarise(totalHealthy = sum(percent)) |&gt;\n  left_join(df1Clean, by = 'state')\n\nThis basically creates the following summary table, and then merges it back to the original dataset, assigning the result to a new dataframe df1Plot.\n\n\n# A tibble: 8 √ó 2\n  state                        totalHealthy\n  &lt;fct&gt;                               &lt;dbl&gt;\n1 Australian Capital Territory         61.1\n2 New South Wales                      56.6\n3 Northern Territory                   55.5\n4 Queensland                           55.5\n5 South Australia                      55.9\n6 Tasmania                             53.1\n7 Victoria                             61.5\n8 Western Australia                    56.6\n\n\nNow that we have the right variable to sort on, we can use the fct_reorder() function from the forcats package to sort the states directly in the ggplot code. Don‚Äôt forget to add library(forcats) to your list of loaded libraries at the top of your script!\n\n\nCode\nlibrary(forcats)\n\nggplot(\n  data=df1Plot,\n  aes(x = percent, \n      y = fct_reorder(state, totalHealthy), \n  fill=status)) + \n  geom_col()\n\n\n\n\n\n\n\n\n\n\n\n\n6 Reverse the order of the health-assessment categories\nNotice that the health categories are currently ordered from Excellent to Poor. we‚Äôd like to reverse this so that Poor is on the left and Excellent is on the right. We can do this by setting reverse=TRUE in the position_stack() argument in geom_col().\n\n\nCode\nggplot(\n  data=df1Plot,\n  aes(x = percent, \n      y = fct_reorder(state, totalHealthy), \n      fill=status)) + \n  geom_col(position = position_stack(reverse = TRUE))\n\n\n\n\n\n\n\n\n\n\n\n\n7 Customise the colour scheme\nWe‚Äôve done a lot already! Next we will really improve the plot by updating the colour scheme. The default coloring is categorical and the colours don‚Äôt carry any meaning. The target plot uses a familiar traffic light colour scheme that also carries meaning (red generally has negative connotations and green generally has positive connotations, in the Anglosphere at least).\n\n\nThe psychological and cultural associations of colors varies across place and time. In 1700s Europe men wore pink as a sign of their wealth and power; today it is almost exclusively a colour associate with girls, so much so that Mattel‚Äîthe Corporation behind Barbie‚Äîhave trademark rights to Barbie Pink (Pantone 219C).Here we use green to connote a positive outcome but green is also associated with jealousy (‚Äúgreen with envy‚Äù), sickness ü§¢, and inexperience (‚Äúa greenhorn‚Äù). Meanwhile red is the colour of danger, but also of love ‚ù§Ô∏è and (in China) an auspicious colour associated with prosperity üßß.\nWhile we could define our colours manually, the RColorBrewer package provides several colour palettes for R. We will use the brewer.pal() function to access the diverging red-yellow-green (RdYlGn) palette below. Here are the colour hex codes:\n\n# Add the library call to the top of your script!\nlibrary(RColorBrewer)\n\nbrewer.pal(name='RdYlGn', n=5)\n\n[1] \"#D7191C\" \"#FDAE61\" \"#FFFFBF\" \"#A6D96A\" \"#1A9641\"\n\n\nWe can use the function display.brewer.pal to see the actual colours.\n\ndisplay.brewer.pal(name='RdYlGn', n=5)\n\n\n\n\n\n\n\n\nFinally, make sure to save the five colours in an R vector as below.\n\n# Custom bar colours\nbarCols &lt;- RColorBrewer::brewer.pal(5, 'RdYlGn')\n\nNow that we have our five colours stored as a vector we can map these to the health categories using scale_fill_manual(). The legend name doesn‚Äôt add much here so we can remove it entirely by setting name = NULL.\n\n\nCode\n# Customise colours\nggplot(\n  data=df1Plot,\n  aes(x = percent, \n      y = fct_reorder(state, totalHealthy), \n      fill=status)) + \n  geom_col(position = position_stack(reverse = TRUE)) +\n  scale_fill_manual(name = NULL,\n                    values = barCols)\n\n\n\n\n\n\n\n\n\nAmazing!!\n\n\n\n8 Get rid of the axis labels\nLooking back at Figure¬†1, notice that the axis labels are deleted entirely. I think that is safe here because the states and territories are obvious, and when we add titles it will be clear that the numbers are percentages.\nA simple way to do this is with the labs() function, but here I will use scale_x_ and scale_y_ functions. This is from habit‚Äîoften we need to customise aspects of the axes that can only be controlled via the scale_* functions.\n\n\nCode\nggplot(\n  data=df1Plot,\n  aes(x = percent, \n      y = fct_reorder(state, totalHealthy), \n      fill=status)) + \n  geom_col(position = position_stack(reverse = TRUE)) +\n  scale_fill_manual(name = NULL,\n                    values = barCols) +\n  scale_y_discrete(NULL) +\n  scale_x_continuous(NULL)\n\n\n\n\n\n\n\n\n\n\n\n9 Add a title, subtitle and caption\nAdd a title, subtitle and caption using the labs() function. The final figure colours in some of the words but we will come to that later.\n\n\nCode\nggplot(\n  data=df1Plot,\n  aes(x = percent, \n      y = fct_reorder(state, totalHealthy), \n      fill=status)) + \n  geom_col(position = position_stack(reverse = TRUE)) +\n  scale_fill_manual(name = NULL,\n                    values = barCols) +\n  scale_y_discrete(NULL) +\n  scale_x_continuous(NULL) +\n  labs(\n    title = 'Victorians most likely to rate their health as Excellent or Very Good',\n    subtitle = 'Self-assessed health status by states and territories',\n    caption = 'Source: National Health Survey, 2022')\n\n\n\n\n\n\n\n\n\n\n\n\n10 Shift the titles to the right\nNotice that the titles are aligned with the panel area by default, but these can often look better if they are shifted over to the right of the plot. That is easy to do by setting the plot.title.position = 'plot' argument in the theme() function.\n\n\nCode\n# Shift the titles to the right and remove the grey background box\nggplot(\n  data=df1Plot,\n  aes(x = percent, \n      y = fct_reorder(state, totalHealthy), \n      fill=status)) + \n  geom_col(position = position_stack(reverse = TRUE)) +\n  scale_fill_manual(name = NULL,\n                    values = barCols) +\n  scale_y_discrete(NULL) +\n  scale_x_continuous(NULL) +\n  labs(\n    title = 'Victorians most likely to rate their health as Excellent or Very Good',\n    subtitle = 'Self-assessed health status by states and territories',\n    caption = 'Source: National Health Survey, 2022') +\n  theme(\n    plot.title.position = 'plot'\n  )\n\n\n\n\n\n\n\n\n\n\n\n\n11 Remove the default grey panel background\nTo remove the grey panel background, add the option panel.background = element_blank() to the theme function.\n\n\nCode\n# Remove the grey background\nggplot(\n  data=df1Plot,\n  aes(x = percent, \n      y = fct_reorder(state, totalHealthy), \n      fill=status)) + \n  geom_col(position = position_stack(reverse = TRUE)) +\n  scale_fill_manual(name = NULL,\n                    values = barCols) +\n  scale_y_discrete(NULL) +\n  scale_x_continuous(NULL) +\n  labs(\n    title = 'Victorians most likely to rate their health as Excellent or Very Good',\n    subtitle = 'Self-assessed health status by states and territories',\n    caption = 'Source: National Health Survey, 2022') +\n  theme(\n    plot.title.position = 'plot',\n    panel.background = element_blank()\n  )\n\n\n\n\n\n\n\n\n\n\n\n\n12 Remove the y-axis ticks\nHaving removed the panel background we are left with unsightly y-axis ticks. We can pluck these out like unwanted nostril hairs by including the argument axis.ticks.y = element_blank() in the theme() function.\n\n\nCode\nggplot(\n  data=df1Plot,\n  aes(x = percent, \n      y = fct_reorder(state, totalHealthy), \n      fill=status)) + \n  geom_col(position = position_stack(reverse = TRUE)) +\n  scale_fill_manual(name = NULL,\n                    values = barCols) +\n  scale_y_discrete(NULL) +\n  scale_x_continuous(NULL) +\n  labs(\n    title = 'Victorians most likely to rate their health as Excellent or Very Good',\n    subtitle = 'Self-assessed health status by states and territories',\n    caption = 'Source: National Health Survey, 2022') +\n  theme(\n    plot.title.position = 'plot',\n    panel.background = element_blank(),\n    axis.ticks.y = element_blank()\n  )\n\n\n\n\n\n\n\n\n\nMuch better!\n\n\n13 Add white spacing betweeen the colours\nLooking back at Figure¬†1, notice that there is thin white line between the colours of the health status categories. The effect is subtle but pleasing. We can control this by setting colour = \"white\" in our call to geom_col().\n\n\nCode\n# White spacing between colours\nggplot(\n  data=df1Plot,\n  aes(x = percent, \n      y = fct_reorder(state, totalHealthy), \n      fill=status)) + \n  geom_col(position = position_stack(reverse = TRUE),\n           color = \"white\") +\n  scale_fill_manual(name = NULL,\n                    values = barCols) +\n  scale_y_discrete(NULL) +\n  scale_x_continuous(NULL) +\n  labs(\n    title = 'Victorians most likely to rate their health as Excellent or Very Good',\n    subtitle = 'Self-assessed health status by states and territories',\n    caption = 'Source: National Health Survey, 2022') +\n  theme(\n    plot.title.position = 'plot',\n    panel.background = element_blank(),\n    axis.ticks.y = element_blank()\n  )\n\n\n\n\n\n\n\n\n\nThis is looking pretty good! If it was Friday evening you could probably call it a day and leave it at that. But if you‚Äôre still full of vim, let‚Äôs see if we can text labels to our chart.\n\n\n\n\n\n\n\n\n\n\n\n\n\n Back to top",
    "crumbs": [
      "Home",
      "Exercises",
      "Day 2. Visualisation",
      "Exercise 3 (Beginner)",
      "Step-by-step guide",
      "Part 1. The base plot"
    ]
  },
  {
    "objectID": "exercises/overview.html",
    "href": "exercises/overview.html",
    "title": "Guided exercises",
    "section": "",
    "text": "Artwork by @allison_horst\n\nNow it‚Äôs your turn to really get hands-on with the data! Work through the guided exercises. If you get stuck, refer to the notes or to the examples in the lecture slides. If you can‚Äôt get unstuck just raise your hand and someone will be there to help!\n\n\n\n Back to top",
    "crumbs": [
      "Home",
      "Exercises",
      "Overview"
    ]
  },
  {
    "objectID": "exercises/exercise3-3.html",
    "href": "exercises/exercise3-3.html",
    "title": "Part 2. Adding text labels",
    "section": "",
    "text": "1 Overview\nWe have a lot done but more to do. In this section we will work on adding text labels to the stacked column chart\n\n\n\n\n\n\n\n\n\n\n\n(a) Where we are up to\n\n\n\n\n\n\n\n\n\n\n\n(b) The final goal\n\n\n\n\n\n\n\nFigure¬†1\n\n\n\nIf you have successfully navigated the previous section, your code should look a bit like the code below:\n\n\nCode\n#\n###############################################################\n# Project:  National Health Survey 2022 Analysis\n# Purpose:  Plot self-assessed health data by state\n# Inputs:   exercises/3-clean-data/vis1.Rda\n# Outputs:  exercises/4-outputs/yyyy-mm-dd-self-assessed-health.png\n# Author:   Mark Hanly\n###############################################################\n\n###############\n# Preparation #\n###############\n\n# Load libraries\nlibrary(dplyr)\nlibrary(ggplot2)\nlibrary(forcats)\nlibrary(RColorBrewer)\n\n# Load cleaned data\nload('exercises/3-clean-data/vis1.Rda')\n\n# Create variable indicating % very good or excellent health\ndf1Plot &lt;- df1Clean |&gt;\n  group_by(state) |&gt;\n  slice(4:5) |&gt;\n  summarise(totalHealthy = sum(percent)) |&gt;\n  left_join(df1Clean, by = 'state')\n\n# Custom bar colours\nbarCols &lt;- RColorBrewer::brewer.pal(5, 'RdYlGn')\n\n#####################\n# Plotting the data #\n#####################\n\nggplot(\n  data=df1Plot,\n  aes(x = percent, \n      y = fct_reorder(state, totalHealthy), \n      fill=status)) + \n  geom_col(position = position_stack(reverse = TRUE),\n           color = \"white\") +\n  scale_fill_manual(name = NULL,\n                    values = barCols) +\n  scale_y_discrete(NULL) +\n  scale_x_continuous(NULL) +\n  labs(\n    title = 'Victorians most likely to rate their health as Excellent or Very Good',\n    subtitle = 'Self-assessed health status by states and territories',\n    caption = 'Source: National Health Survey, 2022') +\n  theme(\n    plot.title.position = 'plot',\n    panel.background = element_blank(),\n    axis.ticks.y = element_blank()\n  )\n\n\nYou can copy-paste this code into your script if you want to start from this point in the exercise.\n\n\n\n2 Add text labels\nLet‚Äôs dive right in and add text labels using geom_text(). There are two things to be aware of as we do this:\n\ngeom_text() has a required aesthetic label which we have not specified so far. The label aesthetic maps a variable to the text label that appears on the chart; in our case that will be the variable percent. So we will add label = percent to the other aesthetic mappings in aes().\nIn the last section we set position = position_stack(reverse = TRUE) to reverse the order of the health categories in geom_col(). To make sure the labels match the categories we will have to do the same thing here for geom_text().\n\n\n\nCode\n# Add geom_text\nggplot(\n  data=df1Plot,\n  aes(x = percent, \n      y = fct_reorder(state, totalHealthy), \n      fill = status,\n      label = percent)) + \n  geom_col(position = position_stack(reverse = TRUE),\n           color = \"white\") +\n  geom_text(position = position_stack(reverse = TRUE)) +\n  scale_fill_manual(name = NULL,\n                    values = barCols) +\n  scale_y_discrete(NULL) +\n  scale_x_continuous(NULL) +\n  labs(\n    title = 'Victorians most likely to rate their health as Excellent or Very Good',\n    subtitle = 'Self-assessed health status by states and territories',\n    caption = 'Source: National Health Survey, 2022') +\n  theme(\n    plot.title.position = 'plot',\n    panel.background = element_blank(),\n    axis.ticks.y = element_blank()\n  )\n\n\n\n\n\n\n\n\n\n\n\n\n3 Format the text labels\nOkay, this is a start but also obviously gross. There are a few arguments we can quickly add to geom_text() to make things look better.\n\nsize = 8/.pt will reduce the font size to 8 points\nhjust = 1.1 will add some horizontal justification, shifting the labels towards the end of their bars\ncolor = grey30 will apply a lighter shade of grey\n\n\n\n.pt is an internal constant in R that allows us to convert millimeters (mm) to point size. In geom_text(), the size is defined in mm. Setting size = 8/.pt is a quick way of figuring how many mm we need to get a font size of 8 points (which is about the smallest font size that can be comfortably read). To test this you can enter 8/.pt at the console.\n\n\nCode\n# Tidy up the text labels\nggplot(\n  data=df1Plot,\n  aes(x = percent, \n      y = fct_reorder(state, totalHealthy), \n      fill = status,\n      label = percent)) + \n  geom_col(position = position_stack(reverse = TRUE),\n           color = \"white\") +\n  geom_text(\n    position = position_stack(reverse = TRUE),\n    size = 8/.pt, \n    hjust = 1.1,\n    color='grey30') +\nscale_fill_manual(name = NULL,\n                  values = barCols) +\n  scale_y_discrete(NULL) +\n  scale_x_continuous(NULL) +\n  labs(\n    title = 'Victorians most likely to rate their health as Excellent or Very Good',\n    subtitle = 'Self-assessed health status by states and territories',\n    caption = 'Source: National Health Survey, 2022') +\n  theme(\n    plot.title.position = 'plot',\n    panel.background = element_blank(),\n    axis.ticks.y = element_blank()\n  )\n\n\n\n\n\n\n\n\n\n\n\n\n4 Format the labels\nThis is a step in the right direction. Another improvement would be to nicely format the labels so that the number of decimal places is always the same, i.e.¬†26 should appear as 26.0. We can also add a % symbol so we get 26.0%.\nRather than change the underlying data, we can make both of these changes on the fly in the ggplot code by updating how the label aesthetic is defined. In particular, we will set label = paste0(format(percent, nsmall=1), '%').\n\n\nTo see what this is doing try breaking it into two steps and entering the following at the console:\n\n\nformat(26, nsmall=1)\n\n\npaste0(\"26.0\", \"%\")\n\n\n\n\nCode\n# Format the text labels\nggplot(\n  data=df1Plot,\n  aes(x = percent, \n      y = fct_reorder(state, totalHealthy), \n      fill = status,\n      label = paste0(format(percent, nsmall=1), '%'))) + \n  geom_col(position = position_stack(reverse = TRUE),\n           color = \"white\") +\n  geom_text(\n    position = position_stack(reverse = TRUE),\n    size = 8/.pt, \n    hjust = 1.1,\n    color='grey30') +\n  scale_fill_manual(name = NULL,\n                    values = barCols) +\n  scale_y_discrete(NULL) +\n  scale_x_continuous(NULL) +\n  labs(\n    title = 'Victorians most likely to rate their health as Excellent or Very Good',\n    subtitle = 'Self-assessed health status by states and territories',\n    caption = 'Source: National Health Survey, 2022') +\n  theme(\n    plot.title.position = 'plot',\n    panel.background = element_blank(),\n    axis.ticks.y = element_blank()\n  )\n\n\n\n\n\n\n\n\n\n\n\n\n5 Adjust the colours\nThis is better but there are still a few problems:\n\nThe grey colour of the text labels works quite nicely against the yellow background but not so good against the dark green background.\nThere isn‚Äôt really room for text labels for the Poor category.\n\nWe can tackle both of these issues by adjusting the label text colour for each health category. We will customise the text colours choosing ones that contrasts well against the background fill colors. For the Poor category, we will simply set the colour to be transparent.\nA convenient way to choose contrasting colours is to use the lighten() and darken() functions from the colorspace package. These functions take one or more R colours and lighten or darken them by a specified amount. For example, the following code returns #FF6363, a shade of red that is 20% lighter than the original.\n\nlibrary(colorspace)\n\nlighten(\"red\", 0.2)\n\n[1] \"#FF6363\"\n\n\n\n\n\n\n\n\nExpand To Learn More About lighten() and darken()\n\n\n\n\n\nWe can make colors progressively lighter using lighten():\n\n\nCode\n# 6 shades lighter\nlighter6 &lt;- lighten(\"forestgreen\", c(0, .2, .4, .6, .8, 1))\n\n# Visualise the results\nscales::show_col(lighter6)\n\n\n\n\n\n\n\n\n\nWe can make colors progressively darker using darken():\n\n\nCode\n# 6 shades darker\ndarker6 &lt;- darken(\"forestgreen\", c(0, .2, .4, .6, .8, 1))\n\n# Visualise the results\nscales::show_col(darker6)\n\n\n\n\n\n\n\n\n\n\n\n\nAdd the following code snippet to your file, above the ggplot code.\n\n# Move this to the top!\nlibrary(colorspace) \n\n# Custom colors for bar labels \nlabel_text_colors &lt;- c('transparent',\n                       darken(barCols[2], 0.4),\n                       darken(barCols[3], 0.4),\n                       darken(barCols[4], 0.4),\n                       lighten(barCols[5], 0.6))\n\n\nThe first position corresponds to Poor so we set that to transparent.\nThe next three positions correspond to Fair, Good and Very good so we will make the text labels 40% darker.\nThe final position corresponds to Excellent, which is already quite dark so we will make the label colour 60% lighter.\n\nWe can now map the label colours to this new vector by adding scale_colour_manual(name = NULL, values = label_text_colors). To make this work we will also have to delete color='grey30' from the call to geom_text() and add color = status to aes().\n\n\nCode\n# Adjust label colours\nggplot(\n  data=df1Plot,\n  aes(x = percent, \n      y = fct_reorder(state, totalHealthy), \n      fill = status,\n      color = status,\n      label = paste0(format(percent, nsmall=1), '%'))) + \n  geom_col(position = position_stack(reverse = TRUE),\n           color = \"white\") +\n  geom_text(\n    position = position_stack(reverse = TRUE),\n    size = 8/.pt, \n    hjust = 1.1) +\n  scale_fill_manual(name = NULL, values = barCols) +\n  scale_colour_manual(name = NULL, values = label_text_colors) +\n  scale_y_discrete(NULL) +\n  scale_x_continuous(NULL) +\n  labs(\n    title = 'Victorians most likely to rate their health as Excellent or Very Good',\n    subtitle = 'Self-assessed health status by states and territories',\n    caption = 'Source: National Health Survey, 2022') +\n  theme(\n    plot.title.position = 'plot',\n    panel.background = element_blank(),\n    axis.ticks.y = element_blank()\n  )\n\n\n\n\n\n\n\n\n\n\n\n\n6 Remove the legend\nThe labels are looking good but now we have two separate legends, one for the column fill colour and one for the label text colour. We will handle the legend in a later step so for now let‚Äôs just get rid of the legend. There are a few ways of doing this but perhaps the easiest is setting legend.position = \"none\" in the theme().\n\n\nCode\n# Remove the legend\nggplot(\n  data=df1Plot,\n  aes(x = percent, \n      y = fct_reorder(state, totalHealthy), \n      fill = status,\n      color = status,\n      label = paste0(format(percent, nsmall=1), '%'))) + \n  geom_col(position = position_stack(reverse = TRUE),\n           color = \"white\") +\n  geom_text(\n    position = position_stack(reverse = TRUE),\n    size = 8/.pt, \n    hjust = 1.1) +\n  scale_fill_manual(name = NULL, values = barCols) +\n  scale_colour_manual(name = NULL, values = label_text_colors) +\n  scale_y_discrete(NULL) +\n  scale_x_continuous(NULL) +\n  labs(\n    title = 'Victorians most likely to rate their health as Excellent or Very Good',\n    subtitle = 'Self-assessed health status by states and territories',\n    caption = 'Source: National Health Survey, 2022') +\n  theme(\n    plot.title.position = 'plot',\n    panel.background = element_blank(),\n    axis.ticks.y = element_blank(),\n    legend.position = \"none\"\n  )\n\n\n\n\n\n\n\n\n\n\n\n\n\n Back to top",
    "crumbs": [
      "Home",
      "Exercises",
      "Day 2. Visualisation",
      "Exercise 3 (Beginner)",
      "Step-by-step guide",
      "Part 2. Adding text labels"
    ]
  },
  {
    "objectID": "exercises/exercise1-2.html",
    "href": "exercises/exercise1-2.html",
    "title": "Step-by-step guide",
    "section": "",
    "text": "1 Set up your code file meta data\nIt‚Äôs good practice to include some code file meta information in the form of commented text at the top of every code file. This information is to help orientate you to what you were trying to do with this code when you come back to it in the future.\n\nIn RStudio, open the file exercises/1-code/1-clean-self-assessed-health.R\nUpdate the details in the title box. You can edit this to include what you like. Standard items to list include:\n\nA project name and purpose\nThe input file (here exercises/2-raw-data/national-health-survey-2022-table-2.xlsx)\nAny outputs that the code generates (here the output file will be the cleaned data saved in exercises/3-clean-data/vis1.Rda)\nCode author names\n\n\nI tend not to include the date because, assuming you work on the code over time, dates are better captured in Git commits.\n\n\n\n2 Load libraries\nIt is good practice to load all the libraries you need in a script in one place at the top of the file.\nWe will use three libraries to load and clean the ABS data:\n\nreadxl to read the raw .xlsx file into R\ndplyr for data manipulation\ntidyr to pivot the data from wide to long\n\nGo ahead and load all three libraries by adding library() calls to your script, as below.\n\n## Load libraries\nlibrary(readxl) \nlibrary(dplyr) \nlibrary(tidyr) \n\n\n\nNote that you don‚Äôt need to wrap the package name in quotation marks when loading the package.\n\n\n\n3 Commit your changes\nStart as you mean to go on and commit your changes to git, then push these to your repo on GitHub.\n\nMake sure to save your changes to the code file\nIn the git panel, tick the box next to exercises/1-code/clean-self-assessed-health.R @Aarathy\n\n\n\n\n\n\nIn the Git panel tick the box then slect commit\n\n\n\nSelect Commit\nWrite a short commit message in the box @Aarathy\n\n\n\n\n\n\nWrite a short commit message then click Push\n\n\n\nClick Push\n\n\n\n\n\n\n\nHow often to commit?\n\n\n\n\n\nCommit and push as often as you like! In practice you might find you commit less often near the start of a project, but as he project is close to completion you commit every new change. As you get used to the workflow you will get better at committing discrete, conceptually related changes to your code base.\n\n\n\n\n\n\n\n\n\nCheckpoint\n\n\n\nIf you open your GitHub repo in a browser, you should see your recent commit as the latest update.\n\n\n\n\n\n4 Download the data locally\nWith R, it is easy to automate the process of downloading the NHS data directly; no manual point-and-click needed.\n\nAssign the download string to myURL\n\n\n# Spreadsheet url\nmyURL &lt;- \"https://www.abs.gov.au/statistics/health/health-conditions-and-risks/national-health-survey/2022/NHSDC02.xlsx\"\n\n\nDownload the file using download.file() function\n\n\n# Download the file locally\ndownload.file(url = myURL,\n              destfile = 'exercises/2-raw-data/national-health-survey-2022-table-2.xlsx',\n              mode = 'wb')\n\n\n\nThe destfile argument indicates the file path where the downloaded file is to be saved. Note that it is a relative file path, because you are working in an R project environment.\nThe mode = 'wb' argument is important because the file being downloaded is a non-text .xlsx file. wb stands for ‚Äúwrite binary‚Äù.\n\n\n\n\n\n\nCheckpoint\n\n\n\nIf you have run this code successfully, the file national-health-survey-2022-table-2.xlsx should be saved in your exercises/2-raw-data folder. Go ahead and open it‚Äîyou can do so from within R Studio by going to the Files tab, clicking on the file name and selecting View File. @Aarathy\n\n\n\n\n\n\n\nOpen the downloaded .xlsx file from the Files tab\n\n\n\n\n\n5 Read in the data to R\nWe now have the raw .xlsx file in our project folder. To open the file in R we can use the read_excel() function from the readxl package.\n\n# Read in the raw data\ndf1Raw &lt;- read_excel(\n            path = 'exercises/2-raw-data/national-health-survey-2022-table-2.xlsx',\n            sheet = 'Table 2.3_Proportions',\n            skip = 5,\n            .name_repair = ~ make.names(.x, unique = TRUE)\n          )\n\nThere are a few important arguments we need to specify:\n\npath The path to where you downloaded the .xlsx file raw-data/national-health-survey-2022-table-2.xlsx\nsheet The sheet to read. Here we want to access the data as percentages so we read the sheet Table 2.3_Proportions\nskip Notice in the .xlsx file, the first row of useful data (the state names) is on row six. Setting skip = 5 ensures that the data read starts from row six. The default behaviour is for the variable names to be taken from the first row so the state names become the variable names!\n.name_repair This allows us specify a method to repair the default column names. In particular, because the state names are duplicated, the function make.names(unique=TRUE) ensures they are unique by appending .1 to duplicated names. Thus we have variables NSW and NSW.1, Qld and Qld.1 etc.\n\n\n\nIn the line of code .name_repair = ~ make.names(.x, unique = TRUE) the ~ (tilde) expression is a shorthand for defining a function. .x is a placeholder for the argument passed to the function, which in this case represents the names of the columns that need to be repaired. So ~ make.names(.x, unique = TRUE) is is equivalent to the function\n\nfunction(.x) {\n  make.names(.x, unique = TRUE)\n}\n\nTo get a feel for what this is doing, try entering the following code snippet at the console: make.names(c('Mark', 'Mark'), unique = TRUE)\n\n\n\n\n\n\nCheckpoint\n\n\n\nAll going smoothly, you now have the raw data in your local R environment. You can examine it by clicking on the df1Raw dataframe in the Environment tab. This is a good start but we are still a long way from tidy data!\n\n\nNotice that the first column (named X because it was blank in the raw file) has many different categories corresponding to the first column of the xlsx file. We only want the categories relating to self-assessed health, so filtering them out is the next step.\n\n\n\n\n\nView the df1Raw dataframe in the Environment tab\n\n\n\n\n\n6 Filter to the self-assessed health categories\nAt this point, the dataset df1Raw dataset has 118 rows, but we only need the five rows relating to the five self-assessed health categories: Excellent, Very Good, Good, Fair, and Poor.\nTo filter these rows, we can define a vector with these category names and then use the filter function. We don‚Äôt want to edit our raw dataframe, so we will assign the result to a new dataframe df1Clean.\n\n# Define health status categories\nhealthStatus &lt;- c(\"Poor\", \"Fair\", \"Good\", \"Very good\", \"Excellent\")\n\n# Filter to these rows\ndf1Clean &lt;- df1Raw |&gt;\n  filter(X %in% healthStatus)\n\n\n\nIn R, the %in% operator is used to check if elements of one vector are contained in another vector. Try entering 'Ringo' %in% c('John', 'Paul', 'George', 'Ringo') at the console.\n\n\n\n\n\n\nCheckpoint\n\n\n\nAt this point, df1Clean should have 5 observations and 19 variables. You can confirm this by entering dim(df1Clean) at the console.\n\n\n\n\n\n7 Select the columns of interest\nThe original dataset provides proportions and age-standardised proportions. We just need the age-standardised proportions, so the next step is to select the variables of interest. Because the age-standardised data came second, these are the variables named NSW.1, Qld.1 etc. We can select these using select() and the convenience function ends_with() as follows.\n\n# Append this line to the previous code using |&gt;\nselect(c(X, ends_with(\".1\"), -'Australia.1'))\n\n\n\nSo when you append this line your updated code chunk will be\n\n# Filter to these rows\ndf1Clean &lt;- df1Raw |&gt;\n  filter(X %in% healthStatus) |&gt; \n  select(c(X, ends_with(\".1\"), -'Australia.1'))\n\nAs you work through the sections below keep adding the code lines like this!  Note that the code select(c(X, ends_with(\".1\"), -'Australia.1')) says we want to keep (i) the column X, (ii) every column ending in .1 but (iii) not the column Australia.1.\n\n\n\n\n\n\nCheckpoint\n\n\n\nAt this point, df1Clean should have 5 observations and 9 variables. You can confirm this by entering dim(df1Clean) at the console.\n\n\n\n\n\n8 Pivot from wide format to long format\nIf you examine the df1Clean data as it currently stands, there are five rows, one each for each category of health status, and nine columns, the health status plus eight states and territories.\nTo transform to a tidy dataset we need to move from this wide format to a long format with one variable indicating state, one variable indicating health status and one variable indicating percentage. To do this, we will use the pivot_longer() function from the tidyr package.\n\n# Append this line to the previous code using |&gt;\npivot_longer(\n  cols = ends_with(\".1\"),\n  names_to = 'state',\n  values_to = 'percent') \n\nThere are three arguments to the pivot_longer() function here:\n\ncols defines the columns to pivot into longer format. We can choose the eight columns corresponding to the states and territories by using the ends_with() convenience function.\nnames_to specifies the name for the new column to create from the information stored in the column names of data specified by cols.\n\nvalues_to is the name of the column to create from the data stored in cell values.\n\n\n\n\n\n\n\nCheckpoint\n\n\n\nAt this point, df1Clean should have 40 observations and 3 variables. You can confirm this by entering dim(df1Clean) at the console. Check the names by entering names(df1Clean) at the console; it should return X, state, and percent.\n\n\n\n\n\n9 Rename the variable X\nX isn‚Äôt a very informative variable name so let‚Äôs rename it to something more descriptive using the rename() function.\n\n# Append this line to the previous code using |&gt;\nrename(status = X)\n\n\n\nRemember the syntax is rename(newName = oldName)\n\n\n\n10 Tidy up the state variable\nThe state variable is in an awful state. First of all, the state names still have the .1 suffix (NSW.1 etc). Secondly, it is a character vector, but for plotting purposes its going to be better to have this as a factor variable. We can create a better version of the state variable using mutate(), combined with as.factor() to make our new variable a factor variable.\n\n# Append this code to the previous code using |&gt;\nmutate(\n    state = factor(\n      case_when (\n        state == 'NSW.1' ~ 'New South Wales',\n        state == 'Vic..1' ~ 'Victoria',\n        state == 'Qld.1' ~ 'Queensland',\n        state == 'SA.1' ~ 'South Australia',\n        state == 'WA.1' ~ 'Western Australia',\n        state == 'Tas..1' ~ 'Tasmania',\n        state == 'NT.1' ~ 'Northern Territory',\n        state == 'ACT.1' ~ 'Australian Capital Territory'\n      ))) \n\n\n\nNote that we overwrote the original state variable with a new version. Here it is okay because we are using code to create a new dataset leaving the original intact, but obviously you should never overwrite variables in the canonical version of your data!\n\n\n\n\n\n\nCheckpoint\n\n\n\nYou can confirm that the new state variable is a factor variable by entering is.factor(df1Clean$state) at the console. You can also confirm the levels of the new factor variable by entering levels(df1Clean$state). Note that because we didn‚Äôt specify any levels, they are ordered alphabetically by default.\n\n\n\n\n\n11 Tidy up the status variable\nThings are looking good now! One additional change is that it will be useful later to code the status variable as a factor. We can do that with another call to mutate().\n\n# Append this code to the previous code using |&gt;\nstatus = factor(status, levels = healthStatus)\n\nHere we have also set the levels option to healthStatus which we defined way back in Step 6 as the vector c(\"Poor\", \"Fair\", \"Good\", \"Very good\", \"Excellent\"). This ensures that when we plot the data the categories will have a sensible sorting from Poor health to Excellent health. If we didn‚Äôt do this they would default to being sorted alphabetically and appear on the plot in the wrong order (Excellent to Very good).\n\n\nHere we have separated the steps of coding state and status as factor variables into two separated calls to mutate(). It is also possible to create multiple variables in a single mutate() call so Steps 9 and 10 could be completed in a single step as\n\n  mutate(\n    state = factor(\n      case_when (\n        state == 'NSW.1' ~ 'New South Wales',\n        state == 'Vic..1' ~ 'Victoria',\n        state == 'Qld.1' ~ 'Queensland',\n        state == 'SA.1' ~ 'South Australia',\n        state == 'WA.1' ~ 'Western Australia',\n        state == 'Tas..1' ~ 'Tasmania',\n        state == 'NT.1' ~ 'Northern Territory',\n        state == 'ACT.1' ~ 'Australian Capital Territory'\n      )),\n    status = factor(status, levels = healthStatus)\n  )\n\n\n\n\n\n\n\nCheckpoint\n\n\n\nYou can confirm that the new status variable is a factor variable by entering is.factor(df1Clean$status) at the console. You can also confirm the levels of the new factor variable by entering levels(df1Clean$status). The category levels should appear in increasing order from Poor to Excellent, not alphabetically.\n\n\n\n\n\n12 Sort the data\nWe are done! The dataset is in tidy data format and the categorical variables are nicely coded as factors. Currently the dataset is sorted by status first and then by state; it is easier to read if sorted by state, which we can quickly do with the arrange function.\n\n# Append this code to the previous code using |&gt;\narrange(state, status)\n\n\n\n13 Save the clean data\nHaving gone to all that effort to clean the data, we definitely want to save it! We will save it in two formats: an R data file .Rda for working in R and a plain old .csv which is a good option if you want to share the data underlying your chart with non-R users.\nAdd the following blocks of code to your script to save the df1Clean file in your exercises/3-clean-data folder.\n\n# Save the data in .Rda format\nsave(df1Clean, file=here::here('exercises/3-clean-data/vis1.Rda'))\n\n\n# Save the data in .csv format\nwrite.csv(df1Clean,\n          file=here::here('exercises/3-clean-data/vis1.csv'),\n          row.names = FALSE)\n\n\n\nNote we are using the here() function from the here package to determine the root folder of the R project. Try entering here::here() at the console to confirm the location is where you expect.\n\n\n\n\n\n\nCheckpoint\n\n\n\nNow that you‚Äôve completed your cleaning code, you should test everything runs smoothly. Save your file then restart your R session by clicking on Session &gt; Restart R.\nHighlight the full R Script (Cmd/Ctrl + A) then run everything that is highlighted (Cmd/Ctrl + Enter). The whole data cleaning pipeline should run and the clean data file should update every time you run this.\nLook out for errors in the console: if you left out a step or completed it in interactively in the console and didn‚Äôt save the code then the code will break.\nIf you are happy with everything remember to Git commit and push your code.\n\n\n\n\nCongratulations, you made it!!\n\n\n\nvia GIPHY\n\n\n\n\n\n\n Back to top",
    "crumbs": [
      "Home",
      "Exercises",
      "Day 1. Data cleaning",
      "Exercise 1 (Beginner)",
      "Step-by-step guide"
    ]
  },
  {
    "objectID": "exercises/exercise3-5.html",
    "href": "exercises/exercise3-5.html",
    "title": "Part 4. Adding a bespoke legend",
    "section": "",
    "text": "1 Overview\nWe are nearly there! In this section we will add a bespoke legend to the plot.\n\n\n\n2 Turn the legend back on\nWe previously turned off the legend by setting legend.position = \"none\" in our theme(). If we remove that line of code this is what we get.\n\n\nCode\n# Turn on legend\nggplot(\n  data=df1Plot,\n  aes(x = percent, \n      y = fct_reorder(state, totalHealthy), \n      fill = status,\n      color = status,\n      label = paste0(format(percent, nsmall=1), '%'))) + \n  geom_col(position = position_stack(reverse = TRUE),\n           color = \"white\") +\n  geom_text(\n    position = position_stack(reverse = TRUE),\n    size = 8/.pt, \n    hjust = 1.1) +\n  scale_fill_manual(name = NULL, values = barCols) +\n  scale_colour_manual(name = NULL, values = label_text_colors) +\n  scale_y_discrete(NULL) +\n  scale_x_continuous(NULL) +\n  labs(\n    title = 'Victorians most likely to rate their health as &lt;span style=\"color: #1A9641;\"&gt;**Excellent**&lt;/span&gt; or &lt;span style=\"color: #A6D96A;\"&gt;**Very Good**&lt;/span&gt;',\n    subtitle = 'Self-assessed health status by states and territories',\n    caption = 'Source: National Health Survey, 2022') +\n  theme(\n    plot.title.position = 'plot',\n    plot.title = element_markdown(size=14, vjust=2),\n    plot.subtitle = element_text(size=10, color = 'grey30', face = 'bold'),\n    plot.caption = element_text(size=8, color = 'grey60'),\n    panel.background = element_blank(),\n    axis.ticks.y = element_blank()\n  )\n\n\n\n\n\n\n\n\n\nThis is a combined legend for the bar colours and the text label colours (those are the little ‚Äúa‚Äùs in the legend boxes).\n\n\n\n3 Remove the text label legend\nThe text label colours don‚Äôt add much information and are a bit unsightly. We can quickly get rid of them by setting show.legend = FALSE within geom_text().\n\n\nCode\nggplot(\n  data=df1Plot,\n  aes(x = percent, \n      y = fct_reorder(state, totalHealthy), \n      fill = status,\n      color = status,\n      label = paste0(format(percent, nsmall=1), '%'))) + \n  geom_col(position = position_stack(reverse = TRUE),\n           color = \"white\") +\n  geom_text(\n    position = position_stack(reverse = TRUE),\n    size = 8/.pt, \n    hjust = 1.1,\n    show.legend = FALSE) +\n  scale_fill_manual(name = NULL, values = barCols) +\n  scale_colour_manual(name = NULL, values = label_text_colors) +\n  scale_y_discrete(NULL) +\n  scale_x_continuous(NULL) +\n  labs(\n    title = 'Victorians most likely to rate their health as &lt;span style=\"color: #1A9641;\"&gt;**Excellent**&lt;/span&gt; or &lt;span style=\"color: #A6D96A;\"&gt;**Very Good**&lt;/span&gt;',\n    subtitle = 'Self-assessed health status by states and territories',\n    caption = 'Source: National Health Survey, 2022') +\n  theme(\n    plot.title.position = 'plot',\n    plot.title = element_markdown(size=14, vjust=2),\n    plot.subtitle = element_text(size=10, color = 'grey30', face = 'bold'),\n    plot.caption = element_text(size=8, color = 'grey60'),\n    panel.background = element_blank(),\n    axis.ticks.y = element_blank()\n  )\n\n\n\n\n\n\n\n\n\nThis simply legend works quite well and if you are happy with this you can finish this exercise here!\n\n\n\n4 Add a bespoke legend\nThe final figure places the legend in a horizontal orientation with the legend colours matching reflecting the colours in the bars, changing from red to green as the eye scans from left to right.\nTo achieve this effect I turned of the default legend and built a bespoke legend using geom_tile() for the coloured boxes and geom_text() for the legend labels.\nThe first step to do this is to create a new dataframe which defines the x and y position of the coloured boxes that comprise the legend.\n\nlegendDf &lt;- data.frame(\n  y = rep(9.5, 5),\n  x = 10 + 0:4 * 20\n)\n\nlegendDf\n\n    y  x\n1 9.5 10\n2 9.5 30\n3 9.5 50\n4 9.5 70\n5 9.5 90\n\n\nThis data frame has 2 columns and five rows. Each pair of x-y coordinates defines the center of a legend box, with the first box positioned at 10 along the x-axis and the last box positioned at 90.\nHere is the trickiest part of this step: because our chart is now being built using two separate data frames we need to move the calls to data= and aes() from their current position within ggplot() to their individuals geoms.\nFor example, we will move from this general structure\n\nggplot(\n  data = df1Plot,\n  aes = (...)\n) + \n  geom_col() +\n  geom_text()\n\nTo this general structure\n\nggplot() + \n  geom_col(\n      data = df1Plot,\n      aes = (...)) +\n  geom_text(\n      data = df1Plot,\n      aes = (...))\n\nWhen we do this, we only have to retain the aesthetics that are relevant for each geom. So we can drop label = in the aes() for geom_col() (the columns themselves have no label) and we can drop fill = in the aes() for geom_text() (the text itself has no fill).\n\n\nCode\n# Data frame for legend\nlegendDf &lt;- data.frame(\n  y = rep(9.5, 5),\n  x = 10 + 0:4 * 20\n)\n\nggplot() + \n  geom_col(\n    data = df1Plot,\n    aes(x = percent, \n        y = fct_reorder(state, totalHealthy), \n        fill = status,\n        color = status),\n    position = position_stack(reverse = TRUE),\n   color = \"white\") +\n  geom_text(\n    data = df1Plot,\n    aes(x = percent, \n        y = fct_reorder(state, totalHealthy), \n        color = status,\n        label = paste0(format(percent, nsmall=1), '%')),\n    position = position_stack(reverse = TRUE),\n    size = 8/.pt,\n    hjust = 1.1,\n    show.legend = FALSE) +\n  scale_fill_manual(name = NULL, values = barCols) +\n  scale_colour_manual(name = NULL, values = label_text_colors) +\n  scale_y_discrete(NULL) +\n  scale_x_continuous(NULL) +\n  geom_tile( # The legend box\n    data = legendDf,\n    aes(x = x, y = y),\n    color = 'white') +\n  labs(\n    title = 'Victorians most likely to rate their health as &lt;span style=\"color: #1A9641;\"&gt;**Excellent**&lt;/span&gt; or &lt;span style=\"color: #A6D96A;\"&gt;**Very Good**&lt;/span&gt;',\n    subtitle = 'Self-assessed health status by states and territories',\n    caption = 'Source: National Health Survey, 2022') +\n  theme(\n    plot.title.position = 'plot',\n    plot.title = element_markdown(size=14, vjust=2),\n    plot.subtitle = element_text(size=10, color = 'grey30', face = 'bold'),\n    plot.caption = element_text(size=8, color = 'grey60'),\n    panel.background = element_blank(),\n    axis.ticks.y = element_blank(),\n    legend.position = 'none'\n  )\n\n\n\n\n\n\n\n\n\n\n\n\n5 Add colour fill\nThe position looks ok. Now lets colour in the legend box. We want to use the same colour palette as the bars so we will take advantage of the existing healthStatus variable and append a similar variable to our legend data frame. We can then map the fill colour for geom_tile() to this variable. Because the fill variable name is the same factor, the existing scale_color_manual() ensures the colours are the same.\n\n\nCode\n# Define health status levels\nhealthStatus &lt;- c(\"Poor\", \"Fair\", \"Good\", \"Very good\", \"Excellent\")\n\n# Data frame for legend\nlegendDf &lt;- data.frame(\n  y = rep(9.5, 5),\n  x = 10 + 0:4 * 20,\n  label = factor(healthStatus, levels = healthStatus)\n)\n\nggplot() + \n  geom_col(\n    data = df1Plot,\n    aes(x = percent, \n        y = fct_reorder(state, totalHealthy), \n        fill = status,\n        color = status),\n    position = position_stack(reverse = TRUE),\n    color = \"white\") +\n  geom_text(\n    data = df1Plot,\n    aes(x = percent, \n        y = fct_reorder(state, totalHealthy), \n        color = status,\n        label = paste0(format(percent, nsmall=1), '%')),\n    position = position_stack(reverse = TRUE),\n    size = 8/.pt,\n    hjust = 1.1,\n    show.legend = FALSE) +\n  scale_fill_manual(name = NULL, values = barCols) +\n  scale_colour_manual(name = NULL, values = label_text_colors) +\n  scale_y_discrete(NULL) +\n  scale_x_continuous(NULL) +\n  geom_tile( # The legend box\n    data = legendDf,\n    aes(x = x, y = y, fill = label),\n    color = 'white') +\n  labs(\n    title = 'Victorians most likely to rate their health as &lt;span style=\"color: #1A9641;\"&gt;**Excellent**&lt;/span&gt; or &lt;span style=\"color: #A6D96A;\"&gt;**Very Good**&lt;/span&gt;',\n    subtitle = 'Self-assessed health status by states and territories',\n    caption = 'Source: National Health Survey, 2022') +\n  theme(\n    plot.title.position = 'plot',\n    plot.title = element_markdown(size=14, vjust=2),\n    plot.subtitle = element_text(size=10, color = 'grey30', face = 'bold'),\n    plot.caption = element_text(size=8, color = 'grey60'),\n    panel.background = element_blank(),\n    axis.ticks.y = element_blank(),\n    legend.position = 'none'\n  )\n\n\n\n\n\n\n\n\n\n\n\n\n6 Add legend text labels\nWe can use the same legend dataframe to impose text labels on top of the legend boxes. As with the column labels, we can do this with geom_text().\n\n\nCode\nggplot() + \n  geom_col(\n    data = df1Plot,\n    aes(x = percent, \n        y = fct_reorder(state, totalHealthy), \n        fill = status,\n        color = status),\n    position = position_stack(reverse = TRUE),\n    color = \"white\") +\n  geom_text(\n    data = df1Plot,\n    aes(x = percent, \n        y = fct_reorder(state, totalHealthy), \n        color = status,\n        label = paste0(format(percent, nsmall=1), '%')),\n    position = position_stack(reverse = TRUE),\n    size = 8/.pt,\n    hjust = 1.1,\n    show.legend = FALSE) +\n  scale_fill_manual(name = NULL, values = barCols) +\n  scale_colour_manual(name = NULL, values = label_text_colors) +\n  scale_y_discrete(NULL) +\n  scale_x_continuous(NULL) +\n  geom_tile( # The legend box\n    data = legendDf,\n    aes(x = x, y = y, fill = label),\n    color = 'white') +\n  geom_text( # The legend box\n    data = legendDf,\n    aes(x = x, y = y, label = label)) +\n  labs(\n    title = 'Victorians most likely to rate their health as &lt;span style=\"color: #1A9641;\"&gt;**Excellent**&lt;/span&gt; or &lt;span style=\"color: #A6D96A;\"&gt;**Very Good**&lt;/span&gt;',\n    subtitle = 'Self-assessed health status by states and territories',\n    caption = 'Source: National Health Survey, 2022') +\n  theme(\n    plot.title.position = 'plot',\n    plot.title = element_markdown(size=14, vjust=2),\n    plot.subtitle = element_text(size=10, color = 'grey30', face = 'bold'),\n    plot.caption = element_text(size=8, color = 'grey60'),\n    panel.background = element_blank(),\n    axis.ticks.y = element_blank(),\n    legend.position = 'none'\n  )\n\n\n\n\n\n\n\n\n\n\n\n\n7 Colour the legend text labels\nWe can apply a nice contrasting colour for the text labels by using the text colour palette we defined previously. We just need to map colour to the label variable i.e.¬†aes(color = label). Again, because we are using the same factor variable, our previously defined scale_colour_manual() will do the rest.\n\n\nCode\n# Colour the legend text\nggplot() + \n  geom_col(\n    data = df1Plot,\n    aes(x = percent, \n        y = fct_reorder(state, totalHealthy), \n        fill = status,\n        color = status),\n    position = position_stack(reverse = TRUE),\n    color = \"white\") +\n  geom_text(\n    data = df1Plot,\n    aes(x = percent, \n        y = fct_reorder(state, totalHealthy), \n        color = status,\n        label = paste0(format(percent, nsmall=1), '%')),\n    position = position_stack(reverse = TRUE),\n    size = 8/.pt,\n    hjust = 1.1,\n    show.legend = FALSE) +\n  scale_fill_manual(name = NULL, values = barCols) +\n  scale_colour_manual(name = NULL, values = label_text_colors) +\n  scale_y_discrete(NULL) +\n  scale_x_continuous(NULL) +\n  geom_tile( # The legend box\n    data = legendDf,\n    aes(x = x, y = y, fill = label),\n    color = 'white') +\n  geom_text( # The legend box\n    data = legendDf,\n    aes(x = x, y = y, label = label, color = label)) +\n  labs(\n    title = 'Victorians most likely to rate their health as &lt;span style=\"color: #1A9641;\"&gt;**Excellent**&lt;/span&gt; or &lt;span style=\"color: #A6D96A;\"&gt;**Very Good**&lt;/span&gt;',\n    subtitle = 'Self-assessed health status by states and territories',\n    caption = 'Source: National Health Survey, 2022') +\n  theme(\n    plot.title.position = 'plot',\n    plot.title = element_markdown(size=14, vjust=2),\n    plot.subtitle = element_text(size=10, color = 'grey30', face = 'bold'),\n    plot.caption = element_text(size=8, color = 'grey60'),\n    panel.background = element_blank(),\n    axis.ticks.y = element_blank(),\n    legend.position = 'none'\n  )\n\n\n\n\n\n\n\n\n\n\n\n\n8 Add in the legend text colour for Poor\nThis looks okay, but one issue is that there is no label text color for the category Poor, which we previously set to transparent.\nTo fix this we need to define a second version of the text label color palette which includes a colour for Poor. As before, we can use the lighten() function to specify a nicely contrasting colour, here 60% lighter than the original red.\n\n# Custom colors for legend text (includes red)\nlabel_text_colors2 &lt;- c(lighten(barCols[1], 0.6),\n                        darken(barCols[2], 0.4),\n                        darken(barCols[3], 0.4),\n                        darken(barCols[4], 0.4),\n                        lighten(barCols[5], 0.6))\n\nlabel_text_colors2\n\n[1] \"#FFACAD\" \"#9C6001\" \"#939303\" \"#568003\" \"#7CE190\"\n\n\nIn base ggplot2, we can only map the colour aesthetic to a single set of colours. Put another way, we can only define scale_colour_manual() once. Luckily, we can get around this using the ggnewscale package, which allows you to add multiple colour and fill scales. To add a second colour scale w need to include new_scale_color() in our code before we specify our second scale_colour_manual() to define the legend text label colours.\n\n\nCode\n# Custom colors for legend text (includes red)\nlabel_text_colors2 &lt;- c(lighten(barCols[1], 0.6),\n                        darken(barCols[2], 0.4),\n                        darken(barCols[3], 0.4),\n                        darken(barCols[4], 0.4),\n                        lighten(barCols[5], 0.6))\n\n# Library to allow second colour mapping\nlibrary(ggnewscale)\n\nggplot() + \n  geom_col(\n    data = df1Plot,\n    aes(x = percent, \n        y = fct_reorder(state, totalHealthy), \n        fill = status,\n        color = status),\n    position = position_stack(reverse = TRUE),\n    color = \"white\") +\n  geom_text(\n    data = df1Plot,\n    aes(x = percent, \n        y = fct_reorder(state, totalHealthy), \n        color = status,\n        label = paste0(format(percent, nsmall=1), '%')),\n    position = position_stack(reverse = TRUE),\n    size = 8/.pt,\n    hjust = 1.1,\n    show.legend = FALSE) +\n  scale_fill_manual(name = NULL, values = barCols) +\n  scale_colour_manual(name = NULL, values = label_text_colors) +\n  scale_y_discrete(NULL) +\n  scale_x_continuous(NULL) +\n  geom_tile( # The legend box\n    data = legendDf,\n    aes(x = x, y = y, fill = label),\n    color = 'white') +\n  new_scale_colour() +\n  geom_text( # The legend box\n    data = legendDf,\n    aes(x = x, y = y, label = label, color = label)) +\n  scale_colour_manual(name = NULL, values = label_text_colors2) +\n  labs(\n    title = 'Victorians most likely to rate their health as &lt;span style=\"color: #1A9641;\"&gt;**Excellent**&lt;/span&gt; or &lt;span style=\"color: #A6D96A;\"&gt;**Very Good**&lt;/span&gt;',\n    subtitle = 'Self-assessed health status by states and territories',\n    caption = 'Source: National Health Survey, 2022') +\n  theme(\n    plot.title.position = 'plot',\n    plot.title = element_markdown(size=14, vjust=2),\n    plot.subtitle = element_text(size=10, color = 'grey30', face = 'bold'),\n    plot.caption = element_text(size=8, color = 'grey60'),\n    panel.background = element_blank(),\n    axis.ticks.y = element_blank(),\n    legend.position = 'none'\n  )\n\n\n\n\n\n\n\n\n\n\n\n\n9 Tidy up the legend\nThis looks great! As a final step we can make this a bit neater by reducing the height of the legend box and using a smaller font for the legend text labels.\n\n\nCode\nggplot() + \n  geom_col(\n    data = df1Plot,\n    aes(x = percent, \n        y = fct_reorder(state, totalHealthy), \n        fill = status,\n        color = status),\n    position = position_stack(reverse = TRUE),\n    color = \"white\") +\n  geom_text(\n    data = df1Plot,\n    aes(x = percent, \n        y = fct_reorder(state, totalHealthy), \n        color = status,\n        label = paste0(format(percent, nsmall=1), '%')),\n    position = position_stack(reverse = TRUE),\n    size = 8/.pt,\n    hjust = 1.1,\n    show.legend = FALSE) +\n  scale_fill_manual(name = NULL, values = barCols) +\n  scale_colour_manual(name = NULL, values = label_text_colors) +\n  scale_y_discrete(NULL) +\n  scale_x_continuous(NULL) +\n  geom_tile( # The legend box\n    data = legendDf,\n    aes(x = x, y = y, fill = label),\n    color = 'white', height = 0.65) +\n  new_scale_colour() +\n  geom_text( # The legend box\n    data = legendDf,\n    aes(x = x, y = y, label = label, color=label),\n    size = 8/.pt) +\n  scale_colour_manual(name = NULL, values = label_text_colors2) +\n  labs(\n    title = 'Victorians most likely to rate their health as &lt;span style=\"color: #1A9641;\"&gt;**Excellent**&lt;/span&gt; or &lt;span style=\"color: #A6D96A;\"&gt;**Very Good**&lt;/span&gt;',\n    subtitle = 'Self-assessed health status by states and territories',\n    caption = 'Source: National Health Survey, 2022') +\n  theme(\n    plot.title.position = 'plot',\n    plot.title = element_markdown(size=14, vjust=2),\n    plot.subtitle = element_text(size=10, color = 'grey30', face = 'bold'),\n    plot.caption = element_text(size=8, color = 'grey60'),\n    panel.background = element_blank(),\n    axis.ticks.y = element_blank(),\n    legend.position = 'none'\n  )\n\n\n\n\n\n\n\n\n\n\n\nIf you made it this far‚Äîyou are amazing!!\n\n\n\nvia GIPHY\n\n\n\n\n\n\n Back to top",
    "crumbs": [
      "Home",
      "Exercises",
      "Day 2. Visualisation",
      "Exercise 3 (Beginner)",
      "Step-by-step guide",
      "Part 4. Adding a bespoke legend"
    ]
  },
  {
    "objectID": "exercises/exercise2-2.html",
    "href": "exercises/exercise2-2.html",
    "title": "Step-by-step guide",
    "section": "",
    "text": "1 Set up your code file meta data\nAs before, you should your code file with some meta information in the form of commented out text.\n\n\n‚ò† Hint¬†1\n\n\n\n\nInclude similar information to last time: the project name and purpose, and the code inputs and outputs.\n\n\n‚ò† Hint¬†1\n\n\n\n\n\n\n\n2 Load libraries\nLoad all of your libraries in a single location at the top of the file.\n\n\n‚ò† Hint¬†2\n\n\n\n\nStart with the three libraries from the last exercise: readxl, dplyr, and tidyr.\n\n\n‚ò† Hint¬†2\n\n\n\n\n\n\n\n3 Commit your changes\nRemember it is good practice to commit your changes regularly. You can do that now.\n\n\n‚ò† Hint¬†3\n\n\n\n\nThis isn‚Äôt essential but it‚Äôs good to get into the practice. You don‚Äôt have to push every time you commit.\n\n\n‚ò† Hint¬†3\n\n\n\n\n\n\n\n4 Download the data locally\nDownload the raw data using the ABS website link below and the download.file() function.\nhttps://www.abs.gov.au/statistics/health/health-conditions-and-risks/national-health-survey/2022/NHSDC01.xlsx\n\n\n‚ò† Hint¬†4\n\n\n\n\nUse the same code as before. Remember to update the URL and destination file name.\n\n# Spreadsheet url\nmyURL &lt;- \" \"\n\n# Download the file locally\ndownload.file(\n  url = , \n  destfile = \" \")\n\n\n\n‚ò† Hint¬†4\n\n\n\n\n\n\n\n\n\n\nCheckpoint\n\n\n\nYou should see the .xlsx spreadsheet downloaded into your exercises/2-raw-data folder.\n\n\n\n\n\n5 Read in the data to R\nRead in the raw data from the sheet Table 1.3_Proportions using the read_excel() function. Remember the same key arguments from last time:\n\npath Where you have downloaded the excel file\nsheet The sheet you want to read from\nskip The number of lines to skip before reading\n.name_repair the function to make names unique\n\n\n\n‚ò† Hint¬†5\n\n\n\n\nUse the same code as before. Check in the excel file how many rows you want to skip so that the years (2001 2004‚Äì05 etc) are the first row of data.\n\n# Read in the raw data\ndf2Raw &lt;- read_excel(\n  path = \" \",\n  sheet = \" \",\n  skip = ,\n  .name_repair =  \n)\n\n\n\n‚ò† Hint¬†5\n\n\n\n\n\n\n\n\n\n\nCheckpoint\n\n\n\nYou should be able to see the data frame in your R Environment pane. Check that it has 130 rows and 15 variables.\n\n\n\n\n\n6 Subset to the 12 rows with data on chronic conditions\nStart your data cleaning by filtering to the rows that contain the chronic conditions (arthritis, asthma etc). These should be in rows 12 to 23 (but check in your data).\n\n\n‚ò† Hint¬†6\n\n\n\n\nUse the slice() function to subset to the rows you need, for example, this would subset to rows 4 to 6.\n\n# Clean the raw data\ndf2Clean &lt;- df2Raw |&gt;\n  slice(4:6)\n\n\n\n‚ò† Hint¬†6\n\n\n\n\n\n\n\n\n\n\nCheckpoint\n\n\n\nYour dataframe should have 12 rows, one for each chronic condition.\n\n\n\n\n\n7 Select the columns of interest\nSelect the first column (with the chronic conditions) and the columns with age-standardised proportions. If you specified .name_repair = ~ make.names(.x, unique = TRUE) then the columns with age-standardised proportions will all end with .1.\n\n\n‚ò† Hint¬†7\n\n\n\n\nAs before, use select() to select the variables you want to keep. ends_with() is a useful function to select multiple variables with the same name.\nFor example, this would select the variables species, bill_length_mm and flipper_length_mm from the penguins dataset.\n\n# Select\nlibrary(palmerpenguins)\n\npenguins |&gt; \nselect(c(species, ends_with(\"length_mm\")))\n\n\n\n‚ò† Hint¬†7\n\n\n\n\n\n\n\n\n\n\nCheckpoint\n\n\n\nYour dataframe should have 8 variables: the column of chronic conditions and the 7 date columns.\n\n\n\n\n\n8 Pivot from wide format to long format\nCurrently we are in wide format, with one column for each survey period, and the proportions in the cells. We need to move to long format with a single column for the survey period and a single column for the percentages.\nWe can achieve this using pivot_longer(). Remember, there are a few important arguments:\n\ncols The variables we want to stack when we move from wide to long, i.e.¬†the variables that are the survey periods ending in .1.\nnames_to The name of the new variable containing the survey periods.\nvalues_to The name of the new variable containing the percentages\n\n\n\n‚ò† Hint¬†8\n\n\n\n\nThis step is tricky. If you copied the approach from last time you may well have encountered the error ! Can‚Äôt combine X2001.1  and X2022.1 \nThis arises because some of the columns were read in as numeric while others were read in as character (the character columns had the text ‚Äúna‚Äù somewhere in the original spreadsheet). Trying to stack character variables on top of numeric variables causes problems.\nTo get around this, we need to add the values_transform = as.numeric argument in pivot_longer(). This argument makes sure all of the variables are numeric when they are stacked.\n\n# Pivot longer\npivot_longer(\n  cols = ends_with(\".1\"),\n  names_to = 'period',\n  values_to = 'percent',\n  values_transform = as.numeric) \n\n\n\n‚ò† Hint¬†8\n\n\n\n\n\n\n\n\n\n\nCheckpoint\n\n\n\nAll going well you should have 84 rows (12 conditions \\(\\times\\) 7 survey periods) and three columns: X, period and percent.\nDon‚Äôt worry if you get a warning message about NAs. Some of the time series are missing data, for example there is no data point for diabetes in 2004-05.\n\n\n\n\n\n9 Rename the variable X\nWe still have the unsightly variable name X. Go ahead and rename it to condition.\n\n\n‚ò† Hint¬†9\n\n\n\n\nRemember the syntax\n\n# Rename\nrename(newName = oldName)\n\n\n\n‚ò† Hint¬†9\n\n\n\n\n\n\n\n\n\n\nCheckpoint\n\n\n\nYou‚Äôre doing great!\n\n\n\n\n\n10 Tidy up the period variable\nThis is a tricky step so the full solution is outlined below. Among other things we encounter dates for the first time.\nThe period variable refers to the survey period, but it is a bit of a disaster with entries like X2001.1 and X2004.05.1. We need to tidy it up to have nicely formatted dates instead of these weird strings.\n\n\n‚ò† Hint¬†10\n\n\n\n\n\n\n\nThat was pretty full on so there is no hint beyond the code in the instructions. You got this like Molly got her ball.\n\n\n\n\n‚ò† Hint¬†10\n\n\n\n\nReferring back to the original spreadsheet, these dates refer to single calendar years (for 2001 and 2022) and multiple calendar years like 2004-05 and 2007-08.\nWhile the survey collection period naturally spanned months or years, for the purpose of plotting we want to be able to choose a single date. For whole years, we will choose the mid-year point i.e.¬†July 1. For survey periods that spanned multiple years we will choose the first day of the second year, i.e.¬†January 1. To summarise, we want to assign the survey periods to specific dates as follows.\n\n2001 \\(\\rightarrow\\) 01/07/2001\n2004-05 \\(\\rightarrow\\) 01/01/2005\n2007-08 \\(\\rightarrow\\) 01/01/2008\n2011-12 \\(\\rightarrow\\) 01/01/2012\n2014-15 \\(\\rightarrow\\) 01/01/2015\n2017-18 \\(\\rightarrow\\) 01/01/2018\n2022 \\(\\rightarrow\\) 01/07/2022\n\nWe could hard code this, but noticing there are only two date formats we can also use an ifelse() function, with one rule for single year dates like X2001.1 and a second rule for multiple year dates like X2004.05.1\nHere‚Äôs what the code looks like.\n\n  mutate(\n    date = as.Date(\n      ifelse(nchar(period)==7,\n             paste(as.numeric(substr(period, 2, 5)), '07', '01', sep='-'),\n             paste(as.numeric(substr(period, 2, 5)) + 1, '01', '01', sep='-'))\n    ))\n\nThere‚Äôs a few things going on so let‚Äôs break it down.\n\nWe start with mutate(date = as.Date(...)) to create a new variable named date that has a date format. The as.Date() function converts strings that look like dates to actual Date objects in R. Try entering as.Date(\"2024-11-21\") in the console for example.\nInside the as.Date() function we are calling ifelse(). The logical condition that is tested is whether the period string has 7 characters. So this will be TRUE for the string X2001.1 but false for the string X2004.05.1. You can test this yourself by entering nchar(\"X2001.1\") at the console.\nFor dates like X2001.1 the rule is paste(as.numeric(substr(period, 2, 5)), '07', '01', sep='-'). This extracts the year and combines it with the strings ‚Äú07‚Äù and ‚Äú01‚Äù, separated by ‚Äú-‚Äù. The result is something like ‚Äú2001-07-01‚Äù. To see this in action, try entering paste(as.numeric(substr(\"X2001.1\", 2, 5)), '07', '01', sep='-') at the console.\nFor dates like X2004.05.1 the rule is paste(as.numeric(substr(period, 2, 5)) + 1, '01', '01', sep='-'). This extracts the first year, adds 1 then combines it with the strings ‚Äú01‚Äù and ‚Äú01‚Äù, separated by ‚Äú-‚Äù. The result is something like ‚Äú2005-01-01‚Äù. To see this in action, try entering paste(as.numeric(substr(\"X2007.08.1\", 2, 5)) + 1, '01', '01', sep='-') at the console.\n\n\n\n\n\n\n\nCheckpoint\n\n\n\nIf run successfully, you should now have a new variable named date, which is also formatted as a date object. You can test this by entering is the is.Date() function from the lubridate package. Try entering the following at the console.\n\nlubridate::is.Date(df2Clean$date)\n\n\n\n\n\n\n11 Tidy up the condition variable\nThe categories of the chronic conditions still include footnotes, like Arthritis(d), or long names like Cancer (malignant neoplasms). When we come to plot these we are going to want the labels to be relatively short so we will tidy these up now.\nUse mutate() and case when() to create shorter and tidier category names for the condition variable.\n\n\n‚ò† Hint¬†11\n\n\n\n\n\nmutate(\n    condition = case_when(\n      condition==\"Arthritis(d)\" ~ \" \",\n      condition==\"Asthma\" ~ \" \",\n      condition==\"Back problems (dorsopathies)(e)\" ~ \" \",\n      condition==\"Cancer (malignant neoplasms)\" ~ \" \",\n      condition==\"Chronic obstructive pulmonary disease (COPD)(f)\" ~ \" \",\n      condition==\"Diabetes mellitus(g)\" ~ \" \",\n      condition==\"Hayfever and allergic rhinitis\" ~ \" \",\n      condition==\"Heart, stroke and vascular disease(h)\"  ~ \" \",\n      condition==\"Hypertension(i)\" ~ \" \",\n      condition==\"Kidney disease(j)\" ~ \" \",\n      condition==\"Mental and behavioural conditions(k)(l)(m)\" ~ \" \",\n      condition==\"Osteoporosis(n)\" ~ \" \"\n    )\n  )\n\n\n\n‚ò† Hint¬†11\n\n\n\n\n\n\n\n\n\n\nCheckpoint\n\n\n\nIf you view your dataframe, the categories in the updated condition name should look short and neat. You can check the length of the longest variable by pasting the code below at the console.\n\nmax(nchar(df2Clean$condition))\n\n\n\n\n\n\n12 Drop the old variable period\nNow that we have a nicely formatted date variable we won‚Äôt need the old variable period so go ahead and drop that.\n\n\n‚ò† Hint¬†12\n\n\n\n\nRemember to drop a variable you can use select() with - in front of the variable name. For example this would drop the variable speed from the cars dataset.\n\ncars |&gt; \n  select(-speed)\n\n\n\n‚ò† Hint¬†12\n\n\n\n\n\n\n\n\n\n\nCheckpoint\n\n\n\nYour tidy dataset should have 84 rows and three variables: condition, date, and percent.\n\n\n\n\n\n13 Save the clean dataset\nAmazing, you made it! The final step is to save the clean dataset locally. We can follow the code from Exercise 1 to save it in both .Rda and .csv format, using save() and write.csv() respectively.\n\n\n‚ò† Hint¬†13\n\n\n\n\nFollow the code from last time, but remember to update the file names!\n\n# Save the data in .Rda format\nsave(XXX, file = )\n\n# Save the data in .csv format\nwrite.csv(XXX,\n          file = ,\n          row.names = FALSE)\n\n\n\n‚ò† Hint¬†13\n\n\n\n\n\n\n\n\n\n\nCheckpoint\n\n\n\nYour tidy dataset should have 84 rows and three variables: condition, date, and percent.\n\n\n\n\nCongratulations, you made it!!\n\n\n\nvia GIPHY\n\n\n\n\n\n\n Back to top",
    "crumbs": [
      "Home",
      "Exercises",
      "Day 1. Data cleaning",
      "Exercise 2 (Advanced)",
      "Step-by-step guide"
    ]
  },
  {
    "objectID": "exercises/exercise4-2.html",
    "href": "exercises/exercise4-2.html",
    "title": "Step-by-step guide",
    "section": "",
    "text": "Figure¬†1: The goal for Exercise 4\n\n\n\n\n1 Set up your code file meta data\nAs before, start by setting up your code file meta information.\n\nIn RStudio, open the file exercsies/1-code/4-plot-chronic-conditions.R\nUpdate the details in the title box.\n\n\n\n\n2 Load libraries\nRemember to load all your libraries in one place at the top of the script all the libraries you need in a script in one place at the top of the file.\nStart with the usual suspects: dplyr and ggplot2. You can add more as you go.\n\n\n\n3 Load your data\nThe data might already be loaded into your R environment, but we should make this step an explicit part of the code.\nUse the load() function to load the second clean dataset from exercises/3-clean-data. If you didn‚Äôt get to the end of the data cleaning exercise you can load the data from solutions/3-clean-data instead.\n\n\n\n4 Start with a base plot\n\n\n\n\n\n\n\n\n\nAs a starting point, aim to create this line chart using geom_line(). You should be able to identify the x and y aesthetics from the axis labels above. You will also need to define the group aesthetic to make sure the line for each condition is plotted separately.\n\n\n\n5 Add points\n\n\n\n\n\n\n\n\n\nAdd points on top of the lines using geom_point()\n\n\n\n6 Add colours\n\n\n\n\n\n\n\n\n\n\n\nRemember that aes(color=, fill=) refers to different things: color refers to the outline colour of a shape, while fill refers to the inside colour of the shape. Some shapes, like the lines and solid points here, only have a color property and fill can‚Äôt be defined.\nCan you add highlight colours for the two upward trending conditions?\nTo do this:\n\nUse case_when() to add a new variable to the dataset that codes Mental health as a, Allergies as b and everything else as c. Enter ?case_when() at the console if you are having trouble remembering the syntax.\nMap this new variable to color in aes().\nDefine your color scale in scale_color_manual()\n\n\n\n‚ò† Hint¬†1\n\n\n\n\nFeel free to define whatever palette you like! Here I have used the colours #BC2C1A for the Mental health line and #377771 for the Allergies line. The other lines are coloured in grey.\n\n# Define colours\nhighlightPalette = c('#BC2C1A', '#377771', 'grey60')\n\n\n\n‚ò† Hint¬†1\n\n\n\n\n\n\n\n7 Add fill colour for the points\n\n\n\n\n\n\n\n\n\nAdd fill colour to the points by mapping fill to the same variable as colour in aes. You can then define the fill colours in scale_fill_manual()\n\n\n‚ò† Hint¬†2\n\n\n\n\nThe default shape for geom_point() is a solid circle‚Äîbecause it is solid we can‚Äôt define the fill aesthetic. To change this we can specify shape = 21 which is the code for a circle with a fill. See here for a list of all the available shapes in R.\n\n# Set shape to hollow circles\ngeom_point(shape = 21)\n\nWe can use the lighten() function from the colorspace package to specify a fill colour that is 50% lighter than the color palette.\n\n# Use the lighten() function\nscale_fill_manual(values = lighten(highlightPalette, 0.5))\n\n\n\n‚ò† Hint¬†2\n\n\n\n\n\n\n\n8 Remove the legend\n\n\n\n\n\n\n\n\n\nThe legend isn‚Äôt much use so we can turn it off here. Use the same approach as the previous exercise, setting legend.position = \"none\" in your theme().\n\n\n\n9 Remove the axis titles\n\n\n\n\n\n\n\n\n\nOne way to do this is to add the scale_* functions setting name = NULL.\n\n\n‚ò† Hint¬†3\n\n\n\n\nBecause date is a date variable, the appropriate scale is scale_x_date().\n\nscale_x_date(name = NULL)\n\n\n\n‚ò† Hint¬†3\n\n\n\n\n\n\n\n10 Adjust the ranges on the x-axis and y-axis\n\n\n\n\n\n\n\n\n\nGive the plot some breathing room by expanding the range of the x and y axes. You can do this by setting limits = c(min, max) in scale_x_date() and scale_y_continuous(). Set the x axis to run from 2000 to 2023 and set the y axis to run from 0 to 30.\n\n\n‚ò† Hint¬†4\n\n\n\n\nThe x-axis is a date variable so we need to specify the max and min of the range as a date. We can do this using the as.Date() function, which converts strings representations of dates to Date objects. For example, the date January 1 2000 would be as.Date('2000-01-01'). We can also set the date_labels and breaks arguments.\n\nscale_x_date(NULL, \n               limits = c(as.Date('2000-01-01'),\n                          as.Date('2023-01-01')),\n               date_labels = '%Y',\n               breaks = as.Date(c('2000-01-01',\n                                  '2005-01-01',\n                                  '2010-01-01',\n                                  '2015-01-01',\n                                  '2020-01-01',\n                                  '2023-01-01')))\n\n\n\n‚ò† Hint¬†4\n\n\n\n\n\n\n\n11 Add title, subtitle, and caption\n\n\n\n\n\n\n\n\n\nDo this using the labs() function, as in Exercise 3.\n\n\n\n12 Add text labels\n\n\n\n\n\n\n\n\n\nAdd text labels using using geom_text(), setting the y aesthetic to percent and the x aesthetic to 2023-01-01.\n\n\n‚ò† Hint¬†5\n\n\n\n\nWe only want the label for the last data point‚Äîto achieve this we can group the dataset by condition and then subset to the last observation within each condition using slice_tail(). This can be done on the fly within geom_text(), as below.\n\n  geom_text(\n    data = df2Plot |&gt; \n      group_by(condition) |&gt; \n      slice_tail(n=1),\n    aes(\n      x = as.Date('2023-01-01'),\n      y = percent,\n      label = condition))\n\n\n\n‚ò† Hint¬†5\n\n\n\n\n\n\n\n13 Shift text labels to the right and make them smaller\n\n\n\n\n\n\n\n\n\nTry setting the size and hjust arguments in geom_text() to shift the labels to the right and shrink them a bit.\n\n\n‚ò† Hint¬†6\n\n\n\n\nYou probably find that the text labels disappear outside of the plot area. There are two tricks to addressing this. First we have to increase the plot margin on the right-hand side of the plot by setting plot.margin in our theme(). This gives some space for the labels to appear. Second we have to include the line coord_cartesian(clip = 'off') in our ggplot code. This allows plot elements to appear outside the plot panel, in the margin space that we have created.\nYour updated code should include\n\n  coord_cartesian(clip = 'off') +\n  theme(\n    ... # other theme settings\n    plot.margin = margin(t=10, b=10, r=80, l=10),\n  )\n\n\n\n‚ò† Hint¬†6\n\n\n\n\n\n\n\n14 Remove the grey background\n\n\n\n\n\n\n\n\n\nLet‚Äôs get rid of the default grey background. We can do this by editing the panel background.\n\n\n‚ò† Hint¬†7\n\n\n\n\nTry setting panel.background = element_blank() in your theme()\n\n\n‚ò† Hint¬†7\n\n\n\n\n\n\n\n15 Add in major grid lines\n\n\n\n\n\n\n\n\n\nWe can add in major grid lines by setting panel.grid.major in your theme\n\n\n‚ò† Hint¬†8\n\n\n\n\nTry setting panel.grid.major = element_line(color = 'grey90') in your theme()\n\n\n‚ò† Hint¬†8\n\n\n\n\n\n\n\n16 Remove axis ticks\n\n\n\n\n\n\n\n\n\nYou can get rid of the axis ticks by setting axis.ticks() in the theme().\n\n\n\n17 Increase the line size for the highlighted lines\n\n\n\n\n\n\n\n\n\nAs well as emphasising the key lines for Mental health and Allergies using colour, we can add extra emphasise by increasing the line size relative to the other conditions. To do this we need to set a new aesthetic linewidth which we can then control by setting scale_linewidth_manual().\n\n\n‚ò† Hint¬†9\n\n\n\n\nYour aes() should look something like this\n\naes(\n  y = percent,\n  x = date,\n  group = condition,\n  color = highlight,\n  fill = highlight,\n  linewidth = highlight)\n\n\n\n‚ò† Hint¬†9: Then add scale_linewidth_manual(values = c(1.5, 1.5, 0.5)). The first two numbers are for Mental health and Allergies, the last number is for the other lines. Play with different numbers to get line widths that you like.\n\n\n\n\n\n\n\n18 Emphasise the key words in the title\n\n\n\n\n\n\n\n\n\nFollow the example in Exercise 3 to emphasise the key words in the title.\n\n\n‚ò† Hint¬†10\n\n\n\n\nRemember to load the ggtext library and set plot.title = element_markdown() in the theme().\n\n\n‚ò† Hint¬†10\n\n\n\n\n\n\n\n19 Add text hierarchy in the title, subtitle and caption\n\n\n\n\n\n\n\n\n\nEdit the plot.title, plot.subtitle, and plot.caption arguments in theme() to achieve this.\n\n\n‚ò† Hint¬†11\n\n\n\n\nFor example, including plot.subtitle = element_text(size=10, color = 'grey60', face = 'bold') will alter the colour, font size and font face for the subtitle.\n\n\n‚ò† Hint¬†11\n\n\n\n\n\n\n\n20 Add percentage symbol to y-axis label\n\n\n\n\n\n\n\n\n\nThis is a nice subtle way to communicate the meaning of the y-axis without using up too much space or ink. To achieve this you need to edit scale_y_continuous().\n\n\n‚ò† Hint¬†12\n\n\n\n\nUse the labels argument in scale_y_continuous() to define the axis text labels. You must supply as many labels as there are major breaks in the scale (corresponding to the major gridlines).\n\nscale_y_continuous(name = NULL, \n                   limits = c(0, 30), \n                   labels = c('0', '10', '20', '30%'))\n\n\n\n‚ò† Hint¬†12\n\n\n\n\n\n\n\n21 Tidy up condition labels\n\n\n\n\n\n\n\n\n\nThe labels for the conditions are a bit messy. We can take a few steps to tidy these up:\n\nDrop some of the overlapping conditions in the dataframe that gets passed to geom_text()\nAll the percentage for the final data point for our two highlighted conditions.\n\nStep 1 can be achieved by adding a filter() in the code that defines the text label data. Step 2 can be achieved by defining a new variable in the underlying chart dataset. This new variable can should combine the condition and the percent for the highlight lines and just the condition for the other lines.\n\n\n‚ò† Hint¬†13\n\n\n\n\nOne way to drop overlapping labels is to filter them out on the fly in the code that defines the defines the text label data. The code below combines ! and %in% to say filter to conditions that are not in the vector.\n\ngeom_text(\n  data = df2Plot |&gt; \n    group_by(condition) |&gt; \n    slice_tail(n=1) |&gt; \n    filter(! condition %in% c(\"Heart, stroke & vascular\", \"COPD\")),\n  aes(...)\n\nCreate a new variable to add the percent for the final data point:\n\ndf2Plot &lt;- df2Clean |&gt;\n  mutate(\n    highlight = case_when(\n      condition==\"Mental health\" ~ 'a',\n      condition==\"Allergies\" ~ 'b',\n      .default = 'c'),\n    label2 = ifelse(\n      highlight==\"c\", condition, \n      paste0(condition, \" (\", percent, \"%)\")\n    ))\n\n\n\n‚ò† Hint¬†13: To help see what this code is doing, try entering paste0(\"COPD\", \" (\", \"20.4%\", \"%)\") at the console.\n\n\n\n\n\n\nYou are a certified all star!!\n\n\n\nvia GIPHY\n\n\n\n\n\n\n Back to top",
    "crumbs": [
      "Home",
      "Exercises",
      "Day 2. Visualisation",
      "Exercise 4 (Advanced)",
      "Step-by-step guide"
    ]
  },
  {
    "objectID": "lectures/lecture-storytelling.html#storytelling-with-data",
    "href": "lectures/lecture-storytelling.html#storytelling-with-data",
    "title": "Data Viz with R",
    "section": "Storytelling with data",
    "text": "Storytelling with data"
  },
  {
    "objectID": "lectures/lecture-storytelling.html#section",
    "href": "lectures/lecture-storytelling.html#section",
    "title": "Data Viz with R",
    "section": "",
    "text": "Beach erosion at Collaroy in the aftermath of the 2016 ‚Äòsuperstorm‚Äô that struck Australia‚Äôs east coast. Photo: UNSW Sydney"
  },
  {
    "objectID": "lectures/lecture-storytelling.html#section-1",
    "href": "lectures/lecture-storytelling.html#section-1",
    "title": "Data Viz with R",
    "section": "",
    "text": "From enviroscienceinc.com"
  },
  {
    "objectID": "lectures/lecture-storytelling.html#section-2",
    "href": "lectures/lecture-storytelling.html#section-2",
    "title": "Data Viz with R",
    "section": "",
    "text": "Map of Australia showing the 21 coastal locations from which Aboriginal stories about coastal inundation are described. From Nunn and Reid (2016)"
  },
  {
    "objectID": "lectures/lecture-storytelling.html#section-3",
    "href": "lectures/lecture-storytelling.html#section-3",
    "title": "Data Viz with R",
    "section": "",
    "text": "The river now known as the Georges River, but then known as Kai‚Äôeemah, joined with the Goolay‚Äôyari, or Cooks River and flowed through one of the swamps that once were Botany Bay.\n\n\nThis story, quoted in Nunn and Reid (2016), was related by Frances Bodkin, a Dharawal woman, who heard it from her mother."
  },
  {
    "objectID": "lectures/lecture-storytelling.html#section-4",
    "href": "lectures/lecture-storytelling.html#section-4",
    "title": "Data Viz with R",
    "section": "",
    "text": "A great storm came up, and huge waves washed into the Kai‚Äôeemah destroying much of the swampland used for food gathering. The waves crashed into the shore so fiercely that they washed over the land\n\n\nThis story, quoted in Nunn and Reid (2016), was related by Frances Bodkin, a Dharawal woman, who heard it from her mother."
  },
  {
    "objectID": "lectures/lecture-storytelling.html#section-5",
    "href": "lectures/lecture-storytelling.html#section-5",
    "title": "Data Viz with R",
    "section": "",
    "text": "Instead of the swamps, there was a great bay, and where the Kai‚Äôeemah had met the sea there was high mountains of sand. The two rivers now no longer joined together, but ran into the sea separately.\n\n\nThis story, quoted in Nunn and Reid (2016), was related by Frances Bodkin, a Dharawal woman, who heard it from her mother."
  },
  {
    "objectID": "lectures/lecture-storytelling.html#section-6",
    "href": "lectures/lecture-storytelling.html#section-6",
    "title": "Data Viz with R",
    "section": "",
    "text": "The compact disc (CD) co-developed by Philips and Sony in 1982 Wikipedia"
  },
  {
    "objectID": "lectures/lecture-storytelling.html#section-7",
    "href": "lectures/lecture-storytelling.html#section-7",
    "title": "Data Viz with R",
    "section": "",
    "text": "8-inch, 5¬º-inch, and 3¬Ω-inch floppy disks. Invented in 1971 by IBM. From Wikipedia"
  },
  {
    "objectID": "lectures/lecture-storytelling.html#section-8",
    "href": "lectures/lecture-storytelling.html#section-8",
    "title": "Data Viz with R",
    "section": "",
    "text": "Ogham Stone. 400AD-1000AD mallonireland.com"
  },
  {
    "objectID": "lectures/lecture-storytelling.html#section-9",
    "href": "lectures/lecture-storytelling.html#section-9",
    "title": "Data Viz with R",
    "section": "",
    "text": "Quipu in the Museo Machu Picchu, Casa Concha, Cusco. Andead South America 2600 BC ‚Äì c.1600 AD Wikipedia"
  },
  {
    "objectID": "lectures/lecture-storytelling.html#how-storytelling-can-improve-data-visualisation-1",
    "href": "lectures/lecture-storytelling.html#how-storytelling-can-improve-data-visualisation-1",
    "title": "Data Viz with R",
    "section": "How storytelling can improve data visualisation",
    "text": "How storytelling can improve data visualisation\n\nAesthetics\nNarrative\nEmotion"
  },
  {
    "objectID": "lectures/lecture-storytelling.html#section-11",
    "href": "lectures/lecture-storytelling.html#section-11",
    "title": "Data Viz with R",
    "section": "",
    "text": "Aesthetics"
  },
  {
    "objectID": "lectures/lecture-storytelling.html#aesthetics-in-storytelling",
    "href": "lectures/lecture-storytelling.html#aesthetics-in-storytelling",
    "title": "Data Viz with R",
    "section": "Aesthetics in storytelling",
    "text": "Aesthetics in storytelling\n\n\n\n\n\n\nRomeo and Juliet (1996)\n\n\n\n\n\n\n\nGnomeo and Juliet (2011)\n\n\n\n\n\n\n\n\n\nWest Side Story (1961)\n\n\n\n\n\n\n\nRomeo and Juliet (1968)\n\n\n\n\n\n\n‚ÄúRomeo + Juliet‚Äù (1996): Aesthetic: Modern, Urban\n‚ÄúWest Side Story‚Äù (1961): Aesthetic: 1950s New York City, Musical\n‚ÄúGnomeo & Juliet‚Äù (2011): Aesthetic: Animated, Family-Friendly\n‚ÄúRomeo and Juliet‚Äù (1968): Aesthetic: Historical, Authentic"
  },
  {
    "objectID": "lectures/lecture-storytelling.html#aesthetic-usability-effect",
    "href": "lectures/lecture-storytelling.html#aesthetic-usability-effect",
    "title": "Data Viz with R",
    "section": "Aesthetic-Usability Effect",
    "text": "Aesthetic-Usability Effect\n\nPeople perceive more aesthetic designs as much more intuitive than those considered to be less aesthetically pleasing."
  },
  {
    "objectID": "lectures/lecture-storytelling.html#section-12",
    "href": "lectures/lecture-storytelling.html#section-12",
    "title": "Data Viz with R",
    "section": "",
    "text": "Ugly charts are harder to read‚Ä¶ and harder to believe"
  },
  {
    "objectID": "lectures/lecture-storytelling.html#aesthetics-in-data-visualisation",
    "href": "lectures/lecture-storytelling.html#aesthetics-in-data-visualisation",
    "title": "Data Viz with R",
    "section": "Aesthetics in data visualisation",
    "text": "Aesthetics in data visualisation\n\n\nColor\nFont\nText Hierarchy"
  },
  {
    "objectID": "lectures/lecture-storytelling.html#aesthetics-in-data-visualisation-1",
    "href": "lectures/lecture-storytelling.html#aesthetics-in-data-visualisation-1",
    "title": "Data Viz with R",
    "section": "Aesthetics in data visualisation",
    "text": "Aesthetics in data visualisation\n\n\nColor\n\n\nFont\n\n\nText hierarchy"
  },
  {
    "objectID": "lectures/lecture-storytelling.html#section-13",
    "href": "lectures/lecture-storytelling.html#section-13",
    "title": "Data Viz with R",
    "section": "",
    "text": "See flourish.studio/blog/color-in-data-visualization"
  },
  {
    "objectID": "lectures/lecture-storytelling.html#section-14",
    "href": "lectures/lecture-storytelling.html#section-14",
    "title": "Data Viz with R",
    "section": "",
    "text": "See flourish.studio/blog/color-in-data-visualization"
  },
  {
    "objectID": "lectures/lecture-storytelling.html#section-15",
    "href": "lectures/lecture-storytelling.html#section-15",
    "title": "Data Viz with R",
    "section": "",
    "text": "See flourish.studio/blog/color-in-data-visualization"
  },
  {
    "objectID": "lectures/lecture-storytelling.html#section-16",
    "href": "lectures/lecture-storytelling.html#section-16",
    "title": "Data Viz with R",
    "section": "",
    "text": "Nikkei Stock Average (Nikkei 225). See indexes.nikkei.co.jp"
  },
  {
    "objectID": "lectures/lecture-storytelling.html#section-17",
    "href": "lectures/lecture-storytelling.html#section-17",
    "title": "Data Viz with R",
    "section": "",
    "text": "Nikkei Stock Average (Nikkei 225). See indexes.nikkei.co.jp"
  },
  {
    "objectID": "lectures/lecture-storytelling.html#colours-in-r",
    "href": "lectures/lecture-storytelling.html#colours-in-r",
    "title": "Data Viz with R",
    "section": "Colours in R",
    "text": "Colours in R\n\nlibrary(RColorBrewer)\ndisplay.brewer.all()"
  },
  {
    "objectID": "lectures/lecture-storytelling.html#online-palette-generators",
    "href": "lectures/lecture-storytelling.html#online-palette-generators",
    "title": "Data Viz with R",
    "section": "Online palette generators",
    "text": "Online palette generators\n\ncoolors.co\nColorBrewer 2.0\n136 Shades of Grey"
  },
  {
    "objectID": "lectures/lecture-storytelling.html#aesthetics-in-data-visualisation-2",
    "href": "lectures/lecture-storytelling.html#aesthetics-in-data-visualisation-2",
    "title": "Data Viz with R",
    "section": "Aesthetics in data visualisation",
    "text": "Aesthetics in data visualisation\n\n\nColor\n\n\nFont\n\n\nText hierarchy"
  },
  {
    "objectID": "lectures/lecture-storytelling.html#font",
    "href": "lectures/lecture-storytelling.html#font",
    "title": "Data Viz with R",
    "section": "Font",
    "text": "Font\n\nWords have meaning. Type has spirit. The combination is spectacular.\n\n\n‚ÄîPaula Scher"
  },
  {
    "objectID": "lectures/lecture-storytelling.html#section-18",
    "href": "lectures/lecture-storytelling.html#section-18",
    "title": "Data Viz with R",
    "section": "",
    "text": "See blog.datawrapper.de/fonts-for-data-visualization/"
  },
  {
    "objectID": "lectures/lecture-storytelling.html#section-19",
    "href": "lectures/lecture-storytelling.html#section-19",
    "title": "Data Viz with R",
    "section": "",
    "text": "Living among snakes in Queensland, Australia by Diana MacDonald. See didoesdigital.com/snakes"
  },
  {
    "objectID": "lectures/lecture-storytelling.html#aesthetics-in-data-visualisation-3",
    "href": "lectures/lecture-storytelling.html#aesthetics-in-data-visualisation-3",
    "title": "Data Viz with R",
    "section": "Aesthetics in data visualisation",
    "text": "Aesthetics in data visualisation\n\n\nColor\n\n\nFont\n\n\nText hierarchy"
  },
  {
    "objectID": "lectures/lecture-storytelling.html#section-21",
    "href": "lectures/lecture-storytelling.html#section-21",
    "title": "Data Viz with R",
    "section": "",
    "text": "Code\nlibrary(ggplot2)\nggplot(\n  data=ToothGrowth, \n  aes(x=dose, y=len, fill=supp)) + \n  geom_col(position = 'dodge') +\n  labs(\n    title = \"The Effect of Vitamin C on Tooth Growth\",\n    x = \"Dose\",\n    y = \"Tooth growth\"\n       ) +\n  scale_fill_manual(\"Supplement\", values = c('lightblue', 'maroon'), labels = c('Orange juice', 'Vitamin C'))"
  },
  {
    "objectID": "lectures/lecture-storytelling.html#section-22",
    "href": "lectures/lecture-storytelling.html#section-22",
    "title": "Data Viz with R",
    "section": "",
    "text": "Level Up Your Plots by Cara Thompson see cararthompson.com/talks"
  },
  {
    "objectID": "lectures/lecture-storytelling.html#section-23",
    "href": "lectures/lecture-storytelling.html#section-23",
    "title": "Data Viz with R",
    "section": "",
    "text": "Narrative"
  },
  {
    "objectID": "lectures/lecture-storytelling.html#narrative-in-storytelling",
    "href": "lectures/lecture-storytelling.html#narrative-in-storytelling",
    "title": "Data Viz with R",
    "section": "Narrative in storytelling",
    "text": "Narrative in storytelling\n\n\nKurt Vonnegut on the Shapes of Stories. From YouTube"
  },
  {
    "objectID": "lectures/lecture-storytelling.html#narrative-in-data-visualisation",
    "href": "lectures/lecture-storytelling.html#narrative-in-data-visualisation",
    "title": "Data Viz with R",
    "section": "Narrative in data visualisation",
    "text": "Narrative in data visualisation\n\n\nTitles and annotations\nNarrative structure\nInteractivity"
  },
  {
    "objectID": "lectures/lecture-storytelling.html#narrative-in-data-visualisation-1",
    "href": "lectures/lecture-storytelling.html#narrative-in-data-visualisation-1",
    "title": "Data Viz with R",
    "section": "Narrative in data visualisation",
    "text": "Narrative in data visualisation\n\n\nTitles and annotations\n\n\nNarrative structure\n\n\nInteractivity"
  },
  {
    "objectID": "lectures/lecture-storytelling.html#section-24",
    "href": "lectures/lecture-storytelling.html#section-24",
    "title": "Data Viz with R",
    "section": "",
    "text": "How can the next government improve hospital waits in England? by The Health Foundation. See health.ork.uk"
  },
  {
    "objectID": "lectures/lecture-storytelling.html#section-25",
    "href": "lectures/lecture-storytelling.html#section-25",
    "title": "Data Viz with R",
    "section": "",
    "text": "How can the next government improve hospital waits in England? by The Health Foundation. See health.ork.uk"
  },
  {
    "objectID": "lectures/lecture-storytelling.html#section-26",
    "href": "lectures/lecture-storytelling.html#section-26",
    "title": "Data Viz with R",
    "section": "",
    "text": "plot(astsa::birth)"
  },
  {
    "objectID": "lectures/lecture-storytelling.html#section-27",
    "href": "lectures/lecture-storytelling.html#section-27",
    "title": "Data Viz with R",
    "section": "",
    "text": "Visualising the Baby Boom by Kieran Healy"
  },
  {
    "objectID": "lectures/lecture-storytelling.html#section-28",
    "href": "lectures/lecture-storytelling.html#section-28",
    "title": "Data Viz with R",
    "section": "",
    "text": "society6.com"
  },
  {
    "objectID": "lectures/lecture-storytelling.html#narrative-in-data-visualisation-2",
    "href": "lectures/lecture-storytelling.html#narrative-in-data-visualisation-2",
    "title": "Data Viz with R",
    "section": "Narrative in data visualisation",
    "text": "Narrative in data visualisation\n\n\nTitles and annotations\n\n\nNarrative structure\n\n\nInteractivity"
  },
  {
    "objectID": "lectures/lecture-storytelling.html#narrative-structure",
    "href": "lectures/lecture-storytelling.html#narrative-structure",
    "title": "Data Viz with R",
    "section": "Narrative structure",
    "text": "Narrative structure\n\nWe are the storytelling ape, and we are incredibly good at it. As soon as we are old enough to want to understand what is happening around us, we begin to live in a world of stories. We think in narrative\n\n\n‚ÄîTerry Pratchett"
  },
  {
    "objectID": "lectures/lecture-storytelling.html#section-29",
    "href": "lectures/lecture-storytelling.html#section-29",
    "title": "Data Viz with R",
    "section": "",
    "text": "A Star is Born (2018) starring Lady Gaga"
  },
  {
    "objectID": "lectures/lecture-storytelling.html#section-30",
    "href": "lectures/lecture-storytelling.html#section-30",
    "title": "Data Viz with R",
    "section": "",
    "text": "A Star is Born (1976) starring Barbra Sreisand"
  },
  {
    "objectID": "lectures/lecture-storytelling.html#section-31",
    "href": "lectures/lecture-storytelling.html#section-31",
    "title": "Data Viz with R",
    "section": "",
    "text": "A Star is Born (1954) starring Judy Garland"
  },
  {
    "objectID": "lectures/lecture-storytelling.html#section-32",
    "href": "lectures/lecture-storytelling.html#section-32",
    "title": "Data Viz with R",
    "section": "",
    "text": "A Star is Born (1937) starring Janet Gaynor"
  },
  {
    "objectID": "lectures/lecture-storytelling.html#narrative-structure-1",
    "href": "lectures/lecture-storytelling.html#narrative-structure-1",
    "title": "Data Viz with R",
    "section": "Narrative structure",
    "text": "Narrative structure\nThe simplest story structure:\n\nSetup\nConflict\nResolution"
  },
  {
    "objectID": "lectures/lecture-storytelling.html#section-33",
    "href": "lectures/lecture-storytelling.html#section-33",
    "title": "Data Viz with R",
    "section": "",
    "text": "Sickly sweet: It‚Äôs time for a sugary drinks tax The Grattan Institute"
  },
  {
    "objectID": "lectures/lecture-storytelling.html#section-34",
    "href": "lectures/lecture-storytelling.html#section-34",
    "title": "Data Viz with R",
    "section": "",
    "text": "Sickly sweet: It‚Äôs time for a sugary drinks tax The Grattan Institute"
  },
  {
    "objectID": "lectures/lecture-storytelling.html#section-35",
    "href": "lectures/lecture-storytelling.html#section-35",
    "title": "Data Viz with R",
    "section": "",
    "text": "Sickly sweet: It‚Äôs time for a sugary drinks tax The Grattan Institute"
  },
  {
    "objectID": "lectures/lecture-storytelling.html#section-36",
    "href": "lectures/lecture-storytelling.html#section-36",
    "title": "Data Viz with R",
    "section": "",
    "text": "Sickly sweet: It‚Äôs time for a sugary drinks tax The Grattan Institute"
  },
  {
    "objectID": "lectures/lecture-storytelling.html#narrative-structure-2",
    "href": "lectures/lecture-storytelling.html#narrative-structure-2",
    "title": "Data Viz with R",
    "section": "Narrative structure",
    "text": "Narrative structure\n\n\nDiabetes has nearly tripled since 2000\n\n\n\n\nOne can of soft drink can have nearly a day‚Äôs worth of sugar\n\n\n\n\nA tiered tax encourages manufacturers to reduce the sugar in their drinks\nUnder our proposed tax, people would switch from high-sugar drinks to low- or no-sugar drinks"
  },
  {
    "objectID": "lectures/lecture-storytelling.html#narrative-in-data-visualisation-3",
    "href": "lectures/lecture-storytelling.html#narrative-in-data-visualisation-3",
    "title": "Data Viz with R",
    "section": "Narrative in data visualisation",
    "text": "Narrative in data visualisation\n\n\nTitles and annotations\n\n\nNarrative structure\n\n\nInteractivity"
  },
  {
    "objectID": "lectures/lecture-storytelling.html#section-37",
    "href": "lectures/lecture-storytelling.html#section-37",
    "title": "Data Viz with R",
    "section": "",
    "text": "What if? by Owen Cho. See healthpolicy.github.io/nhs_whatif"
  },
  {
    "objectID": "lectures/lecture-storytelling.html#section-38",
    "href": "lectures/lecture-storytelling.html#section-38",
    "title": "Data Viz with R",
    "section": "",
    "text": "Emotion"
  },
  {
    "objectID": "lectures/lecture-storytelling.html#emotion-in-data-visualisation",
    "href": "lectures/lecture-storytelling.html#emotion-in-data-visualisation",
    "title": "Data Viz with R",
    "section": "Emotion in data visualisation",
    "text": "Emotion in data visualisation\n\nThey may forget what you said ‚Äî but they will never forget how you made them feel.\n\n\n‚ÄîCarl W. Buehner"
  },
  {
    "objectID": "lectures/lecture-storytelling.html#emotion-in-data-visualisation-1",
    "href": "lectures/lecture-storytelling.html#emotion-in-data-visualisation-1",
    "title": "Data Viz with R",
    "section": "Emotion in data visualisation",
    "text": "Emotion in data visualisation\n\n\nSurprise\nDelight\nConcern"
  },
  {
    "objectID": "lectures/lecture-storytelling.html#emotion-in-data-visualisation-2",
    "href": "lectures/lecture-storytelling.html#emotion-in-data-visualisation-2",
    "title": "Data Viz with R",
    "section": "Emotion in data visualisation",
    "text": "Emotion in data visualisation\n\n\nSurprise\n\n\nDelight\n\n\nConcern"
  },
  {
    "objectID": "lectures/lecture-storytelling.html#section-39",
    "href": "lectures/lecture-storytelling.html#section-39",
    "title": "Data Viz with R",
    "section": "",
    "text": "By Mona Chalabi via instagram"
  },
  {
    "objectID": "lectures/lecture-storytelling.html#emotion-in-data-visualisation-3",
    "href": "lectures/lecture-storytelling.html#emotion-in-data-visualisation-3",
    "title": "Data Viz with R",
    "section": "Emotion in data visualisation",
    "text": "Emotion in data visualisation\n\n\nSurprise\n\n\nDelight\n\n\nConcern"
  },
  {
    "objectID": "lectures/lecture-storytelling.html#section-40",
    "href": "lectures/lecture-storytelling.html#section-40",
    "title": "Data Viz with R",
    "section": "",
    "text": "Beautiful news daily from Information is beautiful"
  },
  {
    "objectID": "lectures/lecture-storytelling.html#emotion-in-data-visualisation-4",
    "href": "lectures/lecture-storytelling.html#emotion-in-data-visualisation-4",
    "title": "Data Viz with R",
    "section": "Emotion in data visualisation",
    "text": "Emotion in data visualisation\n\n\nSurprise\n\n\nDelight\n\n\nConcern"
  },
  {
    "objectID": "lectures/lecture-storytelling.html#section-41",
    "href": "lectures/lecture-storytelling.html#section-41",
    "title": "Data Viz with R",
    "section": "",
    "text": "little picture: sea level trend. See climate.esa.int/en/littlepicturescompetition"
  },
  {
    "objectID": "lectures/lecture-storytelling.html#mini-exercise",
    "href": "lectures/lecture-storytelling.html#mini-exercise",
    "title": "Data Viz with R",
    "section": "Mini-Exercise",
    "text": "Mini-Exercise\n\n 15 minutes\n\nPractive storytelling with data\n\n\n\n\n\n\nGoalPlotStarter code\n\n\nUse storytelling tricks to enhance the starter plot examining popular baby names over time. Choose any names you like!\n\nColour (try coolors.co)\nTitle and subtitle\nText hierarchy\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nlibrary(babynames)\nlibrary(ggplot2)\nlibrary(dplyr)\nlibrary(ggtext)\n\nbabynames |&gt; \n  filter(name %in% c(\"Olivia\", \"Mia\", \"Luna\") & sex=='F') |&gt; \n  ggplot(aes(x = year, y = n, color = name)) +\n  geom_line(linewidth = 2) +\n  labs(\n    title = \"XYZ\",\n    subtitle = \"ABC\"\n  ) +\n  theme(\n    plot.title.position = \"plot\",\n    plot.title = element_text(size = 8),\n    plot.subtitle = element_text(size = 8)\n  )"
  },
  {
    "objectID": "lectures/lecture-storytelling.html#academic-references",
    "href": "lectures/lecture-storytelling.html#academic-references",
    "title": "Data Viz with R",
    "section": "Academic References",
    "text": "Academic References\n\n\nNunn, Patrick D, and Nicholas J Reid. 2016. ‚ÄúAboriginal Memories of Inundation of the Australian Coast Dating from More Than 7000 Years Ago.‚Äù Australian Geographer 47 (1): 11‚Äì47. https://doi.org/10.1080/00049182.2015.1077539."
  },
  {
    "objectID": "lectures/lecture-git-github.html#reproducible-research-with-git-and-github",
    "href": "lectures/lecture-git-github.html#reproducible-research-with-git-and-github",
    "title": "Data Viz with R",
    "section": "Reproducible research with Git and GitHub",
    "text": "Reproducible research with Git and GitHub"
  },
  {
    "objectID": "lectures/lecture-git-github.html#the-challenge",
    "href": "lectures/lecture-git-github.html#the-challenge",
    "title": "Data Viz with R",
    "section": "The Challenge",
    "text": "The Challenge\nAs data analysts, we produce a lot of files\n\ncode\nfigures\ntables\nreports\n\nOrganising these files is an important, albeit often unglamorous, part of our job."
  },
  {
    "objectID": "lectures/lecture-git-github.html#the-challenge-1",
    "href": "lectures/lecture-git-github.html#the-challenge-1",
    "title": "Data Viz with R",
    "section": "The Challenge",
    "text": "The Challenge\n\nManaging versions What do you do with old code?\nEnsuring reproducibility Can others reproduce your results? What about your future self?\nFacilitating collaboration Can other team members easily contribute?"
  },
  {
    "objectID": "lectures/lecture-git-github.html#the-old-school-solution",
    "href": "lectures/lecture-git-github.html#the-old-school-solution",
    "title": "Data Viz with R",
    "section": "The old school solution üõµ",
    "text": "The old school solution üõµ\nThe old school solution combines many practical strategies:\n\n\nUsing file naming conventions to track different file versions\n\nanalysis-16jun2024.do\nanalysis-19jun2024-mh.do\nanalysis-final.do\nanalysis-final-final.do\n\nNote changes directly in code comments or separate documentation\nUse shared folders, google drive etc\nShare code and code snippets over email, slack etc"
  },
  {
    "objectID": "lectures/lecture-git-github.html#the-old-school-solution-1",
    "href": "lectures/lecture-git-github.html#the-old-school-solution-1",
    "title": "Data Viz with R",
    "section": "The old school solution üõµ",
    "text": "The old school solution üõµ\n\nThis is ok(ish) for one person working on a small project. But if the project is large, involves many people or goes on for a long time this approach very quickly breaks down"
  },
  {
    "objectID": "lectures/lecture-git-github.html#the-new-school-solution",
    "href": "lectures/lecture-git-github.html#the-new-school-solution",
    "title": "Data Viz with R",
    "section": "The new school solution üöÄ",
    "text": "The new school solution üöÄ\nThe new school solution is to use dedicated version control software.\nThere are a few options out there but by far the most popular choice is the combination of git + GitHub"
  },
  {
    "objectID": "lectures/lecture-git-github.html#section",
    "href": "lectures/lecture-git-github.html#section",
    "title": "Data Viz with R",
    "section": "",
    "text": "Via git-scm.com\n\n\nGit is software for tracking different versions of code files you are working on locally.\n\n\n\nVia logos-world.net\n\n\nGitHub is a cloud-based platform for sharing and collaborating on projects managed with Git"
  },
  {
    "objectID": "lectures/lecture-git-github.html#how-does-it-work",
    "href": "lectures/lecture-git-github.html#how-does-it-work",
    "title": "Data Viz with R",
    "section": "How does it work?",
    "text": "How does it work?\nCommitting, branching and merging with Git"
  },
  {
    "objectID": "lectures/lecture-git-github.html#how-does-it-work-1",
    "href": "lectures/lecture-git-github.html#how-does-it-work-1",
    "title": "Data Viz with R",
    "section": "How does it work?",
    "text": "How does it work?\nCommitting, branching and merging with Git"
  },
  {
    "objectID": "lectures/lecture-git-github.html#how-does-it-work-2",
    "href": "lectures/lecture-git-github.html#how-does-it-work-2",
    "title": "Data Viz with R",
    "section": "How does it work?",
    "text": "How does it work?\nSharing versions with GitHub"
  },
  {
    "objectID": "lectures/lecture-git-github.html#section-1",
    "href": "lectures/lecture-git-github.html#section-1",
    "title": "Data Viz with R",
    "section": "",
    "text": "Illustrations from the Openscapes blog GitHub for supporting, contributing, and failing safely by Allison Horst and Julia Lowndes."
  },
  {
    "objectID": "lectures/lecture-git-github.html#how-does-it-work-3",
    "href": "lectures/lecture-git-github.html#how-does-it-work-3",
    "title": "Data Viz with R",
    "section": "How does it work?",
    "text": "How does it work?\nSharing versions with GitHub"
  },
  {
    "objectID": "lectures/lecture-git-github.html#how-does-it-work-4",
    "href": "lectures/lecture-git-github.html#how-does-it-work-4",
    "title": "Data Viz with R",
    "section": "How does it work?",
    "text": "How does it work?\nSharing versions with GitHub"
  },
  {
    "objectID": "lectures/lecture-git-github.html#it-seems-a-bit-complicated",
    "href": "lectures/lecture-git-github.html#it-seems-a-bit-complicated",
    "title": "Data Viz with R",
    "section": "It seems a bit complicated",
    "text": "It seems a bit complicated\n\nVia GIPHY\nIs it worth it?"
  },
  {
    "objectID": "lectures/lecture-git-github.html#yes-it-is-definitely-worth-it",
    "href": "lectures/lecture-git-github.html#yes-it-is-definitely-worth-it",
    "title": "Data Viz with R",
    "section": "Yes!! It is definitely worth it!",
    "text": "Yes!! It is definitely worth it!\n\n\nVersion control | Essential for reproducibility\nCollaboration | OpenSAFELY, OHDSI, R package development\nOrganisation | e.g.¬†Code, data & outputs all stored together\nEasy web presence | e.g.¬†any public GitHub repo; these slides!\nGreat for teaching\nPowerful search\nIssue tracking | Hyperlink the bug, discussion about the bug & the solution!\nIt is all free*\n\n\n\n\n*Well, mostly. The free products will cover most academic/research use cases."
  },
  {
    "objectID": "lectures/lecture-git-github.html#lets-check-out-an-example",
    "href": "lectures/lecture-git-github.html#lets-check-out-an-example",
    "title": "Data Viz with R",
    "section": "Let‚Äôs Check out an example",
    "text": "Let‚Äôs Check out an example\n\ngithub.com/CBDRH/vaccineQueueNetworks\n\n\n\nIf reading this at home explore the repo for:\nCommit history\nBranches\nVersion comparison"
  },
  {
    "objectID": "lectures/lecture-git-github.html#lets-check-out-an-example-1",
    "href": "lectures/lecture-git-github.html#lets-check-out-an-example-1",
    "title": "Data Viz with R",
    "section": "Let‚Äôs check out an example",
    "text": "Let‚Äôs check out an example\nYou can even compare difference versions of images!\n\n\nYou can try this example here"
  },
  {
    "objectID": "lectures/lecture-git-github.html#working-locally-git-client",
    "href": "lectures/lecture-git-github.html#working-locally-git-client",
    "title": "Data Viz with R",
    "section": "Working locally: Git client",
    "text": "Working locally: Git client\nTo use Git on your computer you need a Git Client. There are heaps of git clients available, with different pros and cons. Here are a few examples:\n\n\n\n1. Command line\n\nTerminal (Mac)\nGit bash (Windows)\nPowerShell (Windows)"
  },
  {
    "objectID": "lectures/lecture-git-github.html#working-locally-git-client-1",
    "href": "lectures/lecture-git-github.html#working-locally-git-client-1",
    "title": "Data Viz with R",
    "section": "Working locally: Git client",
    "text": "Working locally: Git client\nTo use Git on your computer you need a Git Client. There are heaps of git clients available, with different pros and cons. Here are a few examples:\n\n\n2. RStudio interface\n\nThis is what we will use!\nCheck out happygitwithr.com"
  },
  {
    "objectID": "lectures/lecture-git-github.html#working-locally-git-client-2",
    "href": "lectures/lecture-git-github.html#working-locally-git-client-2",
    "title": "Data Viz with R",
    "section": "Working locally: Git client",
    "text": "Working locally: Git client\nTo use Git on your computer you need a Git Client. There are heaps of git clients available, with different pros and cons. Here are a few examples:\n\n\n3. SAS Enterprise Guide 8 interface\n\nFor SAS users!\nUnderstanding Git Integration in SAS Enterprise Guide"
  },
  {
    "objectID": "lectures/lecture-git-github.html#collaboration-git-hosting-service",
    "href": "lectures/lecture-git-github.html#collaboration-git-hosting-service",
    "title": "Data Viz with R",
    "section": "Collaboration: Git hosting service",
    "text": "Collaboration: Git hosting service\nTo enable collaboration you need a Git Hosting service. There are heaps of options with different pros and cons, but the core functionality is usually the same.\n\n\n\nGitHub\n\nWidely used\nLots of resources"
  },
  {
    "objectID": "lectures/lecture-git-github.html#collaboration-git-hosting-service-1",
    "href": "lectures/lecture-git-github.html#collaboration-git-hosting-service-1",
    "title": "Data Viz with R",
    "section": "Collaboration: Git hosting service",
    "text": "Collaboration: Git hosting service\nTo enable collaboration you need a Git Hosting service. There are heaps of options with different pros and cons, but the core functionality is usually the same.\n\n\nGitea\n\nA light-weight easy to install option.\nImplemented in SURE and ERICA."
  },
  {
    "objectID": "lectures/lecture-git-github.html#collaboration-git-hosting-service-2",
    "href": "lectures/lecture-git-github.html#collaboration-git-hosting-service-2",
    "title": "Data Viz with R",
    "section": "Collaboration: Git hosting service",
    "text": "Collaboration: Git hosting service\nTo enable collaboration you need a Git Hosting service. There are heaps of options with different pros and cons, but the core functionality is usually the same.\n\n\nGitLab\n\nCan be hosted on a private server so ideal for sensitive projects."
  },
  {
    "objectID": "lectures/lecture-git-github.html#key-concept-repository",
    "href": "lectures/lecture-git-github.html#key-concept-repository",
    "title": "Data Viz with R",
    "section": "Key concept: Repository",
    "text": "Key concept: Repository\n\n\n\n\nA repository is where the magic happens \n\nReferred to as a repo* \n1 git project = 1 repo\nDatabase of changes to your code (aka diffs)\nHidden folder on your system named .git"
  },
  {
    "objectID": "lectures/lecture-git-github.html#key-concept-commit",
    "href": "lectures/lecture-git-github.html#key-concept-commit",
    "title": "Data Viz with R",
    "section": "Key concept: Commit",
    "text": "Key concept: Commit\n\n\n\n\nCommit\n\nA Commit is like clicking save in a MS Word document\nIt saves a snapshot of the code at that point in time\nWhy you commit you must write a message explaining what changed\nCommitting is a two stage process - more on this later"
  },
  {
    "objectID": "lectures/lecture-git-github.html#key-concept-diff",
    "href": "lectures/lecture-git-github.html#key-concept-diff",
    "title": "Data Viz with R",
    "section": "Key concept: Diff",
    "text": "Key concept: Diff\n\n\n\n\nDiff\n\nA diff is the set of changes between two versions of a file\nWhen you commit, it is the diff that gets recorded, not the whole version\nThe screenshot highlights a single diff: deletion of the word ‚Äúclinic‚Äù"
  },
  {
    "objectID": "lectures/lecture-git-github.html#workflow-1",
    "href": "lectures/lecture-git-github.html#workflow-1",
    "title": "Data Viz with R",
    "section": "Workflow",
    "text": "Workflow"
  },
  {
    "objectID": "lectures/lecture-git-github.html#workflow-2",
    "href": "lectures/lecture-git-github.html#workflow-2",
    "title": "Data Viz with R",
    "section": "Workflow",
    "text": "Workflow"
  },
  {
    "objectID": "lectures/lecture-git-github.html#workflow-3",
    "href": "lectures/lecture-git-github.html#workflow-3",
    "title": "Data Viz with R",
    "section": "Workflow",
    "text": "Workflow\nHow you actual perform these commands depends on the git client you are using‚Ä¶\n\nWe will use the RStudio Interface"
  },
  {
    "objectID": "lectures/lecture-git-github.html#what-files-can-i-track",
    "href": "lectures/lecture-git-github.html#what-files-can-i-track",
    "title": "Data Viz with R",
    "section": "What files can I track?",
    "text": "What files can I track?\n\nThis all works best for non-binary or text files e.g.¬†your typical code files (.sas, .do, .R, .Rmd, .py) but also .png, .csv etc\nYou can include non-binary files (.pdf, .docx, .xlsx etc) in a git repo but the diff features won‚Äôt work. It can still be useful if using the repo as a central organisation point (e.g.¬†if you save your published manuscript with the analysis code)."
  },
  {
    "objectID": "lectures/lecture-git-github.html#how-often-should-i-commit",
    "href": "lectures/lecture-git-github.html#how-often-should-i-commit",
    "title": "Data Viz with R",
    "section": "How often should I commit?",
    "text": "How often should I commit?\n\nWell, it depends.\nJust like when you start writing a word document you might not click save very often as you spew out lots of ideas, but at the end of your thesis you will carefully save every change!\nIt is best practice to keep commits fairly small and related, especially for mature projects."
  },
  {
    "objectID": "lectures/lecture-git-github.html#whats-with-the-staging-area",
    "href": "lectures/lecture-git-github.html#whats-with-the-staging-area",
    "title": "Data Viz with R",
    "section": "What‚Äôs with the staging area?",
    "text": "What‚Äôs with the staging area?\n\nThere are advantages of breaking up the commit into two steps\n\nYou can split a big edit into bite-sized pieces\nEasier to review\nIf you make a mistake you can unstage. You can‚Äôt un-commit!"
  },
  {
    "objectID": "lectures/lecture-git-github.html#what-about-my-sensitive-datacode",
    "href": "lectures/lecture-git-github.html#what-about-my-sensitive-datacode",
    "title": "Data Viz with R",
    "section": "What about my sensitive data/code?",
    "text": "What about my sensitive data/code?\nIf your data are sensitive be very careful not to track with Git (more tips on this later).\nPrivate repos are available if you don‚Äôt want the public to see your code (you can change to public later if desired.)\nGit Hosting Services like Gitea are available in secure analysis environments (SURE/ERICA etc)"
  },
  {
    "objectID": "lectures/lecture-git-github.html#how-does-my-repo-align-with-my-project-folder",
    "href": "lectures/lecture-git-github.html#how-does-my-repo-align-with-my-project-folder",
    "title": "Data Viz with R",
    "section": "How does my repo align with my project folder?",
    "text": "How does my repo align with my project folder?\n\n\nYou need to actively think about this!\nOption: Root folder of the project\nOption: Specific folder (e.g.¬†just Code/)\nGit ignores files and folders listed in the special .gitignore file"
  },
  {
    "objectID": "lectures/lecture-git-github.html#mini-exercise",
    "href": "lectures/lecture-git-github.html#mini-exercise",
    "title": "Data Viz with R",
    "section": "Mini-Exercise",
    "text": "Mini-Exercise\n\n 15 minutes\n\nFork the exercise repo\n\n\n\n\n\n\nClick here and follow the directions to create a personal fork of the Exercises repo on GitHub\n\nClone this repo as a new project in RStudio\n\nClick on the Code icon and copy the HTTPS url to your clipboard\nIn RStudio, create a new project using this url:\n\nNew Project &gt; Version Control &gt; Git\nPaste the copied url into the Repository URL field\nCarefully choose where you want to store these files on your computer"
  },
  {
    "objectID": "lectures/lecture-data-vis.html#data-visualisation-with-ggplot2",
    "href": "lectures/lecture-data-vis.html#data-visualisation-with-ggplot2",
    "title": "Data Viz with R",
    "section": "Data visualisation with ggplot2",
    "text": "Data visualisation with ggplot2"
  },
  {
    "objectID": "lectures/lecture-data-vis.html#section-1",
    "href": "lectures/lecture-data-vis.html#section-1",
    "title": "Data Viz with R",
    "section": "",
    "text": "Artwork by @allison_horst"
  },
  {
    "objectID": "lectures/lecture-data-vis.html#ggplot2",
    "href": "lectures/lecture-data-vis.html#ggplot2",
    "title": "Data Viz with R",
    "section": "ggplot2",
    "text": "ggplot2\n\n\n\nA grammar of graphics\nConsistent syntax\nFlexible\nCustomisable\nggplot2.tidyverse.org\nexts.ggplot2.tidyverse.org/gallery"
  },
  {
    "objectID": "lectures/lecture-data-vis.html#components-of-ggplot-function",
    "href": "lectures/lecture-data-vis.html#components-of-ggplot-function",
    "title": "Data Viz with R",
    "section": "Components of ggplot() function",
    "text": "Components of ggplot() function\n\n\nData (data =)\nCoordinate system (x and y)\nAesthetics (aes())\nGeometries (geom_*)"
  },
  {
    "objectID": "lectures/lecture-data-vis.html#ggplot2-components-data",
    "href": "lectures/lecture-data-vis.html#ggplot2-components-data",
    "title": "Data Viz with R",
    "section": "ggplot2 components: Data",
    "text": "ggplot2 components: Data\n\n\n# Load libraries\nlibrary(ggplot2)\nlibrary(palmerpenguins)\n\n# Call ggplot\nggplot(\n  data = penguins\n)"
  },
  {
    "objectID": "lectures/lecture-data-vis.html#ggplot2-components-coordinates",
    "href": "lectures/lecture-data-vis.html#ggplot2-components-coordinates",
    "title": "Data Viz with R",
    "section": "ggplot2 components: Coordinates",
    "text": "ggplot2 components: Coordinates\n\n\n# Load libraries\nlibrary(ggplot2)\nlibrary(palmerpenguins)\n\n# Call ggplot\nggplot(\n  data = penguins,\n  aes(x = body_mass_g)\n)"
  },
  {
    "objectID": "lectures/lecture-data-vis.html#ggplot2-components-geom",
    "href": "lectures/lecture-data-vis.html#ggplot2-components-geom",
    "title": "Data Viz with R",
    "section": "ggplot2 components: Geom",
    "text": "ggplot2 components: Geom\n\n\n# Load libraries\nlibrary(ggplot2)\nlibrary(palmerpenguins)\n\n# Call ggplot\nggplot(\n  data = penguins,\n  aes(x = body_mass_g)) + \n  geom_histogram()"
  },
  {
    "objectID": "lectures/lecture-data-vis.html#ggplot2-components-static-aesthetics",
    "href": "lectures/lecture-data-vis.html#ggplot2-components-static-aesthetics",
    "title": "Data Viz with R",
    "section": "ggplot2 components: Static Aesthetics",
    "text": "ggplot2 components: Static Aesthetics\n\n\n# Load libraries\nlibrary(ggplot2)\nlibrary(palmerpenguins)\n\n# Call ggplot\nggplot(\n  data = penguins,\n  aes(x = body_mass_g)) + \n  geom_histogram(\n    color = 'navy',\n    fill = 'lightblue'\n  )"
  },
  {
    "objectID": "lectures/lecture-data-vis.html#ggplot2-components-mapped-aesthetics",
    "href": "lectures/lecture-data-vis.html#ggplot2-components-mapped-aesthetics",
    "title": "Data Viz with R",
    "section": "ggplot2 components: Mapped Aesthetics",
    "text": "ggplot2 components: Mapped Aesthetics\n\n\n# Load libraries\nlibrary(ggplot2)\nlibrary(palmerpenguins)\n\n# Call ggplot\nggplot(\n  data = penguins,\n  aes(x = body_mass_g, fill = ..x..)) + \n  geom_histogram() +\n  scale_fill_gradient(low = 'lightblue', \n                      high = 'navy')"
  },
  {
    "objectID": "lectures/lecture-data-vis.html#two-numeric-variables",
    "href": "lectures/lecture-data-vis.html#two-numeric-variables",
    "title": "Data Viz with R",
    "section": "Two numeric variables",
    "text": "Two numeric variables\n\n\n# Plot\nggplot(\n  data = penguins,\n  aes(x = flipper_length_mm, \n      y = bill_length_mm)) + \n  geom_point()"
  },
  {
    "objectID": "lectures/lecture-data-vis.html#one-numeric-one-categorical",
    "href": "lectures/lecture-data-vis.html#one-numeric-one-categorical",
    "title": "Data Viz with R",
    "section": "One numeric, One categorical",
    "text": "One numeric, One categorical\n\n\n# Plot\nggplot(\n  data = penguins,\n  aes(x = island, \n      y = body_mass_g)) + \n  geom_boxplot()"
  },
  {
    "objectID": "lectures/lecture-data-vis.html#more-elaborate-combinations",
    "href": "lectures/lecture-data-vis.html#more-elaborate-combinations",
    "title": "Data Viz with R",
    "section": "More elaborate combinations",
    "text": "More elaborate combinations\n\n\nCode\nlibrary(palmerpenguins)\nlibrary(ggplot2)\nlibrary(RColorBrewer)\nlibrary(colorspace)\nlibrary(ggtext)\n\nmyCols &lt;- brewer.pal(3, 'Set2')\n\nggplot(data=penguins,\n       aes(x = body_mass_g, \n           y = flipper_length_mm,\n           color = species,\n           fill = species)) +\n  geom_point(shape = 21, size = 3) +\n  geom_smooth(method=\"lm\", size=3) +\n  scale_color_manual(\"\", values = myCols) +\n  scale_fill_manual(\"\", values = lighten(myCols, 0.5)) +\n  scale_x_continuous(labels = scales::comma) +\n  labs(y = \"Flipper length (mm)\",\n       x = \"Body mass (g)\",\n       title = \"&lt;span style='color: #8DA0CB'&gt;**Gentoo**&lt;/span&gt; penguins are larger and heavier than \n       &lt;span style='color: #66C2A5'&gt;**Adelie**&lt;/span&gt; or\n       &lt;span style='color: #FC8D62'&gt;**Chinstrap**&lt;/span&gt;\",\n       subtitle = \"**Penguin body mass (g) versus flipper length (mm) by species**\",\n       caption = \"**Data** from the Palmer Penguins dataset\") +\n  theme_minimal() +\n  theme(\n    plot.title.position = \"plot\",\n    plot.title = element_markdown(color='grey10', size=24),\n    plot.subtitle = element_markdown(color='grey60', size=16,\n                                 margin = margin(5,0,10,0)),\n    plot.caption = element_markdown(color = \"grey60\",\n                                size=10, hjust=0),\n    axis.title = element_text(color='grey10', size=16),\n    axis.text = element_text(color='grey10', size=14)\n  )"
  },
  {
    "objectID": "lectures/lecture-data-vis.html#ggplot2-a-note-on-style",
    "href": "lectures/lecture-data-vis.html#ggplot2-a-note-on-style",
    "title": "Data Viz with R",
    "section": "ggplot2 A note on style",
    "text": "ggplot2 A note on style\n\n\n\n# Load libraries\nlibrary(ggplot2)\nlibrary(palmerpenguins)\n\n# Call ggplot\nggplot(\n  data = penguins,\n  aes(x = body_mass_g)) + \n  geom_histogram(\n    color = 'navy',\n    fill = 'lightblue')\n\n\n\nlibrary() calls on top\nPlenty of # Comments\nSpacing x = body_mass_g\nIndentation\ndata = and (aes()) on separate lines\nGeoms on new lines\ncolor and fill on new lines\n\n\n\n\n\n\nggplot(data=penguins,aes(x=body_mass_g))+geom_histogram(color='navy',fill='lightblue')\n\nDoes the same but harder to read and debug!"
  },
  {
    "objectID": "lectures/lecture-data-vis.html#mini-exercise",
    "href": "lectures/lecture-data-vis.html#mini-exercise",
    "title": "Data Viz with R",
    "section": "Mini-Exercise",
    "text": "Mini-Exercise\n\n 5 minutes\n\nModify the starter code to produce the figure\n\n\n\n\n\n\nFigureStarter codeHints\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n# Load libraries\nlibrary(ggplot2)\nlibrary(palmerpenguins)\n\n# Call ggplot\nggplot(\n  data = penguins,\n  aes(x = body_mass_g)) + \n  geom_histogram(\n    color = 'navy',\n    fill = 'lightblue'\n  )\n\n\n\n\nThis is a density plot\nEnter ?geom_density() at the console to open the R Documentation. Scroll down to the section on Aesthetics to read about other modifiable aesthetics."
  },
  {
    "objectID": "lectures/lecture-data-vis.html#aesthetic-mappings",
    "href": "lectures/lecture-data-vis.html#aesthetic-mappings",
    "title": "Data Viz with R",
    "section": "Aesthetic mappings",
    "text": "Aesthetic mappings\nMap variables to visual elements\n\n\nColour\nFill\nShape\nSize\nLine type"
  },
  {
    "objectID": "lectures/lecture-data-vis.html#map-colour-to-body-mass",
    "href": "lectures/lecture-data-vis.html#map-colour-to-body-mass",
    "title": "Data Viz with R",
    "section": "Map colour to body mass",
    "text": "Map colour to body mass\n\n\n# Scatterplot\nggplot(\n  data = penguins,\n  aes(\n    x = body_mass_g, \n    y = flipper_length_mm,\n    color = body_mass_g)) + \n  geom_point()"
  },
  {
    "objectID": "lectures/lecture-data-vis.html#map-size-to-body-mass",
    "href": "lectures/lecture-data-vis.html#map-size-to-body-mass",
    "title": "Data Viz with R",
    "section": "Map size to body mass",
    "text": "Map size to body mass\n\n\n# Scatterplot\nggplot(\n  data = penguins,\n  aes(\n    x = body_mass_g, \n    y = flipper_length_mm,\n    size = body_mass_g)) + \n  geom_point()"
  },
  {
    "objectID": "lectures/lecture-data-vis.html#map-colour-to-species",
    "href": "lectures/lecture-data-vis.html#map-colour-to-species",
    "title": "Data Viz with R",
    "section": "Map colour to species",
    "text": "Map colour to species\n\n\n# Scatterplot\nggplot(\n  data = penguins,\n  aes(\n    x = body_mass_g, \n    y = flipper_length_mm,\n    color = species)) + \n  geom_point()"
  },
  {
    "objectID": "lectures/lecture-data-vis.html#map-species-to-colour-and-shape",
    "href": "lectures/lecture-data-vis.html#map-species-to-colour-and-shape",
    "title": "Data Viz with R",
    "section": "Map species to colour and shape",
    "text": "Map species to colour and shape\n\n\n# Scatterplot\nggplot(\n  data = penguins,\n  aes(\n    x = body_mass_g, \n    y = flipper_length_mm,\n    color = species,\n    shape = species)) + \n  geom_point()"
  },
  {
    "objectID": "lectures/lecture-data-vis.html#mini-exercise-1",
    "href": "lectures/lecture-data-vis.html#mini-exercise-1",
    "title": "Data Viz with R",
    "section": "Mini-Exercise",
    "text": "Mini-Exercise\n\n 5 minutes\n\nModify the starter code to produce the figure!\n\n\n\n\n\n\nFigureStarter code\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n# Plot\nggplot(\n  data = penguins,\n  aes(x = island, \n      y = body_mass_g)) + \n  geom_boxplot()"
  },
  {
    "objectID": "lectures/lecture-data-vis.html#base-plot",
    "href": "lectures/lecture-data-vis.html#base-plot",
    "title": "Data Viz with R",
    "section": "Base plot",
    "text": "Base plot\n\n\nggplot(data=penguins,\n       aes(x = body_mass_g, \n           y = flipper_length_mm,\n           color = species,\n           fill = species)) +\n  geom_point()"
  },
  {
    "objectID": "lectures/lecture-data-vis.html#layering-geoms",
    "href": "lectures/lecture-data-vis.html#layering-geoms",
    "title": "Data Viz with R",
    "section": "Layering geoms",
    "text": "Layering geoms\n\n\nggplot(data=penguins,\n       aes(x = body_mass_g, \n           y = flipper_length_mm,\n           color = species,\n           fill = species)) +\n  geom_point() +\n  geom_smooth(method = 'lm')"
  },
  {
    "objectID": "lectures/lecture-data-vis.html#add-color-scale",
    "href": "lectures/lecture-data-vis.html#add-color-scale",
    "title": "Data Viz with R",
    "section": "Add color scale",
    "text": "Add color scale\n\n\nmyCols &lt;- c(\"skyblue\", \"orange\", \"forestgreen\")\n\nggplot(data=penguins,\n       aes(x = body_mass_g, \n           y = flipper_length_mm,\n           color = species,\n           fill = species)) +\n  geom_point() +\n  geom_smooth(method = 'lm') + \n  scale_color_manual(values = myCols)"
  },
  {
    "objectID": "lectures/lecture-data-vis.html#add-fill-scale",
    "href": "lectures/lecture-data-vis.html#add-fill-scale",
    "title": "Data Viz with R",
    "section": "Add fill scale",
    "text": "Add fill scale\n\n\nmyCols &lt;- c(\"skyblue\", \"orange\", \"forestgreen\")\n\nggplot(data=penguins,\n       aes(x = body_mass_g, \n           y = flipper_length_mm,\n           color = species,\n           fill = species)) +\n  geom_point() +\n  geom_smooth(method = 'lm') + \n  scale_color_manual(values = myCols) +\n  scale_fill_manual(values = myCols)"
  },
  {
    "objectID": "lectures/lecture-data-vis.html#vary-static-aesthetics",
    "href": "lectures/lecture-data-vis.html#vary-static-aesthetics",
    "title": "Data Viz with R",
    "section": "Vary static aesthetics",
    "text": "Vary static aesthetics\n\n\nmyCols &lt;- c(\"skyblue\", \"orange\", \"forestgreen\")\n\nggplot(data=penguins,\n       aes(x = body_mass_g, \n           y = flipper_length_mm,\n           color = species,\n           fill = species)) +\n  geom_point(size = 2) +\n  geom_smooth(method = 'lm', size = 2) + \n  scale_color_manual(values = myCols) +\n  scale_fill_manual(values = myCols)"
  },
  {
    "objectID": "lectures/lecture-data-vis.html#add-x-and-y-scales",
    "href": "lectures/lecture-data-vis.html#add-x-and-y-scales",
    "title": "Data Viz with R",
    "section": "Add x and y scales",
    "text": "Add x and y scales\n\n\nmyCols &lt;- c(\"skyblue\", \"orange\", \"forestgreen\")\n\nggplot(data=penguins,\n       aes(x = body_mass_g, \n           y = flipper_length_mm,\n           color = species,\n           fill = species)) +\n  geom_point(size = 2) +\n  geom_smooth(method = 'lm', size = 2) + \n  scale_color_manual(values = myCols) +\n  scale_fill_manual(values = myCols) +\n  scale_x_continuous(\"Body mass (g)\") +\n  scale_y_continuous(\"Flipper length (mm)\")"
  },
  {
    "objectID": "lectures/lecture-data-vis.html#mini-exercise-2",
    "href": "lectures/lecture-data-vis.html#mini-exercise-2",
    "title": "Data Viz with R",
    "section": "Mini-Exercise",
    "text": "Mini-Exercise\n\n 15 minutes\n\nUse ggplot2 and the penguins data to produce the figure\n\n\n\n\n\n\nFigureHints Seriously, help\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nStart by identifying the x, y and fill aesthetics that will go in to aes().\nThis plot combines geom_jitter() and geom_boxplot()\nSetting the alpha = argument makes the boxplots transparent\nUse scale_fill_manual() to control the fill colors for the three different species\n\n\n\n\n\n# Fill in the blanks!\nggplot(\n  data = ,\n  aes(x = ,\n      y = ,\n      fill = )) +\n  geom_jitter(shape = ) +\n  geom_boxplot(\n    alpha = ) + \n  scale_y_continuous(\n    \" \",\n    limits = c( ,  )) + \n  scale_x_discrete(NULL) + \n  scale_fill_manual(NULL,\n    values = c(' ',' ',' '))"
  }
]